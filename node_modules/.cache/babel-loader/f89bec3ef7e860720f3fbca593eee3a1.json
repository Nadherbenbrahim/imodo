{"ast":null,"code":"import _slicedToArray from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{host}from'../../config';export var getConnectedPagesProject=function getConnectedPagesProject(){return function(dispatch){return axios.get(host+\"/api/v1/secure/project/get/user\",{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('all projects for this user',res.data.data);dispatch({type:'GET_WIZARD_ACTIVE_PAGE_POSTS',payload:res.data.data});}).catch(function(err){return console.log(\"err getConnectedPagesProject\",err);});};};export var addPageEntity=function addPageEntity(page){return function(dispatch){return axios.get(host+\"/api/v1/secure/pages/entities/add/\".concat(page.id),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('add entity',res.data.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err addPageEntity\",err);});};};export var getPageEntities=function getPageEntities(page){return function(dispatch){return axios.get(host+\"/api/v1/secure/project/get/entitiesproject/\".concat(page.platform,\"/\").concat(page.id),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){// console.log('entities mtaaa page', res.data.data);\nvar categories=res.data.data;if(categories.length>0){categories.map(function(cat,index){return cat.default===true&&categories.splice(index,1);});};dispatch({type:'GET_ENTITIES_OF_A_PAGE',payload:categories});}).catch(function(err){return console.log(\"err getPageEntities\",err);});};};// TEAM:\nexport var sendMailTeam=function sendMailTeam(wizardSelectedPage,emailTeamMember){return function(dispatch){return axios.post(host+\"/api/v1/secure/membership/sendMail/\".concat(wizardSelectedPage.id,\"/\").concat(wizardSelectedPage.platform,\"/\"),{email:emailTeamMember},{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('Sending the maiiiiiil  => ',res.data.data);// dispatch({\n//     type: 'GET_ALL_PRODUCT_CATEGORIES',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err getConnectedPagesProject\",err);});};};export var inviteMember=function inviteMember(page){return function(dispatch){return axios.get(host+\"/api/v1/secure/membership/get/\".concat(page.id,\"/\").concat(page.platform),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}});// .then(res => {\n//     console.log('Token of invitation', res.data.data);\n//     // dispatch({\n//     //     type: 'GET_ENTITIES_OF_A_PAGE',\n//     //     payload: res.data.data\n//     // })\n// })\n// .catch((err) => console.log(\"err inviteMember\", err))\n};};export var deleteTeamMember=function deleteTeamMember(page,idFacebook){return function(dispatch){var type=page.platform;var idPage=page.id;return axios.post(host+\"/api/v1/secure/membership/deleteMember/\",{idFacebook:idFacebook,idPage:idPage,type:type},{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){// console.log('deleteTeamMember', res.data.data);\n// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"deleteTeamMember error\",err);});};};/* INSTAGRAM */export var connectInstagramPage=function connectInstagramPage(idPage){return function(dispatch){var page={id:idPage};return axios.post(host+\"/api/v1/secure/pagesInsta/connect/\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de connect page insta',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err connect page insta\",err);});};};export var disconnectInstagramPage=function disconnectInstagramPage(idPage){return function(dispatch){var page={id:idPage};return axios.post(host+\"/api/v1/secure/pagesInsta/disconnect/disconnect\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de disconnect page insta',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err disconnect page instagram\",err);});};};export var deleteInstagramPage=function deleteInstagramPage(idPage){return function(dispatch){var page={id:idPage};return axios.post(host+\"/api/v1/secure/pagesInsta/disconnect/delete\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de disconnect page insta',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err disconnect page instagram\",err);});};};export var makeOwnerInstagramPage=function makeOwnerInstagramPage(idPage,idFacebook){return function(dispatch){var page={id:idPage,idFacebook:idFacebook// idFacebook of the new owner\n};return axios.post(host+\"/api/v1/secure/pagesInsta/disconnect/owner\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de owner page insta',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err owner page instagram\",err);});};};/* FACEBOOK */export var connectFacebookPage=function connectFacebookPage(idPage){return function(dispatch){var page={id:idPage};return axios.post(host+\"/api/v1/secure/pages/connect/\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de connect page facebook',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err de connect page facebook\",err);});};};export var disconnectFacebookPage=function disconnectFacebookPage(idPage){return function(dispatch){var page={id:idPage};return axios.post(host+\"/api/v1/secure/pages/disconnect/disconnect\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de disconnect page facebok',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err de disconnect page facebok\",err);});};};export var deleteFacebookPage=function deleteFacebookPage(idPage,idFacebook){return function(dispatch){var page={id:idPage};return axios.post(host+\"/api/v1/secure/pages/disconnect/delete\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de disconnect page facebok',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err de disconnect page facebok\",err);});};};export var makeOwnerFacebookPage=function makeOwnerFacebookPage(idPage,idFacebook){return function(dispatch){var page={id:idPage,idFacebook:idFacebook// idFacebook of the new owner\n};return axios.post(host+\"/api/v1/secure/pages/disconnect/owner\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de owner page facebook',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err owner page facebook\",err);});};};export var selectSocialMediaPage=function selectSocialMediaPage(page,platform,status){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var selectedPage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// console.log(\"Full page data =>\", page );\n// let userData = JSON.parse(localStorage.getItem('userData'));\n// console.log(\"Full userData\", userData.user.idFacebook);\n/*\r\n            ALL STATUS :\r\n            props.status === \"listPageConnectedOwner\" \r\n            ? \r\n            #E5007D\" \r\n            : \r\n            props.status === \"listPageInvite\" \r\n            ?\r\n            #139216\"\r\n            : \r\n            \"listPageInviteAdmin\" \r\n            ?\r\n            #199EE3\" \r\n            :\r\n            #B4B4B4\"\r\n        */selectedPage={platform:platform===\"fb\"?\"facebook\":\"instagram\",name:page.name,picture_url:page.imageUrl?page.imageUrl:\"https://graph.facebook.com/v8.0/\".concat(page.idPage,\"/picture?access_token=\").concat(page.access_token),id:page.idPage,accessToken:page.access_token,team:page.user,admins:page.admins,status:status};dispatch({type:'SELECT_SOCIAL_MEDIA_PAGE',payload:selectedPage});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getFbData=function getFbData(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var token;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return localStorage.getItem('authtoken');case 2:token=_context2.sent;return _context2.abrupt(\"return\",axios.get(host+'/api/v1/secure/pages/get/all/',{headers:{'authorization':'Bearer '+token}}).then(function(res){var allFbPages=[];Object.entries(res.data.data).map(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],tab=_ref4[1];return tab.map(function(page){page.status=key;allFbPages.push(page);});});allFbPages.sort(function(page,nextPage){var nameA=page.name.toLowerCase(),nameB=nextPage.name.toLowerCase();//sort ascending \nif(nameA<nameB)return-1;if(nameA>nameB)return 1;return 0;// default return value (no sorting)\n});dispatch({type:'GET_FB_DATA',payload:allFbPages,payload2:res.data.data});}).catch(function(err){console.log(\"GetFbData err\",JSON.stringify(err));}));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var getInstaData=function getInstaData(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var token;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return localStorage.getItem('authtoken');case 2:token=_context3.sent;return _context3.abrupt(\"return\",axios.get(host+'/api/v1/secure/pagesInsta/get/all/',{headers:{'authorization':'Bearer '+token}}).then(function(res){// console.log('Instagram pages ya haider =>', res.data.data)\nvar allInstaPages=[];Object.entries(res.data.data).map(function(_ref6){var _ref7=_slicedToArray(_ref6,2),key=_ref7[0],tab=_ref7[1];return tab.map(function(page){page.status=key;allInstaPages.push(page);});});allInstaPages.sort(function(page,nextPage){var nameA=page.name.toLowerCase(),nameB=nextPage.name.toLowerCase();//sort ascending \nif(nameA<nameB)return-1;if(nameA>nameB)return 1;return 0;// default return value (no sorting)\n});dispatch({type:'GET_INSTA_DATA',payload:allInstaPages,payload2:res.data.data});}).catch(function(err){console.log(\"getInstaData error\",JSON.stringify(err));}));case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref5.apply(this,arguments);};}();};export var resetSocialMediaSelections=function resetSocialMediaSelections(){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt(\"return\",dispatch({type:'RESET_SM_SELECTIONS'}));case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref8.apply(this,arguments);};}();};","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/redux/actions/socialMediaActions.js"],"names":["axios","host","getConnectedPagesProject","dispatch","get","headers","localStorage","getItem","then","res","console","log","data","type","payload","catch","err","addPageEntity","page","id","getPageEntities","platform","categories","length","map","cat","index","default","splice","sendMailTeam","wizardSelectedPage","emailTeamMember","post","email","inviteMember","deleteTeamMember","idFacebook","idPage","connectInstagramPage","disconnectInstagramPage","deleteInstagramPage","makeOwnerInstagramPage","connectFacebookPage","disconnectFacebookPage","deleteFacebookPage","makeOwnerFacebookPage","selectSocialMediaPage","status","selectedPage","name","picture_url","imageUrl","access_token","accessToken","team","user","admins","getFbData","token","allFbPages","Object","entries","key","tab","push","sort","nextPage","nameA","toLowerCase","nameB","payload2","JSON","stringify","getInstaData","allInstaPages","resetSocialMediaSelections"],"mappings":"ybAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,cAArB,CAGA,MAAO,IAAMC,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,EAAM,CAC1C,MAAO,UAACC,QAAD,CAAc,CAEjB,MAAOH,CAAAA,KAAK,CAACI,GAAN,CAAUH,IAAI,kCAAd,CAAoD,CACvDI,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CAD8C,CAApD,EAKNC,IALM,CAKD,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAY,4BAAZ,CAA0CF,GAAG,CAACG,IAAJ,CAASA,IAAnD,EAEAT,QAAQ,CAAC,CACLU,IAAI,CAAE,8BADD,CAELC,OAAO,CAAEL,GAAG,CAACG,IAAJ,CAASA,IAFb,CAAD,CAAR,CAIH,CAZM,EAaNG,KAbM,CAaA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CK,GAA5C,CAAT,EAbA,CAAP,CAcH,CAhBD,CAiBH,CAlBM,CAoBP,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,IAAD,CAAU,CACnC,MAAO,UAACf,QAAD,CAAc,CAEjB,MAAOH,CAAAA,KAAK,CAACI,GAAN,CAAUH,IAAI,6CAAwCiB,IAAI,CAACC,EAA7C,CAAd,CAAiE,CACpEd,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CAD2D,CAAjE,EAKNC,IALM,CAKD,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BF,GAAG,CAACG,IAAJ,CAASA,IAAnC,EAEA;AACA;AACA;AACA;AACH,CAZM,EAaNG,KAbM,CAaA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAiCK,GAAjC,CAAT,EAbA,CAAP,CAcH,CAhBD,CAiBH,CAlBM,CAoBP,MAAO,IAAMI,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACF,IAAD,CAAU,CACrC,MAAO,UAACf,QAAD,CAAc,CAEjB,MAAOH,CAAAA,KAAK,CAACI,GAAN,CAAUH,IAAI,sDAAiDiB,IAAI,CAACG,QAAtD,aAAkEH,IAAI,CAACC,EAAvE,CAAd,CAA2F,CAC9Fd,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CADqF,CAA3F,EAKNC,IALM,CAKD,SAAAC,GAAG,CAAI,CACT;AACA,GAAIa,CAAAA,UAAU,CAAGb,GAAG,CAACG,IAAJ,CAASA,IAA1B,CAEA,GAAGU,UAAU,CAACC,MAAX,CAAoB,CAAvB,CAA0B,CACtBD,UAAU,CAACE,GAAX,CAAe,SAACC,GAAD,CAAKC,KAAL,QACXD,CAAAA,GAAG,CAACE,OAAJ,GAAgB,IAAhB,EAAwBL,UAAU,CAACM,MAAX,CAAkBF,KAAlB,CAAwB,CAAxB,CADb,EAAf,EAGH,EAGDvB,QAAQ,CAAC,CACLU,IAAI,CAAE,wBADD,CAELC,OAAO,CAAEQ,UAFJ,CAAD,CAAR,CAIH,CApBM,EAqBNP,KArBM,CAqBA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAmCK,GAAnC,CAAT,EArBA,CAAP,CAsBH,CAxBD,CAyBH,CA1BM,CA6BP;AACA,MAAO,IAAMa,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,kBAAD,CAAoBC,eAApB,CAAwC,CAChE,MAAO,UAAC5B,QAAD,CAAc,CAEjB,MAAOH,CAAAA,KAAK,CAACgC,IAAN,CAAW/B,IAAI,8CAAyC6B,kBAAkB,CAACX,EAA5D,aAAkEW,kBAAkB,CAACT,QAArF,KAAf,CAAiH,CACpHY,KAAK,CAAEF,eAD6G,CAAjH,CAGP,CACI1B,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CADb,CAHO,EAQNC,IARM,CAQD,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAY,4BAAZ,CAA0CF,GAAG,CAACG,IAAJ,CAASA,IAAnD,EAEA;AACA;AACA;AACA;AACH,CAfM,EAgBNG,KAhBM,CAgBA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CK,GAA5C,CAAT,EAhBA,CAAP,CAiBH,CAnBD,CAoBH,CArBM,CAuBP,MAAO,IAAMkB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAChB,IAAD,CAAU,CAClC,MAAO,UAACf,QAAD,CAAc,CAEjB,MAAOH,CAAAA,KAAK,CAACI,GAAN,CAAUH,IAAI,yCAAoCiB,IAAI,CAACC,EAAzC,aAA+CD,IAAI,CAACG,QAApD,CAAd,CAA8E,CACjFhB,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CADwE,CAA9E,CAAP,CAKA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACH,CAhBD,CAiBH,CAlBM,CAoBP,MAAO,IAAM4B,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACjB,IAAD,CAAMkB,UAAN,CAAqB,CACjD,MAAO,UAACjC,QAAD,CAAc,CAClB,GAAIU,CAAAA,IAAI,CAAGK,IAAI,CAACG,QAAhB,CACA,GAAIgB,CAAAA,MAAM,CAAGnB,IAAI,CAACC,EAAlB,CAEC,MAAOnB,CAAAA,KAAK,CAACgC,IAAN,CAAW/B,IAAI,0CAAf,CAA4D,CAC/DmC,UAAU,CAAVA,UAD+D,CAE/DC,MAAM,CAANA,MAF+D,CAG/DxB,IAAI,CAAJA,IAH+D,CAA5D,CAIL,CACER,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CADX,CAJK,EASNC,IATM,CASD,SAAAC,GAAG,CAAI,CACT;AAEA;AACA;AACA;AACA;AACH,CAhBM,EAiBNM,KAjBM,CAiBA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,CAAsCK,GAAtC,CAAT,EAjBA,CAAP,CAkBH,CAtBD,CAuBH,CAxBM,CA2BP,eACA,MAAO,IAAMsB,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACD,MAAD,CAAY,CAC5C,MAAO,UAAClC,QAAD,CAAc,CAEjB,GAAIe,CAAAA,IAAI,CAAG,CACPC,EAAE,CAAEkB,MADG,CAAX,CAIA,MAAOrC,CAAAA,KAAK,CAACgC,IAAN,CAAW/B,IAAI,qCAAf,CAAuDiB,IAAvD,CAA4D,CAC/Db,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CADsD,CAA5D,EAKNC,IALM,CAKD,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CF,GAAG,CAACG,IAAhD,EAEA;AACA;AACA;AACA;AACH,CAZM,EAaNG,KAbM,CAaA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,CAAsCK,GAAtC,CAAT,EAbA,CAAP,CAcH,CApBD,CAqBH,CAtBM,CAwBP,MAAO,IAAMuB,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAACF,MAAD,CAAY,CAC/C,MAAO,UAAClC,QAAD,CAAc,CAEjB,GAAIe,CAAAA,IAAI,CAAG,CACPC,EAAE,CAAEkB,MADG,CAAX,CAIA,MAAOrC,CAAAA,KAAK,CAACgC,IAAN,CAAW/B,IAAI,kDAAf,CAAoEiB,IAApE,CAAyE,CAC5Eb,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CADmE,CAAzE,EAKNC,IALM,CAKD,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAY,iCAAZ,CAA+CF,GAAG,CAACG,IAAnD,EAEA;AACA;AACA;AACA;AACH,CAZM,EAaNG,KAbM,CAaA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,CAA6CK,GAA7C,CAAT,EAbA,CAAP,CAcH,CApBD,CAqBH,CAtBM,CAwBP,MAAO,IAAMwB,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACH,MAAD,CAAY,CAC3C,MAAO,UAAClC,QAAD,CAAc,CAEjB,GAAIe,CAAAA,IAAI,CAAG,CACPC,EAAE,CAAEkB,MADG,CAAX,CAIA,MAAOrC,CAAAA,KAAK,CAACgC,IAAN,CAAW/B,IAAI,8CAAf,CAAgEiB,IAAhE,CAAqE,CACxEb,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CAD+D,CAArE,EAKNC,IALM,CAKD,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAY,iCAAZ,CAA+CF,GAAG,CAACG,IAAnD,EAEA;AACA;AACA;AACA;AACH,CAZM,EAaNG,KAbM,CAaA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,CAA6CK,GAA7C,CAAT,EAbA,CAAP,CAcH,CApBD,CAqBH,CAtBM,CAwBP,MAAO,IAAMyB,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAACJ,MAAD,CAAQD,UAAR,CAAuB,CACzD,MAAO,UAACjC,QAAD,CAAc,CAEjB,GAAIe,CAAAA,IAAI,CAAG,CACPC,EAAE,CAAEkB,MADG,CAEPD,UAAU,CAAEA,UAAW;AAFhB,CAAX,CAKA,MAAOpC,CAAAA,KAAK,CAACgC,IAAN,CAAW/B,IAAI,6CAAf,CAA+DiB,IAA/D,CAAoE,CACvEb,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CAD8D,CAApE,EAKNC,IALM,CAKD,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAY,4BAAZ,CAA0CF,GAAG,CAACG,IAA9C,EAEA;AACA;AACA;AACA;AACH,CAZM,EAaNG,KAbM,CAaA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,CAAwCK,GAAxC,CAAT,EAbA,CAAP,CAcH,CArBD,CAsBH,CAvBM,CAyBP,cACA,MAAO,IAAM0B,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACL,MAAD,CAAY,CAC3C,MAAO,UAAClC,QAAD,CAAc,CAEjB,GAAIe,CAAAA,IAAI,CAAE,CACNC,EAAE,CAAEkB,MADE,CAAV,CAIA,MAAOrC,CAAAA,KAAK,CAACgC,IAAN,CAAW/B,IAAI,gCAAf,CAAkDiB,IAAlD,CAAuD,CAC1Db,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CADiD,CAAvD,EAKNC,IALM,CAKD,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAY,iCAAZ,CAA+CF,GAAG,CAACG,IAAnD,EAEA;AACA;AACA;AACA;AACH,CAZM,EAaNG,KAbM,CAaA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CK,GAA5C,CAAT,EAbA,CAAP,CAcH,CApBD,CAqBH,CAtBM,CAwBP,MAAO,IAAM2B,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAACN,MAAD,CAAY,CAC9C,MAAO,UAAClC,QAAD,CAAc,CAEjB,GAAIe,CAAAA,IAAI,CAAG,CACPC,EAAE,CAAEkB,MADG,CAAX,CAIA,MAAOrC,CAAAA,KAAK,CAACgC,IAAN,CAAW/B,IAAI,6CAAf,CAA+DiB,IAA/D,CAAoE,CACvEb,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CAD8D,CAApE,EAKNC,IALM,CAKD,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAY,mCAAZ,CAAiDF,GAAG,CAACG,IAArD,EAEA;AACA;AACA;AACA;AACH,CAZM,EAaNG,KAbM,CAaA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,CAA8CK,GAA9C,CAAT,EAbA,CAAP,CAeH,CArBD,CAsBH,CAvBM,CAyBP,MAAO,IAAM4B,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACP,MAAD,CAAQD,UAAR,CAAuB,CACrD,MAAO,UAACjC,QAAD,CAAc,CAEjB,GAAIe,CAAAA,IAAI,CAAG,CACPC,EAAE,CAAEkB,MADG,CAAX,CAIA,MAAOrC,CAAAA,KAAK,CAACgC,IAAN,CAAW/B,IAAI,yCAAf,CAA2DiB,IAA3D,CAAgE,CACnEb,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CAD0D,CAAhE,EAKNC,IALM,CAKD,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAY,mCAAZ,CAAiDF,GAAG,CAACG,IAArD,EAEA;AACA;AACA;AACA;AACH,CAZM,EAaNG,KAbM,CAaA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,CAA8CK,GAA9C,CAAT,EAbA,CAAP,CAeH,CArBD,CAsBH,CAvBM,CAyBP,MAAO,IAAM6B,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACR,MAAD,CAAQD,UAAR,CAAuB,CACxD,MAAO,UAACjC,QAAD,CAAc,CAEjB,GAAIe,CAAAA,IAAI,CAAG,CACPC,EAAE,CAAEkB,MADG,CAEPD,UAAU,CAAEA,UAAW;AAFhB,CAAX,CAKA,MAAOpC,CAAAA,KAAK,CAACgC,IAAN,CAAW/B,IAAI,wCAAf,CAA0DiB,IAA1D,CAA+D,CAClEb,OAAO,CAAE,CACL,gBAAiB,UAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CADxB,CADyD,CAA/D,EAKNC,IALM,CAKD,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAY,+BAAZ,CAA6CF,GAAG,CAACG,IAAjD,EAEA;AACA;AACA;AACA;AACH,CAZM,EAaNG,KAbM,CAaA,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,CAAuCK,GAAvC,CAAT,EAbA,CAAP,CAcH,CArBD,CAsBH,CAvBM,CA0BP,MAAO,IAAM8B,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAAC5B,IAAD,CAAMG,QAAN,CAAe0B,MAAf,CAA0B,CAC3D,+FAAO,iBAAO5C,QAAP,mIAEH;AACA;AACA;AAEA;;;;;;;;;;;;;;;UAiBM6C,YAvBH,CAuBkB,CACjB3B,QAAQ,CAAEA,QAAQ,GAAK,IAAb,CAAoB,UAApB,CAAiC,WAD1B,CAEjB4B,IAAI,CAAE/B,IAAI,CAAC+B,IAFM,CAGjBC,WAAW,CAAGhC,IAAI,CAACiC,QAAL,CAAgBjC,IAAI,CAACiC,QAArB,2CAAmEjC,IAAI,CAACmB,MAAxE,kCAAuGnB,IAAI,CAACkC,YAA5G,CAHG,CAIjBjC,EAAE,CAAED,IAAI,CAACmB,MAJQ,CAKjBgB,WAAW,CAAEnC,IAAI,CAACkC,YALD,CAMjBE,IAAI,CAAEpC,IAAI,CAACqC,IANM,CAOjBC,MAAM,CAAEtC,IAAI,CAACsC,MAPI,CAQjBT,MAAM,CAAEA,MARS,CAvBlB,CAkCH5C,QAAQ,CAAC,CACLU,IAAI,CAAE,0BADD,CAELC,OAAO,CAAEkC,YAFJ,CAAD,CAAR,CAlCG,sDAAP,+DAuCH,CAxCM,CA0CP,MAAO,IAAMS,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAC3B,gGAAO,kBAAOtD,QAAP,uJAceG,CAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,CAdf,QAcCmD,KAdD,iDAgBI1D,KAAK,CAACI,GAAN,CAAUH,IAAI,CAAG,+BAAjB,CAAkD,CACrDI,OAAO,CAAE,CACL,gBAAiB,UAAYqD,KADxB,CAD4C,CAAlD,EAKNlD,IALM,CAKD,SAAAC,GAAG,CAAI,CAET,GAAIkD,CAAAA,UAAU,CAAG,EAAjB,CACAC,MAAM,CAACC,OAAP,CAAepD,GAAG,CAACG,IAAJ,CAASA,IAAxB,EAA8BY,GAA9B,CAAmC,kDAAEsC,GAAF,UAAOC,GAAP,gBAC/BA,CAAAA,GAAG,CAACvC,GAAJ,CAAQ,SAACN,IAAD,CAAU,CACdA,IAAI,CAAC6B,MAAL,CAAce,GAAd,CACAH,UAAU,CAACK,IAAX,CAAgB9C,IAAhB,EACP,CAHG,CAD+B,EAAnC,EAMAyC,UAAU,CAACM,IAAX,CAAgB,SAAC/C,IAAD,CAAMgD,QAAN,CAAoB,CAChC,GAAKC,CAAAA,KAAK,CAAGjD,IAAI,CAAC+B,IAAL,CAAUmB,WAAV,EAAb,CAAsCC,KAAK,CAAGH,QAAQ,CAACjB,IAAT,CAAcmB,WAAd,EAA9C,CACA;AACA,GAAID,KAAK,CAAGE,KAAZ,CAAmB,MAAO,CAAC,CAAR,CAEnB,GAAIF,KAAK,CAAGE,KAAZ,CAAmB,MAAO,EAAP,CAEnB,MAAO,EAAP,CAAU;AACb,CARD,EAUAlE,QAAQ,CAAC,CACLU,IAAI,CAAE,aADD,CAELC,OAAO,CAAE6C,UAFJ,CAGLW,QAAQ,CAAE7D,GAAG,CAACG,IAAJ,CAASA,IAHd,CAAD,CAAR,CAKH,CA7BM,EA8BNG,KA9BM,CA8BA,SAACC,GAAD,CAAS,CACZN,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6B4D,IAAI,CAACC,SAAL,CAAexD,GAAf,CAA7B,EACH,CAhCM,CAhBJ,0DAAP,iEAkDH,CAnDM,CAqDP,MAAO,IAAMyD,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CAC9B,gGAAO,kBAAOtE,QAAP,uJAYcG,CAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,CAZd,QAYAmD,KAZA,iDAcI1D,KAAK,CAACI,GAAN,CAAUH,IAAI,CAAG,oCAAjB,CAAuD,CAC1DI,OAAO,CAAE,CACL,gBAAiB,UAAYqD,KADxB,CADiD,CAAvD,EAKNlD,IALM,CAKD,SAAAC,GAAG,CAAI,CACT;AACA,GAAIiE,CAAAA,aAAa,CAAG,EAApB,CAEAd,MAAM,CAACC,OAAP,CAAepD,GAAG,CAACG,IAAJ,CAASA,IAAxB,EAA8BY,GAA9B,CAAmC,kDAAEsC,GAAF,UAAOC,GAAP,gBAC/BA,CAAAA,GAAG,CAACvC,GAAJ,CAAQ,SAACN,IAAD,CAAU,CACdA,IAAI,CAAC6B,MAAL,CAAce,GAAd,CACAY,aAAa,CAACV,IAAd,CAAmB9C,IAAnB,EACH,CAHD,CAD+B,EAAnC,EAOAwD,aAAa,CAACT,IAAd,CAAmB,SAAC/C,IAAD,CAAMgD,QAAN,CAAoB,CACnC,GAAKC,CAAAA,KAAK,CAAGjD,IAAI,CAAC+B,IAAL,CAAUmB,WAAV,EAAb,CAAsCC,KAAK,CAAGH,QAAQ,CAACjB,IAAT,CAAcmB,WAAd,EAA9C,CACA;AACA,GAAID,KAAK,CAAGE,KAAZ,CAAmB,MAAO,CAAC,CAAR,CAEnB,GAAIF,KAAK,CAAGE,KAAZ,CAAmB,MAAO,EAAP,CAEnB,MAAO,EAAP,CAAU;AACb,CARD,EAUAlE,QAAQ,CAAC,CACLU,IAAI,CAAE,gBADD,CAELC,OAAO,CAAE4D,aAFJ,CAGLJ,QAAQ,CAAE7D,GAAG,CAACG,IAAJ,CAASA,IAHd,CAAD,CAAR,CAKH,CA/BM,EAgCNG,KAhCM,CAgCA,SAACC,GAAD,CAAS,CACZN,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAkC4D,IAAI,CAACC,SAAL,CAAexD,GAAf,CAAlC,EACH,CAlCM,CAdJ,0DAAP,iEAkDH,CAnDM,CAqDP,MAAO,IAAM2D,CAAAA,0BAA0B,CAAG,QAA7BA,CAAAA,0BAA6B,EAAM,CAC5C,gGAAO,kBAAOxE,QAAP,uJAAoBA,QAAQ,CAAC,CAAEU,IAAI,CAAE,qBAAR,CAAD,CAA5B,0DAAP,iEACH,CAFM","sourcesContent":["import axios from 'axios'\r\nimport { host } from '../../config';\r\n\r\n\r\nexport const getConnectedPagesProject = () => {\r\n    return (dispatch) => {\r\n    \r\n        return axios.get(host + `/api/v1/secure/project/get/user`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('all projects for this user', res.data.data)\r\n            \r\n            dispatch({\r\n                type: 'GET_WIZARD_ACTIVE_PAGE_POSTS',\r\n                payload: res.data.data\r\n            })\r\n        })\r\n        .catch((err) => console.log(\"err getConnectedPagesProject\", err))\r\n    }\r\n};\r\n\r\nexport const addPageEntity = (page) => {\r\n    return (dispatch) => {\r\n        \r\n        return axios.get(host + `/api/v1/secure/pages/entities/add/${page.id}`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('add entity', res.data.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err addPageEntity\", err))\r\n    }\r\n};\r\n\r\nexport const getPageEntities = (page) => {\r\n    return (dispatch) => {\r\n        \r\n        return axios.get(host + `/api/v1/secure/project/get/entitiesproject/${page.platform}/${page.id}`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            // console.log('entities mtaaa page', res.data.data);\r\n            let categories = res.data.data;\r\n\r\n            if(categories.length > 0) {\r\n                categories.map((cat,index) =>\r\n                    cat.default === true && categories.splice(index,1)\r\n                );\r\n            };\r\n\r\n\r\n            dispatch({\r\n                type: 'GET_ENTITIES_OF_A_PAGE',\r\n                payload: categories\r\n            })\r\n        })\r\n        .catch((err) => console.log(\"err getPageEntities\", err))\r\n    }\r\n};\r\n\r\n\r\n// TEAM:\r\nexport const sendMailTeam = (wizardSelectedPage,emailTeamMember) => {\r\n    return (dispatch) => {\r\n    \r\n        return axios.post(host + `/api/v1/secure/membership/sendMail/${wizardSelectedPage.id}/${wizardSelectedPage.platform}/`, {\r\n            email: emailTeamMember,\r\n        },\r\n        {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('Sending the maiiiiiil  => ', res.data.data)\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ALL_PRODUCT_CATEGORIES',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err getConnectedPagesProject\", err))\r\n    }\r\n};\r\n\r\nexport const inviteMember = (page) => {\r\n    return (dispatch) => {\r\n        \r\n        return axios.get(host + `/api/v1/secure/membership/get/${page.id}/${page.platform}`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        // .then(res => {\r\n        //     console.log('Token of invitation', res.data.data);\r\n        \r\n        //     // dispatch({\r\n        //     //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n        //     //     payload: res.data.data\r\n        //     // })\r\n        // })\r\n        // .catch((err) => console.log(\"err inviteMember\", err))\r\n    }\r\n};\r\n\r\nexport const deleteTeamMember = (page,idFacebook) => {\r\n    return (dispatch) => {\r\n       let type = page.platform;\r\n       let idPage = page.id;\r\n\r\n        return axios.post(host + `/api/v1/secure/membership/deleteMember/`,{\r\n            idFacebook,\r\n            idPage,\r\n            type,\r\n        },{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            // console.log('deleteTeamMember', res.data.data);\r\n        \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"deleteTeamMember error\", err))\r\n    }\r\n};\r\n\r\n\r\n/* INSTAGRAM */\r\nexport const connectInstagramPage = (idPage) => {\r\n    return (dispatch) => {\r\n\r\n        let page = {\r\n            id: idPage,\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pagesInsta/connect/`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de connect page insta', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err connect page insta\", err))\r\n    }\r\n};\r\n\r\nexport const disconnectInstagramPage = (idPage) => {\r\n    return (dispatch) => {\r\n     \r\n        let page = {\r\n            id: idPage,\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pagesInsta/disconnect/disconnect`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de disconnect page insta', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err disconnect page instagram\", err))\r\n    };\r\n};\r\n\r\nexport const deleteInstagramPage = (idPage) => {\r\n    return (dispatch) => {\r\n     \r\n        let page = {\r\n            id: idPage,\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pagesInsta/disconnect/delete`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de disconnect page insta', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err disconnect page instagram\", err))\r\n    };\r\n};\r\n\r\nexport const makeOwnerInstagramPage = (idPage,idFacebook) => {\r\n    return (dispatch) => {\r\n     \r\n        let page = {\r\n            id: idPage,\r\n            idFacebook: idFacebook // idFacebook of the new owner\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pagesInsta/disconnect/owner`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de owner page insta', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err owner page instagram\", err))\r\n    };\r\n};\r\n\r\n/* FACEBOOK */\r\nexport const connectFacebookPage = (idPage) => {\r\n    return (dispatch) => {\r\n        \r\n        let page ={\r\n            id: idPage,\r\n        };\r\n\r\n        return axios.post(host + `/api/v1/secure/pages/connect/`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de connect page facebook', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err de connect page facebook\", err))\r\n    }\r\n};\r\n\r\nexport const disconnectFacebookPage = (idPage) => {\r\n    return (dispatch) => {\r\n\r\n        let page = {\r\n            id: idPage,\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pages/disconnect/disconnect`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de disconnect page facebok', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err de disconnect page facebok\", err))\r\n\r\n    };\r\n};\r\n\r\nexport const deleteFacebookPage = (idPage,idFacebook) => {\r\n    return (dispatch) => {\r\n\r\n        let page = {\r\n            id: idPage,\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pages/disconnect/delete`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de disconnect page facebok', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err de disconnect page facebok\", err))\r\n\r\n    };\r\n};\r\n\r\nexport const makeOwnerFacebookPage = (idPage,idFacebook) => {\r\n    return (dispatch) => {\r\n     \r\n        let page = {\r\n            id: idPage,\r\n            idFacebook: idFacebook // idFacebook of the new owner\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pages/disconnect/owner`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de owner page facebook', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err owner page facebook\", err))\r\n    };\r\n};\r\n\r\n\r\nexport const selectSocialMediaPage = (page,platform,status) => {\r\n    return async (dispatch) => {\r\n\r\n        // console.log(\"Full page data =>\", page );\r\n        // let userData = JSON.parse(localStorage.getItem('userData'));\r\n        // console.log(\"Full userData\", userData.user.idFacebook);\r\n\r\n        /*\r\n            ALL STATUS :\r\n            props.status === \"listPageConnectedOwner\" \r\n            ? \r\n            #E5007D\" \r\n            : \r\n            props.status === \"listPageInvite\" \r\n            ?\r\n            #139216\"\r\n            : \r\n            \"listPageInviteAdmin\" \r\n            ?\r\n            #199EE3\" \r\n            :\r\n            #B4B4B4\"\r\n        */\r\n \r\n        const selectedPage = {\r\n            platform: platform === \"fb\" ? \"facebook\" : \"instagram\",\r\n            name: page.name,\r\n            picture_url : page.imageUrl ? page.imageUrl : `https://graph.facebook.com/v8.0/${page.idPage}/picture?access_token=${page.access_token}`,\r\n            id: page.idPage,\r\n            accessToken: page.access_token,\r\n            team: page.user,\r\n            admins: page.admins,\r\n            status: status,\r\n        };\r\n        \r\n        dispatch({\r\n            type: 'SELECT_SOCIAL_MEDIA_PAGE',\r\n            payload: selectedPage\r\n        })\r\n    }\r\n};\r\n\r\nexport const getFbData = () => {\r\n    return async (dispatch) => {\r\n        \r\n        /*\r\n            platform={\"fb\"} \r\n            isConnectedPage={page.isConnected}\r\n            namePage={page.name} \r\n            idPage={page.idPage} \r\n            picture={null} \r\n            accessToken={page.access_token} \r\n            status={key} \r\n            team={page.user} \r\n            admins={page.admins}\r\n        */\r\n        \r\n        let token = await localStorage.getItem('authtoken');\r\n\r\n        return axios.get(host + '/api/v1/secure/pages/get/all/', {\r\n            headers: {\r\n                'authorization': 'Bearer ' + token\r\n            }\r\n        })\r\n        .then(res => {\r\n        \r\n            let allFbPages = [];\r\n            Object.entries(res.data.data).map( ([key, tab]) => \r\n                tab.map((page) => {\r\n                    page.status = key;\r\n                    allFbPages.push(page);\r\n            }));\r\n\r\n            allFbPages.sort((page,nextPage) =>  {\r\n                let  nameA = page.name.toLowerCase(), nameB = nextPage.name.toLowerCase()\r\n                //sort ascending \r\n                if (nameA < nameB) return -1; \r\n\r\n                if (nameA > nameB) return 1;\r\n                \r\n                return 0; // default return value (no sorting)\r\n            });\r\n\r\n            dispatch({\r\n                type: 'GET_FB_DATA',\r\n                payload: allFbPages,\r\n                payload2: res.data.data,\r\n            })\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"GetFbData err\", JSON.stringify(err))\r\n        })\r\n    }\r\n};\r\n\r\nexport const getInstaData = () => {\r\n    return async (dispatch) => {\r\n        /*\r\n            platform={\"fb\"} \r\n            isConnectedPage={page.isConnected}\r\n            namePage={page.name} \r\n            idPage={page.idPage} \r\n            picture={null} \r\n            accessToken={page.access_token} \r\n            status={key} \r\n            team={page.user} \r\n            admins={page.admins}\r\n        */\r\n       let token = await localStorage.getItem('authtoken');\r\n        \r\n        return axios.get(host + '/api/v1/secure/pagesInsta/get/all/', {\r\n            headers: {\r\n                'authorization': 'Bearer ' + token\r\n            }\r\n        })\r\n        .then(res => {\r\n            // console.log('Instagram pages ya haider =>', res.data.data)\r\n            let allInstaPages = [];\r\n            \r\n            Object.entries(res.data.data).map( ([key, tab]) => \r\n                tab.map((page) => {\r\n                    page.status = key;\r\n                    allInstaPages.push(page);\r\n                }\r\n            ));\r\n\r\n            allInstaPages.sort((page,nextPage) =>  {                \r\n                let  nameA = page.name.toLowerCase(), nameB = nextPage.name.toLowerCase()\r\n                //sort ascending \r\n                if (nameA < nameB) return -1; \r\n\r\n                if (nameA > nameB) return 1;\r\n                \r\n                return 0; // default return value (no sorting)\r\n            });\r\n            \r\n            dispatch({\r\n                type: 'GET_INSTA_DATA',\r\n                payload: allInstaPages,\r\n                payload2: res.data.data\r\n            })\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"getInstaData error\", JSON.stringify(err))\r\n        })\r\n    }\r\n};\r\n\r\nexport const resetSocialMediaSelections = () => {\r\n    return async (dispatch) => dispatch({ type: 'RESET_SM_SELECTIONS' });\r\n};\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}