{"ast":null,"code":"import axios from'axios';import{host,trainAgentHost}from'../../config';export var answerComment=function answerComment(Page,project,comment,answer){return function(dispatch){// console.log(\"Get from here\", project);\nvar objectToSend={logs:comment,answer:answer,project:project};console.log(\"im sending answerComment to nour\",objectToSend);return axios.post(host+\"/api/v1/secure/logEvent/answer/comment/\".concat(Page.platform),objectToSend,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('answerComment post APi Response =>',res.data.data);// let commentsMatched = [];\n// let commentsNotMatched = []; \n// if(res.data.data[0].events) {\n//     res.data.data[0].events.map(comment => {\n//         if(comment.success) {\n//             commentsMatched.push(comment);\n//         } else {\n//             commentsNotMatched.push(comment);\n//         }\n//     });\n// }\n// dispatch({\n//     type: 'GET_LOGS_BY_PAGE',\n//     payload: res.data.data,\n//     payload1: commentsMatched,\n//     payload2: commentsNotMatched,\n// });\n}).catch(function(err){return console.log(\"answerComment post Api error  =>\",err);});};};export var getLogs=function getLogs(idPostOrPage){return function(dispatch){// console.log(\"Get from here\", project);\nreturn axios.get(host+\"/api/v1/secure/logEvent/post/\".concat(idPostOrPage,\"/all\"),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('getLogs post APi Response =>',res.data.data);var commentsMatched=[];var commentsNotMatched=[];if(res.data.data[0].events){console.log(\"Seeing Events ....\");res.data.data[0].events.map(function(comment){if(comment.success){commentsMatched.push(comment);}else{commentsNotMatched.push(comment);}});console.log(\"Matched =>\",commentsMatched);console.log(\"Not Matched =>\",commentsNotMatched);}dispatch({type:'GET_LOGS_BY_PAGE',payload:res.data.data,payload1:commentsMatched,payload2:commentsNotMatched});}).catch(function(err){return console.log(\"getLogs post Api error  =>\",err);});};};export var deleteProjectByPage=function deleteProjectByPage(projet){return function(dispatch){var objectToSend={project:projet};return axios.put(host+\"/api/v1/secure/project/remove/project\",objectToSend,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('deleteProjectByPage post APi Response =>',res.data.data);dispatch({type:'GET_PROJECT_BY_PAGE',payload:res.data.data});}).catch(function(err){return console.log(\"deleteProjectByPage post Api error  =>\",err);});};};export var goToWizardConfig=function goToWizardConfig(projet,Page,history){return function(dispatch){// Detect intent Type \nvar intentDetection=projet.post.idPost===projet.post.page.idPage;dispatch({type:'FROM_MY_AGENTS_TO_STEP_3_WIZARD',payload:2,payload1:projet._id,payload2:intentDetection?\"generic\":\"default\"});dispatch({type:'SELECT_WIZARD_PAGE',payload:Page});history.push('/home/auto-wizard');};};export var setAgentsSelectedProject=function setAgentsSelectedProject(project,history){return function(dispatch){dispatch({type:'SET_AGENTS_PROJECT',payload:project});history.push('/home/my-agents-messages');};};export var getProjectByPage=function getProjectByPage(Page){return function(dispatch){return axios.get(host+\"/api/v1/secure/pages/get/project/\".concat(Page.id),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('getProjectByPage post APi Response =>',res.data.data);dispatch({type:'GET_PROJECT_BY_PAGE',payload:res.data.data});}).catch(function(err){return console.log(\"getProjectByPage post Api error  =>\",err);});};};","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/redux/actions/myAgentsActions.js"],"names":["axios","host","trainAgentHost","answerComment","Page","project","comment","answer","dispatch","objectToSend","logs","console","log","post","platform","headers","localStorage","getItem","then","res","data","catch","err","getLogs","idPostOrPage","get","commentsMatched","commentsNotMatched","events","map","success","push","type","payload","payload1","payload2","deleteProjectByPage","projet","put","goToWizardConfig","history","intentDetection","idPost","page","idPage","_id","setAgentsSelectedProject","getProjectByPage","id"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport { host,trainAgentHost } from '../../config';\r\n\r\n\r\n\r\nexport const answerComment = (Page,project,comment,answer) => {\r\n    return (dispatch) => {\r\n        // console.log(\"Get from here\", project);\r\n    \r\n        let objectToSend = {\r\n            logs: comment,\r\n            answer: answer,\r\n            project: project, \r\n        };\r\n\r\n        console.log(\"im sending answerComment to nour\", objectToSend);\r\n\r\n        return axios.post(host + `/api/v1/secure/logEvent/answer/comment/${Page.platform}`,objectToSend,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('answerComment post APi Response =>', res.data.data);\r\n\r\n            // let commentsMatched = [];\r\n            // let commentsNotMatched = []; \r\n\r\n            // if(res.data.data[0].events) {\r\n            //     res.data.data[0].events.map(comment => {\r\n            //         if(comment.success) {\r\n            //             commentsMatched.push(comment);\r\n            //         } else {\r\n            //             commentsNotMatched.push(comment);\r\n            //         }\r\n            //     });\r\n            // }\r\n\r\n            // dispatch({\r\n            //     type: 'GET_LOGS_BY_PAGE',\r\n            //     payload: res.data.data,\r\n            //     payload1: commentsMatched,\r\n            //     payload2: commentsNotMatched,\r\n            // });\r\n            \r\n        })\r\n        .catch((err) => console.log(\"answerComment post Api error  =>\", err))\r\n    }\r\n};\r\n\r\nexport const getLogs = (idPostOrPage) => {\r\n    return (dispatch) => {\r\n        // console.log(\"Get from here\", project);\r\n\r\n        return axios.get(host + `/api/v1/secure/logEvent/post/${idPostOrPage}/all`,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('getLogs post APi Response =>', res.data.data);\r\n\r\n            let commentsMatched = [];\r\n            let commentsNotMatched = []; \r\n\r\n            if(res.data.data[0].events) {\r\n                console.log(\"Seeing Events ....\");\r\n                res.data.data[0].events.map(comment => {\r\n                    if(comment.success) {\r\n                        commentsMatched.push(comment);\r\n                    } else {\r\n                        commentsNotMatched.push(comment);\r\n                    }\r\n                });\r\n\r\n                console.log(\"Matched =>\", commentsMatched)\r\n                console.log(\"Not Matched =>\", commentsNotMatched)\r\n\r\n\r\n            }\r\n\r\n            dispatch({\r\n                type: 'GET_LOGS_BY_PAGE',\r\n                payload: res.data.data,\r\n                payload1: commentsMatched,\r\n                payload2: commentsNotMatched,\r\n            });\r\n            \r\n        })\r\n        .catch((err) => console.log(\"getLogs post Api error  =>\", err))\r\n    }\r\n};\r\n\r\nexport const deleteProjectByPage = (projet) => {\r\n    return (dispatch) => {\r\n\r\n        let objectToSend = {\r\n            project: projet,\r\n        };\r\n\r\n        return axios.put(host + `/api/v1/secure/project/remove/project`,objectToSend,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('deleteProjectByPage post APi Response =>', res.data.data);\r\n\r\n            dispatch({\r\n                type: 'GET_PROJECT_BY_PAGE',\r\n                payload: res.data.data,\r\n            });\r\n        })\r\n        .catch((err) => console.log(\"deleteProjectByPage post Api error  =>\", err) )\r\n    }\r\n};\r\n\r\nexport const goToWizardConfig = (projet,Page,history) => {\r\n    return (dispatch) => {\r\n        // Detect intent Type \r\n        let intentDetection = projet.post.idPost === projet.post.page.idPage;\r\n\r\n        dispatch({\r\n            type: 'FROM_MY_AGENTS_TO_STEP_3_WIZARD',\r\n            payload: 2,\r\n            payload1: projet._id,\r\n            payload2: intentDetection ? \"generic\" : \"default\",\r\n        });\r\n\r\n        dispatch({\r\n            type: 'SELECT_WIZARD_PAGE', \r\n            payload: Page,\r\n        });\r\n        history.push('/home/auto-wizard'); \r\n    }\r\n};\r\n\r\n\r\n\r\nexport const setAgentsSelectedProject = (project,history) => {\r\n    return (dispatch) => {\r\n \r\n        dispatch({\r\n            type: 'SET_AGENTS_PROJECT',\r\n            payload: project,\r\n        });\r\n       \r\n        history.push('/home/my-agents-messages');\r\n    }\r\n};\r\n\r\nexport const getProjectByPage = (Page) => {\r\n    return (dispatch) => {\r\n \r\n        return axios.get(host + `/api/v1/secure/pages/get/project/${Page.id}`,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('getProjectByPage post APi Response =>', res.data.data);\r\n\r\n            dispatch({\r\n                type: 'GET_PROJECT_BY_PAGE',\r\n                payload: res.data.data,\r\n            });\r\n        })\r\n        .catch((err) => console.log(\"getProjectByPage post Api error  =>\", err) )\r\n    }\r\n};"]},"metadata":{},"sourceType":"module"}