{"ast":null,"code":"var _jsxFileName = \"/usr/work/smart_front_oussema/src/app/Home/AutoWizard/WizardMiracleInput.js\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Row, Col, Image, OverlayTrigger, Overlay, Popover, Form } from 'react-bootstrap';\nimport Picker from 'emoji-picker-react';\nimport OutsideClickHandler from 'react-outside-click-handler';\nimport Keyboard from 'react-simple-keyboard';\nimport layout from \"simple-keyboard-layouts/build/layouts/arabic\";\nimport ReactTooltip from 'react-tooltip';\nimport Swal from 'sweetalert2/dist/sweetalert2.js'; // Translations\n\nimport { trans } from '../../../Translations';\nimport { IoIosCall } from 'react-icons/io';\nimport { AiOutlineCloseCircle } from 'react-icons/ai';\nimport { BsLink45Deg } from 'react-icons/bs';\nimport { IoIosClose } from 'react-icons/io';\nimport { ReactComponent as Arabic } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/images/home/Arabic.svg\";\nimport { ReactComponent as ArabicInverse } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/images/home/arabic01.svg\";\nimport { ReactComponent as Emoticon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/images/home/emoticon.svg\";\nimport { ReactComponent as EmoticonInverse } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/images/home/emoticon01.svg\";\n\nconst Tag = require('../../../assets/images/home/Tag.svg');\n\nconst TagInverse = require('../../../assets/images/home/tag01.svg');\n\nexport default function WizardMiracleInput(props) {\n  let {\n    lang,\n    label,\n    response,\n    handleResponse,\n    showTags,\n    handleTags,\n    showEmojis,\n    handleEmojis,\n    showKeyboard,\n    handleKeyboard,\n    BtnType,\n    handleBtnType,\n    BtnTitle,\n    handleBtnTitle,\n    BtnValue,\n    handleBtnValue,\n    Btns,\n    handleBtns,\n    platform,\n    changeBtnColor\n  } = props;\n  const keyboard = useRef(null);\n  const [BtnPop, setBtnPop] = useState(false);\n  const [BtnUpdatePop, setBtnUpdatePop] = useState(false);\n  const [BtnUpdatePopTarget, setBtnUpdatePopTarget] = useState(null);\n  const BtnUpdateRef = useRef(null);\n  const [BtnUpdateIndex, setBtnUpdateIndex] = useState(null);\n  const [BtnUpdateType, setBtnUpdateType] = useState('');\n  const [BtnUpdateTitle, setBtnUpdateTitle] = useState('');\n  const [BtnUpdateValue, setBtnUpdateValue] = useState('');\n  const [cursorPos, setCursorPos] = useState(0);\n  const [cursorDone, setCursorDone] = useState(null); // Popup Config :\n\n  const swalWithBootstrapButtons = Swal.mixin({\n    customClass: {\n      confirmButton: 'wizard-pages-active-btn py-3 px-3'\n    },\n    buttonsStyling: false\n  }); // render Functions :\n\n  const Tags = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popover-tags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"pl-1 my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, platform === \"facebook\" &&\n  /*#__PURE__*/\n  // Update the cursor position =>>>\n  React.createElement(Col, {\n    xs: 12,\n    className: \"d-flex mb-1 mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto mr-auto wizard-config-tag\",\n    onClick: () => {\n      handleResponse(resp => resp.substring(0, cursorPos) + '##FIRST_NAME##' + resp.substring(cursorPos));\n      handleTags(!showTags);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, trans[lang].wizardMiracleInput.firstName)), platform === \"facebook\" && /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    className: \"d-flex mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto mr-auto wizard-config-tag\",\n    onClick: () => {\n      handleResponse(resp => resp.substring(0, cursorPos) + '##LAST_NAME##' + resp.substring(cursorPos));\n      handleTags(!showTags);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 25\n    }\n  }, trans[lang].wizardMiracleInput.lastName)), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    className: \"d-flex mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto mr-auto wizard-config-tag\",\n    onClick: () => {\n      handleResponse(resp => resp.substring(0, cursorPos) + '##FULL_NAME##' + resp.substring(cursorPos));\n      handleTags(!showTags);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, trans[lang].wizardMiracleInput.fullName)), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    className: \"m-auto d-flex mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto mr-auto wizard-config-tag\",\n    onClick: () => {\n      handleResponse(resp => resp.substring(0, cursorPos) + '##PAGE_NAME##' + resp.substring(cursorPos));\n      handleTags(!showTags);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  }, trans[lang].wizardMiracleInput.pageName)))));\n\n  const BtnsPopover = /*#__PURE__*/React.createElement(Popover, {\n    id: \"popover-quick-replies\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Popover.Content, {\n    style: {\n      boxShadow: '0px 6px 10px #00000014'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    className: \"d-flex p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(IoIosClose, {\n    className: \"ml-auto mr-1\",\n    color: '#9F9F9F',\n    size: '25',\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => setBtnPop(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 62\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    className: \"mt-2 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    id: \"liste-Btn-miracle\",\n    as: \"select\",\n    onChange: e => handleBtnType(e.target.value),\n    defaultValue: BtnType,\n    style: {\n      backgroundColor: '#E4E6EB'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"web_url\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 33\n    }\n  }, trans[lang].wizardMiracleInput.url), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"phone_number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 33\n    }\n  }, trans[lang].wizardMiracleInput.call))), /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    className: \"mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    id: \"liste-Btn-miracle\",\n    type: \"text\",\n    onChange: e => handleBtnTitle(e.target.value),\n    value: BtnTitle,\n    placeholder: trans[lang].wizardMiracleInput.btnTitle,\n    maxLength: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"ml-auto wizard-config-input-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 37\n    }\n  }, trans[lang].wizardMiracleInput.remainingChars, 20 - BtnTitle.length)))), /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    className: \"mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    id: \"liste-Btn-miracle\",\n    type: BtnType === \"web_url\" ? \"text\" : \"number\",\n    onChange: e => handleBtnValue(e.target.value),\n    value: BtnValue,\n    placeholder: BtnType === \"web_url\" ? trans[lang].wizardMiracleInput.urlPlaceholder : trans[lang].wizardMiracleInput.phonePlaceholder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(Col, {\n    md: 11,\n    className: \"d-flex pl-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wizard-pages-active-btn py-1 px-4\",\n    onClick: () => addNewBtn(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 21\n    }\n  }, trans[lang].wizardMiracleInput.ok)))));\n\n  const BtnsUpdatePopover = () => /*#__PURE__*/React.createElement(Popover, {\n    id: \"popover-quick-replies\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Popover.Content, {\n    style: {\n      boxShadow: '0px 6px 10px #00000014'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    className: \"d-flex p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IoIosClose, {\n    className: \"ml-auto mr-1\",\n    color: '#9F9F9F',\n    size: '25',\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => setBtnUpdatePop(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 58\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    className: \"mt-2 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    id: \"liste-Btn-miracle\",\n    as: \"select\",\n    onChange: e => setBtnUpdateType(e.target.value),\n    defaultValue: BtnUpdateType,\n    style: {\n      backgroundColor: '#E4E6EB'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"web_url\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 33\n    }\n  }, trans[lang].wizardMiracleInput.url), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"phone_number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 33\n    }\n  }, trans[lang].wizardMiracleInput.call))), /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    className: \"mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    id: \"liste-Btn-miracle\",\n    type: \"text\",\n    onChange: e => setBtnUpdateTitle(e.target.value),\n    value: BtnUpdateTitle,\n    placeholder: trans[lang].wizardMiracleInput.btnTitle,\n    maxLength: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"ml-auto wizard-config-input-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 37\n    }\n  }, trans[lang].wizardMiracleInput.remainingChars, 20 - BtnUpdateTitle.length)))), /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    className: \"mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    id: \"liste-Btn-miracle\",\n    type: BtnType === \"web_url\" ? \"text\" : \"number\",\n    onChange: e => setBtnUpdateValue(e.target.value),\n    value: BtnUpdateValue,\n    placeholder: BtnUpdateType === \"web_url\" ? trans[lang].wizardMiracleInput.urlPlaceholder : trans[lang].wizardMiracleInput.phonePlaceholder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(Col, {\n    md: 11,\n    className: \"d-flex pl-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wizard-pages-active-btn py-2 px-4\",\n    onClick: () => updateBtn(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 21\n    }\n  }, trans[lang].wizardMiracleInput.ok)))));\n\n  const popup = message => swalWithBootstrapButtons.fire({\n    title: `${message}`,\n    confirmButtonText: trans[lang].wizardMiracleInput.retry\n  }); // Functions :\n\n\n  const addNewBtn = () => {\n    let newBtns = [...Btns];\n\n    if (BtnType === \"web_url\") {\n      let objectFb = {\n        type: \"web_url\",\n        url: BtnValue,\n        title: BtnTitle,\n        webview_height_ratio: \"tall\"\n      };\n\n      if (BtnTitle === \"\") {\n        popup(trans[lang].wizardMiracleInput.errBtnTitle);\n      } else if (BtnValue === \"\") {\n        popup(trans[lang].wizardMiracleInput.errBtnUrl);\n      } else {\n        newBtns.push(objectFb); // update new Btns :\n\n        handleBtns(newBtns); // reset\n\n        resetBtns();\n      }\n    } else {\n      let objectFb = {\n        type: \"phone_number\",\n        title: BtnTitle,\n        payload: BtnValue\n      };\n\n      if (BtnTitle === \"\") {\n        popup(trans[lang].wizardMiracleInput.errBtnTitle);\n      } else if (BtnValue === \"\") {\n        popup(trans[lang].wizardMiracleInput.errBtnPhone);\n      } else {\n        newBtns.push(objectFb); // update new Btns :\n\n        handleBtns(newBtns); // reset\n\n        resetBtns();\n      }\n    }\n  };\n\n  const updateBtn = () => {\n    let newBtns = [...Btns];\n    let newType = [...BtnUpdateType].join('');\n    let newTitle = [...BtnUpdateTitle].join('');\n    let newValue = [...BtnUpdateValue].join('');\n\n    if (newType === \"web_url\") {\n      newBtns[BtnUpdateIndex].type = BtnUpdateType;\n      newBtns[BtnUpdateIndex].title = newTitle;\n      newBtns[BtnUpdateIndex].url = newValue;\n      handleBtns(newBtns);\n      setBtnUpdatePop(false);\n    } else {\n      newBtns[BtnUpdateIndex].type = BtnUpdateType;\n      newBtns[BtnUpdateIndex].title = newTitle;\n      newBtns[BtnUpdateIndex].payload = newValue;\n      handleBtns(newBtns);\n      setBtnUpdatePop(false);\n    }\n\n    ;\n  };\n\n  const deleteBtn = index => {\n    let newBtns = [...Btns];\n    newBtns.splice(index, 1);\n    handleBtns(newBtns);\n  };\n\n  const resetBtns = () => {\n    handleBtnType('web_url');\n    handleBtnTitle('');\n    handleBtnValue('');\n    setBtnPop(false); // setBtnUpdatePop(false);\n  };\n\n  const handleUpdatePopover = (e, btn, indexBtn) => {\n    setBtnUpdatePopTarget(e.target);\n    setBtnPop(false);\n    setBtnUpdatePop(false);\n\n    if (btn.type === \"web_url\") {\n      setBtnUpdateType(\"web_url\");\n      setBtnUpdateIndex(indexBtn);\n      setBtnUpdateTitle(btn.title);\n      setBtnUpdateValue(btn.url);\n      setBtnUpdatePop(true);\n    } else {\n      setBtnUpdateType(\"phone_number\");\n      setBtnUpdateIndex(indexBtn);\n      setBtnUpdateTitle(btn.title);\n      setBtnUpdateValue(btn.payload);\n      setBtnUpdatePop(true);\n    }\n  }; // Set cursor to the last position\n\n\n  useEffect(() => {\n    if (props.response.length && !cursorDone) {\n      setCursorPos(props.response.length);\n      setCursorDone(true);\n    }\n\n    if (props.response.length && cursorDone) {\n      setCursorPos(props.response.length + 1);\n    }\n  }, [props.response]);\n  return /*#__PURE__*/React.createElement(Row, {\n    className: \"mx-0 px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    className: \"mx-0 px-2 d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"wizard-config-textarea-label my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 17\n    }\n  }, label)), /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    className: \"px-2 mx-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wizard-intent-miracle-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }\n  }, showTags && Tags(), /*#__PURE__*/React.createElement(Row, {\n    className: \"mb-1 mx-0 pt-1 px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Col, {\n    lg: 1,\n    className: \"d-flex p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: showTags ? TagInverse : Tag,\n    onClick: () => handleTags(!showTags),\n    className: \"my-auto mr-auto my-agents-msgs-tiny-icon\",\n    style: {\n      width: '19px',\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: 1,\n    className: \"d-flex p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 21\n    }\n  }, showEmojis ? /*#__PURE__*/React.createElement(EmoticonInverse, {\n    width: 20,\n    height: 20,\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => handleEmojis(!showEmojis),\n    className: \"my-auto mr-auto my-agents-msgs-tiny-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(Emoticon, {\n    width: 20,\n    height: 20,\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => handleEmojis(!showEmojis),\n    className: \"my-auto mr-auto my-agents-msgs-tiny-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: 1,\n    className: \"d-flex p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 21\n    }\n  }, showKeyboard ? /*#__PURE__*/React.createElement(ArabicInverse, {\n    width: 20,\n    height: 20,\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => handleKeyboard(!showKeyboard),\n    className: \"my-auto mr-auto my-agents-msgs-tiny-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(Arabic, {\n    width: 20,\n    height: 20,\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => handleKeyboard(!showKeyboard),\n    className: \"my-auto mr-auto my-agents-msgs-tiny-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 21\n    }\n  }, showKeyboard && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wizard-config-keyboard-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Keyboard, {\n    keyboardRef: r => {\n      keyboard.current = r;\n      keyboard.current.setInput(response);\n    },\n    onChange: input => handleResponse(input),\n    onKeyPress: key => key === \"{enter}\" && handleKeyboard(false),\n    layout: layout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 33\n    }\n  })), showEmojis && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wizard-config-emoji-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(OutsideClickHandler, {\n    onOutsideClick: () => handleEmojis(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Picker, {\n    onEmojiClick: (e, obj) => {\n      handleResponse(resp => resp.substring(0, cursorPos) + obj.emoji + resp.substring(cursorPos));\n      setCursorPos(cursorPos + 2);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 37\n    }\n  }))))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    className: \"mx-0 pt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    onChange: e => {\n      handleResponse(e.target.value);\n\n      if (keyboard.current) {\n        keyboard.current.setInput(e.target.value);\n      }\n    },\n    placeholder: trans[lang].wizardMiracleInput.textAreaPlaceholder,\n    onKeyPress: e => {\n      setCursorPos(e.target.selectionStart + 1);\n      changeBtnColor && changeBtnColor(true);\n    },\n    onClick: e => {\n      setCursorPos(e.target.selectionStart);\n    },\n    value: response,\n    className: \"wizard-config-textarea w-100 py-0\",\n    rows: \"5\",\n    maxLength: \"640\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    className: \"my-0 py-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"hr\", {\n    style: {\n      height: '2px',\n      borderColor: '#B4B4B4',\n      margin: '1px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 25\n    }\n  }))), platform === \"facebook\" && /*#__PURE__*/React.createElement(Row, {\n    className: \"mx-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 25\n    }\n  }, Btns.map((btn, indexBtn) => /*#__PURE__*/React.createElement(Col, {\n    key: indexBtn,\n    lg: 3,\n    className: \"mx-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"wizard-config-quick-replies-btn my-1 py-1 d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 37\n    }\n  }, btn.type === \"web_url\" ? /*#__PURE__*/React.createElement(BsLink45Deg, {\n    color: '#fff',\n    size: 15,\n    className: \"ml-1 mr-auto my-auto\",\n    onClick: e => handleUpdatePopover(e, btn, indexBtn),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 41\n    }\n  }) : /*#__PURE__*/React.createElement(IoIosCall, {\n    color: '#fff',\n    size: 15,\n    className: \"ml-1 mr-auto my-auto\",\n    onClick: e => handleUpdatePopover(e, btn, indexBtn),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: btn.type === \"web_url\" ? \"mr-auto my-auto\" : \"ml-1 mr-auto my-auto\",\n    \"data-for\": \"quickReplyTip\",\n    \"data-tip\": btn.title,\n    onClick: e => {\n      handleUpdatePopover(e, btn, indexBtn);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 41\n    }\n  }, btn.type === \"web_url\" ? \"url\" : \"call\"), /*#__PURE__*/React.createElement(AiOutlineCloseCircle, {\n    className: \"ml-auto my-auto mr-1\",\n    color: \"white\",\n    size: \"15\",\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => deleteBtn(indexBtn),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(ReactTooltip, {\n    id: \"quickReplyTip\",\n    textColor: \"#fff\",\n    backgroundColor: \"#009EE3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 37\n    }\n  }))), Btns.length < 3 && /*#__PURE__*/React.createElement(OverlayTrigger, {\n    trigger: \"click\",\n    placement: \"right\",\n    show: BtnPop,\n    overlay: BtnsPopover,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 3,\n    className: \"wizard-config-quick-replies-btn m-1 py-1 d-flex px-0\",\n    onClick: () => {\n      setBtnUpdatePop(false);\n      setBtnPop(prevState => prevState ? false : true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 37\n    }\n  }, trans[lang].wizardMiracleInput.addBtn))), /*#__PURE__*/React.createElement(\"div\", {\n    ref: BtnUpdateRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Overlay, {\n    show: BtnUpdatePop,\n    target: BtnUpdatePopTarget,\n    placement: \"right\",\n    container: BtnUpdateRef.current,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 33\n    }\n  }, BtnsUpdatePopover()))))))));\n}","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/app/Home/AutoWizard/WizardMiracleInput.js"],"names":["React","useState","useRef","useEffect","Row","Col","Image","OverlayTrigger","Overlay","Popover","Form","Picker","OutsideClickHandler","Keyboard","layout","ReactTooltip","Swal","trans","IoIosCall","AiOutlineCloseCircle","BsLink45Deg","IoIosClose","Tag","require","TagInverse","WizardMiracleInput","props","lang","label","response","handleResponse","showTags","handleTags","showEmojis","handleEmojis","showKeyboard","handleKeyboard","BtnType","handleBtnType","BtnTitle","handleBtnTitle","BtnValue","handleBtnValue","Btns","handleBtns","platform","changeBtnColor","keyboard","BtnPop","setBtnPop","BtnUpdatePop","setBtnUpdatePop","BtnUpdatePopTarget","setBtnUpdatePopTarget","BtnUpdateRef","BtnUpdateIndex","setBtnUpdateIndex","BtnUpdateType","setBtnUpdateType","BtnUpdateTitle","setBtnUpdateTitle","BtnUpdateValue","setBtnUpdateValue","cursorPos","setCursorPos","cursorDone","setCursorDone","swalWithBootstrapButtons","mixin","customClass","confirmButton","buttonsStyling","Tags","resp","substring","wizardMiracleInput","firstName","lastName","fullName","pageName","BtnsPopover","boxShadow","cursor","e","target","value","backgroundColor","url","call","btnTitle","remainingChars","length","urlPlaceholder","phonePlaceholder","addNewBtn","ok","BtnsUpdatePopover","updateBtn","popup","message","fire","title","confirmButtonText","retry","newBtns","objectFb","type","webview_height_ratio","errBtnTitle","errBtnUrl","push","resetBtns","payload","errBtnPhone","newType","join","newTitle","newValue","deleteBtn","index","splice","handleUpdatePopover","btn","indexBtn","width","r","current","setInput","input","key","obj","emoji","textAreaPlaceholder","selectionStart","height","borderColor","margin","map","prevState","addBtn"],"mappings":"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","sourcesContent":["import React, {useState, useRef, useEffect} from 'react';\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Image,\r\n    OverlayTrigger,\r\n    Overlay,\r\n    Popover,\r\n    Form,\r\n} from 'react-bootstrap';\r\nimport Picker from 'emoji-picker-react';\r\nimport OutsideClickHandler from 'react-outside-click-handler';\r\n\r\nimport Keyboard from 'react-simple-keyboard';\r\nimport layout from \"simple-keyboard-layouts/build/layouts/arabic\";\r\nimport ReactTooltip from 'react-tooltip';\r\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\r\n\r\n// Translations\r\nimport { trans } from '../../../Translations';\r\n\r\nimport { IoIosCall } from 'react-icons/io';\r\nimport { AiOutlineCloseCircle } from 'react-icons/ai';\r\nimport { BsLink45Deg } from 'react-icons/bs';\r\nimport { IoIosClose } from 'react-icons/io';\r\nimport {ReactComponent as Arabic} from '../../../assets/images/home/Arabic.svg';\r\nimport {ReactComponent as ArabicInverse} from '../../../assets/images/home/arabic01.svg';\r\nimport {ReactComponent as Emoticon} from '../../../assets/images/home/emoticon.svg';\r\nimport {ReactComponent as EmoticonInverse} from '../../../assets/images/home/emoticon01.svg';\r\n\r\nconst Tag = require('../../../assets/images/home/Tag.svg');\r\nconst TagInverse = require('../../../assets/images/home/tag01.svg');\r\n\r\nexport default function WizardMiracleInput(props) {\r\n\r\n    let {\r\n        lang,\r\n        label,\r\n        response,\r\n        handleResponse,\r\n        showTags,\r\n        handleTags,\r\n        showEmojis,\r\n        handleEmojis,\r\n        showKeyboard,\r\n        handleKeyboard,\r\n        BtnType,\r\n        handleBtnType,\r\n        BtnTitle,\r\n        handleBtnTitle,\r\n        BtnValue,\r\n        handleBtnValue,\r\n        Btns,\r\n        handleBtns,\r\n        platform,\r\n        changeBtnColor,\r\n    } = props;\r\n\r\n    \r\n    const keyboard = useRef(null);\r\n\r\n    const [BtnPop, setBtnPop] = useState(false);\r\n    const [BtnUpdatePop, setBtnUpdatePop] = useState(false);\r\n    const [BtnUpdatePopTarget, setBtnUpdatePopTarget] = useState(null);\r\n    const BtnUpdateRef = useRef(null);\r\n    const [BtnUpdateIndex, setBtnUpdateIndex] = useState(null);\r\n    const [BtnUpdateType, setBtnUpdateType] = useState('');\r\n    const [BtnUpdateTitle, setBtnUpdateTitle] = useState('');\r\n    const [BtnUpdateValue, setBtnUpdateValue] = useState('');\r\n    const [cursorPos, setCursorPos] = useState(0);\r\n    const [cursorDone, setCursorDone] = useState(null);\r\n\r\n    \r\n    // Popup Config :\r\n    const swalWithBootstrapButtons = Swal.mixin({\r\n        customClass: {\r\n          confirmButton: 'wizard-pages-active-btn py-3 px-3',\r\n        },\r\n        buttonsStyling: false\r\n    });\r\n\r\n    // render Functions :\r\n    const Tags = () => (\r\n        <div className=\"popover-tags\" >\r\n            <Col lg={12}>\r\n                <Row className=\"pl-1 my-2\">\r\n                    {platform === \"facebook\"\r\n                    &&\r\n                    // Update the cursor position =>>>\r\n                    <Col xs={12} className=\"d-flex mb-1 mt-2\">\r\n                        <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { handleResponse(resp => resp.substring(0, cursorPos) + '##FIRST_NAME##' + resp.substring(cursorPos)); handleTags(!showTags); }}>{trans[lang].wizardMiracleInput.firstName}</p>\r\n                    </Col>\r\n                    }\r\n\r\n                    {platform === \"facebook\"\r\n                    &&\r\n                    <Col xs={12} className=\"d-flex mb-1\">\r\n                        <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { handleResponse(resp => resp.substring(0, cursorPos) + '##LAST_NAME##' + resp.substring(cursorPos)); handleTags(!showTags); }}>{trans[lang].wizardMiracleInput.lastName}</p>\r\n                    </Col>\r\n                    }\r\n                    \r\n                    <Col xs={12} className=\"d-flex mb-1\">\r\n                        <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { handleResponse(resp => resp.substring(0, cursorPos) + '##FULL_NAME##' + resp.substring(cursorPos)); handleTags(!showTags); }}  >{trans[lang].wizardMiracleInput.fullName}</p>\r\n                    </Col>\r\n\r\n                    <Col xs={12} className=\"m-auto d-flex mb-2\">\r\n                        <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { handleResponse(resp => resp.substring(0, cursorPos) + '##PAGE_NAME##' + resp.substring(cursorPos)); handleTags(!showTags);  }}>{trans[lang].wizardMiracleInput.pageName}</p>\r\n                    </Col> \r\n                </Row>\r\n            </Col>\r\n        </div>\r\n    );\r\n\r\n    const BtnsPopover = (\r\n        <Popover id=\"popover-quick-replies\">\r\n          <Popover.Content style={{boxShadow: '0px 6px 10px #00000014'}}>\r\n            <Row className=\"justify-content-center\">\r\n                <Col md={12}>\r\n                    <Row>\r\n                        <Col md={12} className=\"d-flex p-0\" ><IoIosClose className=\"ml-auto mr-1\" color={'#9F9F9F'} size={'25'} style={{cursor: 'pointer'}} onClick={() => setBtnPop(false)} /></Col>\r\n                        <Col md={12} className=\"mt-2 mb-3\">\r\n                            <Form.Control id=\"liste-Btn-miracle\" as=\"select\" onChange={(e) => handleBtnType(e.target.value)} defaultValue={BtnType} style={{backgroundColor:'#E4E6EB'}}>\r\n                                <option value=\"web_url\">{trans[lang].wizardMiracleInput.url}</option>\r\n                                <option value=\"phone_number\">{trans[lang].wizardMiracleInput.call}</option>\r\n                            </Form.Control>\r\n                        </Col>\r\n                        \r\n                        <Col md={12} className=\"mt-2\">\r\n                            <Row className=\"d-flex\">\r\n                                <Col md={12}>\r\n                                    <Form.Control \r\n                                        id=\"liste-Btn-miracle\"\r\n                                        type={\"text\"} \r\n                                        onChange={(e) => handleBtnTitle(e.target.value)} \r\n                                        value={BtnTitle}  \r\n                                        placeholder={trans[lang].wizardMiracleInput.btnTitle}\r\n                                        maxLength=\"20\"\r\n                                    />\r\n                                </Col>\r\n\r\n                                <Col md={12} className=\"d-flex\">\r\n                                    <p className=\"ml-auto wizard-config-input-feedback\">{trans[lang].wizardMiracleInput.remainingChars}{20 - BtnTitle.length}</p>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n\r\n                        <Col md={12} className=\"mb-2\">\r\n                            <Form.Control \r\n                                id=\"liste-Btn-miracle\"\r\n                                type={BtnType === \"web_url\" ? \"text\" : \"number\"} \r\n                                onChange={(e) => handleBtnValue(e.target.value)} \r\n                                value={BtnValue} \r\n                                placeholder={BtnType === \"web_url\" ? trans[lang].wizardMiracleInput.urlPlaceholder : trans[lang].wizardMiracleInput.phonePlaceholder} \r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n\r\n                <Col md={11} className=\"d-flex pl-1\">\r\n                    <div className=\"wizard-pages-active-btn py-1 px-4\" onClick={() => addNewBtn()}>\r\n                        {trans[lang].wizardMiracleInput.ok}\r\n                    </div>\r\n                </Col>   \r\n            </Row>\r\n          </Popover.Content>\r\n        </Popover>\r\n    );\r\n\r\n    const BtnsUpdatePopover = () => (\r\n        <Popover id=\"popover-quick-replies\">\r\n          <Popover.Content style={{boxShadow: '0px 6px 10px #00000014'}}>\r\n            <Row className=\"justify-content-center\">\r\n                <Col md={12}>\r\n                    <Row>\r\n                    <Col md={12} className=\"d-flex p-0\" ><IoIosClose className=\"ml-auto mr-1\" color={'#9F9F9F'}   size={'25'} style={{cursor: 'pointer'}} onClick={() => setBtnUpdatePop(false)} /></Col>\r\n                        <Col md={12} className=\"mt-2 mb-3\">\r\n                            <Form.Control id=\"liste-Btn-miracle\" as=\"select\" onChange={(e) => setBtnUpdateType(e.target.value)} defaultValue={BtnUpdateType} style={{backgroundColor:'#E4E6EB'}}>\r\n                                <option value=\"web_url\">{trans[lang].wizardMiracleInput.url}</option>\r\n                                <option value=\"phone_number\">{trans[lang].wizardMiracleInput.call}</option>\r\n                            </Form.Control>\r\n                        </Col>\r\n                        \r\n                        <Col md={12} className=\"mt-2\">\r\n                            <Row className=\"d-flex\">\r\n                                <Col md={12}>\r\n                                    <Form.Control\r\n                                        id=\"liste-Btn-miracle\" \r\n                                        type={\"text\"} \r\n                                        onChange={(e) => setBtnUpdateTitle(e.target.value)} \r\n                                        value={BtnUpdateTitle}  \r\n                                        placeholder={trans[lang].wizardMiracleInput.btnTitle}\r\n                                        maxLength=\"20\" \r\n                                    />\r\n                                </Col>\r\n\r\n                                <Col md={12} className=\"d-flex\">\r\n                                    <p className=\"ml-auto wizard-config-input-feedback\">{trans[lang].wizardMiracleInput.remainingChars}{20 - BtnUpdateTitle.length}</p>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n\r\n                        <Col md={12} className=\"mb-2\">\r\n                            <Form.Control \r\n                                id=\"liste-Btn-miracle\"\r\n                                type={BtnType === \"web_url\" ? \"text\" : \"number\"} \r\n                                onChange={(e) => setBtnUpdateValue(e.target.value)} \r\n                                value={BtnUpdateValue} \r\n                                placeholder={BtnUpdateType === \"web_url\" ? trans[lang].wizardMiracleInput.urlPlaceholder : trans[lang].wizardMiracleInput.phonePlaceholder} \r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n\r\n                <Col md={11} className=\"d-flex pl-1\">\r\n                    <div className=\"wizard-pages-active-btn py-2 px-4\" onClick={() => updateBtn()}>\r\n                       {trans[lang].wizardMiracleInput.ok}\r\n                    </div>\r\n                </Col>   \r\n            </Row>\r\n                \r\n          </Popover.Content>\r\n        </Popover>\r\n    );\r\n\r\n    const popup = (message) => ( swalWithBootstrapButtons.fire({ title: `${message}`,confirmButtonText: trans[lang].wizardMiracleInput.retry }) );\r\n\r\n    // Functions :\r\n    const addNewBtn = () => {\r\n        let newBtns = [...Btns];\r\n    \r\n        if(BtnType === \"web_url\") {\r\n            let objectFb = {\r\n                type: \"web_url\",\r\n                url: BtnValue,\r\n                title: BtnTitle,\r\n                webview_height_ratio: \"tall\",\r\n            } \r\n\r\n            if(BtnTitle === \"\") {\r\n                popup(trans[lang].wizardMiracleInput.errBtnTitle);\r\n            } else if (BtnValue === \"\") {\r\n                popup(trans[lang].wizardMiracleInput.errBtnUrl);\r\n            } else {\r\n                newBtns.push(objectFb);\r\n                // update new Btns :\r\n                handleBtns(newBtns);\r\n                // reset\r\n                resetBtns();\r\n            }\r\n        } else {\r\n            let objectFb = {\r\n                type: \"phone_number\",\r\n                title: BtnTitle,\r\n                payload: BtnValue,\r\n            };\r\n\r\n            if(BtnTitle === \"\") {\r\n                popup(trans[lang].wizardMiracleInput.errBtnTitle);\r\n            } else if (BtnValue === \"\") {\r\n                popup(trans[lang].wizardMiracleInput.errBtnPhone);\r\n            } else {\r\n                newBtns.push(objectFb);\r\n                // update new Btns :\r\n                handleBtns(newBtns);\r\n                // reset\r\n                resetBtns();\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    const updateBtn = () => {\r\n        let newBtns = [...Btns];\r\n        let newType = [...BtnUpdateType].join('');\r\n        let newTitle = [...BtnUpdateTitle].join('');\r\n        let newValue = [...BtnUpdateValue].join('');\r\n\r\n        if(newType === \"web_url\") {\r\n            newBtns[BtnUpdateIndex].type = BtnUpdateType;\r\n            newBtns[BtnUpdateIndex].title = newTitle;\r\n            newBtns[BtnUpdateIndex].url = newValue;\r\n            handleBtns(newBtns);\r\n            setBtnUpdatePop(false);\r\n        } else {\r\n            newBtns[BtnUpdateIndex].type = BtnUpdateType;\r\n            newBtns[BtnUpdateIndex].title = newTitle;\r\n            newBtns[BtnUpdateIndex].payload = newValue;\r\n            handleBtns(newBtns);\r\n            setBtnUpdatePop(false);\r\n        };\r\n    };\r\n\r\n    const deleteBtn = (index) => {\r\n        let newBtns = [...Btns];\r\n        newBtns.splice(index,1);\r\n        handleBtns(newBtns);\r\n    };\r\n\r\n    const resetBtns = () => {\r\n        handleBtnType('web_url');\r\n        handleBtnTitle('');\r\n        handleBtnValue('');\r\n        setBtnPop(false);\r\n        // setBtnUpdatePop(false);\r\n    };\r\n\r\n    const handleUpdatePopover = (e,btn,indexBtn) => {\r\n        setBtnUpdatePopTarget(e.target);\r\n        setBtnPop(false);\r\n        setBtnUpdatePop(false);\r\n\r\n        if(btn.type === \"web_url\") {\r\n            setBtnUpdateType(\"web_url\");\r\n            setBtnUpdateIndex(indexBtn);\r\n            setBtnUpdateTitle(btn.title);\r\n            setBtnUpdateValue(btn.url);\r\n            setBtnUpdatePop(true);\r\n        } else {\r\n            setBtnUpdateType(\"phone_number\");\r\n            setBtnUpdateIndex(indexBtn);\r\n            setBtnUpdateTitle(btn.title);\r\n            setBtnUpdateValue(btn.payload);\r\n            setBtnUpdatePop(true);\r\n        }\r\n    };\r\n\r\n    // Set cursor to the last position\r\n    useEffect(() => {\r\n        if(props.response.length && !cursorDone) {\r\n            setCursorPos(props.response.length);\r\n            setCursorDone(true);\r\n        } \r\n        \r\n        if(props.response.length && cursorDone) {\r\n            setCursorPos(props.response.length + 1);\r\n        }\r\n    },[props.response]);\r\n\r\n\r\n    return (\r\n        <Row className=\"mx-0 px-2\">\r\n\r\n            <Col lg={12} className=\"mx-0 px-2 d-flex\">\r\n                <label className=\"wizard-config-textarea-label my-2\">{label}</label>\r\n            </Col>\r\n\r\n            <Col lg={12} className=\"px-2 mx-0\">\r\n            <div className=\"wizard-intent-miracle-box\">\r\n                {showTags && Tags()}\r\n                <Row className=\"mb-1 mx-0 pt-1 px-2\">\r\n                    <Col lg={12} />\r\n\r\n                    <Col lg={1} className=\"d-flex p-0\">\r\n                        <Image \r\n                            src={showTags ? TagInverse : Tag} \r\n                            onClick={() => handleTags(!showTags)} \r\n                            className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" \r\n                            style={{ width: '19px', cursor: 'pointer'}} \r\n                        />\r\n                    </Col>                                \r\n\r\n                    <Col lg={1} className=\"d-flex p-0\">\r\n                        {showEmojis ? \r\n                        <EmoticonInverse width={20} height={20} style={{cursor: 'pointer'}} onClick={() => handleEmojis(!showEmojis)} className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" />\r\n                        : \r\n                        <Emoticon width={20} height={20} style={{cursor: 'pointer'}} onClick={() => handleEmojis(!showEmojis)} className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" />\r\n                        }\r\n                    </Col>\r\n        \r\n                    <Col lg={1} className=\"d-flex p-0\">\r\n                        {showKeyboard ? \r\n                        <ArabicInverse width={20} height={20} style={{cursor: 'pointer'}} onClick={() => handleKeyboard(!showKeyboard)} className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" />\r\n                        : \r\n                        <Arabic width={20} height={20} style={{cursor: 'pointer'}} onClick={() => handleKeyboard(!showKeyboard)} className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" />\r\n                        }\r\n                    </Col>\r\n                \r\n                    <Col lg={8}>\r\n                        {showKeyboard &&\r\n                            <div className=\"wizard-config-keyboard-container\">\r\n                                <Keyboard \r\n                                    keyboardRef={r => {keyboard.current = r; keyboard.current.setInput(response);}}\r\n                                    onChange={(input) => handleResponse(input)}\r\n                                    onKeyPress={(key) => key === \"{enter}\" && handleKeyboard(false)}\r\n                                    layout={layout} \r\n                                />\r\n                            </div>\r\n                        }\r\n\r\n                        {showEmojis &&\r\n                            <div className=\"wizard-config-emoji-container\" >\r\n                                <OutsideClickHandler onOutsideClick={() => handleEmojis(false)}>\r\n                                    <Picker onEmojiClick={(e,obj) => { handleResponse(resp => resp.substring(0, cursorPos) + obj.emoji + resp.substring(cursorPos)); setCursorPos(cursorPos + 2) }} />\r\n                                </OutsideClickHandler>\r\n                            </div>\r\n                        } \r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                    <Col lg={12} className=\"mx-0 pt-2\">\r\n                        <textarea\r\n                            onChange={(e) => { handleResponse(e.target.value); if(keyboard.current) { keyboard.current.setInput(e.target.value); } }} \r\n                            placeholder={trans[lang].wizardMiracleInput.textAreaPlaceholder}\r\n                            onKeyPress={(e) => { setCursorPos(e.target.selectionStart + 1); changeBtnColor && changeBtnColor(true); }}\r\n                            onClick={(e) => { setCursorPos(e.target.selectionStart); }}\r\n                            value={response} \r\n                            className=\"wizard-config-textarea w-100 py-0\" \r\n                            rows=\"5\"\r\n                            maxLength=\"640\"\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row >\r\n                    <Col lg={12} className=\"my-0 py-0\">\r\n                        <hr style={{height: '2px', borderColor: '#B4B4B4', margin: '1px'}} />\r\n                    </Col>\r\n                </Row>\r\n\r\n                {platform === \"facebook\"\r\n                &&\r\n                <Row className=\"mx-0\">\r\n                    <Col lg={12}>\r\n                        <Row>\r\n                            {Btns.map((btn,indexBtn) => \r\n                                <Col key={indexBtn} lg={3} className=\"mx-1\">\r\n                                    <Row className=\"wizard-config-quick-replies-btn my-1 py-1 d-flex\">\r\n                                        {btn.type === \"web_url\" \r\n                                        ? \r\n                                        <BsLink45Deg color={'#fff'} size={15} className=\"ml-1 mr-auto my-auto\" onClick={(e) => handleUpdatePopover(e,btn,indexBtn)}/>\r\n                                        :\r\n                                        <IoIosCall color={'#fff'} size={15} className=\"ml-1 mr-auto my-auto\" onClick={(e) => handleUpdatePopover(e,btn,indexBtn) }/>\r\n                                        }\r\n                                        <p className={btn.type === \"web_url\" ? \"mr-auto my-auto\" : \"ml-1 mr-auto my-auto\" } data-for='quickReplyTip' data-tip={btn.title} onClick={(e) => {handleUpdatePopover(e,btn,indexBtn)}}>{btn.type === \"web_url\" ? \"url\" : \"call\"}</p>\r\n                                        <AiOutlineCloseCircle className=\"ml-auto my-auto mr-1\" color={\"white\"} size={\"15\"} style={{cursor: 'pointer'}} onClick={() => deleteBtn(indexBtn)} />\r\n                                    </Row>\r\n                                    <ReactTooltip id='quickReplyTip' textColor='#fff' backgroundColor='#009EE3' />\r\n                                </Col>\r\n                            )}\r\n                            {Btns.length < 3\r\n                            && \r\n                            <OverlayTrigger trigger=\"click\" placement=\"right\" show={BtnPop} overlay={BtnsPopover} >\r\n                                <Col lg={3} className=\"wizard-config-quick-replies-btn m-1 py-1 d-flex px-0\" onClick={() => {setBtnUpdatePop(false); setBtnPop(prevState => prevState ? false : true);}}>\r\n                                    <p className=\"m-auto\">{trans[lang].wizardMiracleInput.addBtn}</p>\r\n                                </Col>\r\n                            </OverlayTrigger>\r\n                            }\r\n\r\n                            <div ref={BtnUpdateRef}>\r\n                                <Overlay show={BtnUpdatePop} target={BtnUpdatePopTarget} placement=\"right\" container={BtnUpdateRef.current}>\r\n                                   {BtnsUpdatePopover()}\r\n                                </Overlay>\r\n                            </div>\r\n\r\n                        </Row>\r\n                    </Col>\r\n                </Row> \r\n                }\r\n               </div>\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}