{"ast":null,"code":"import axios from 'axios';\nimport { host } from '../../config';\nexport const deleteCategory = (category, page) => {\n  return dispatch => {\n    // console.log(\"Rak bech tfasakh l category hedhu =>\", category);\n    // console.log(\"Rak bech tfasakh l category men page hedhi =>\", page);\n    let objectToSend = {\n      id: category._id\n    };\n    return axios.put(host + `/api/v1/secure/pages/entiteremove/${page.id}`, objectToSend, {\n      headers: {\n        'authorization': 'Bearer ' + localStorage.getItem('authtoken')\n      }\n    }).then(res => {\n      console.log(\"deleteCategory response api =>\", res.data.data); // dispatch({\n      //     type: 'GET_CATEGORIES',\n      //     payload: categories\n      // });\n    }).catch(err => {\n      console.log(\"deleteCategory error api =>\", err);\n    });\n  };\n};\nexport const selectCategory = (category, history) => {\n  return dispatch => {\n    // console.log(\"Rak wassalt l category hedhu =>\", category);\n    dispatch({\n      type: 'SELECT_CATEGORIE',\n      payload: category\n    });\n    history.push('add-new-products');\n  };\n};\nexport const getCategories = page => {\n  return dispatch => {\n    return axios.get(host + `/api/v1/secure/project/get/entitiesproject/${page.platform}/${page.id}`, {\n      headers: {\n        'authorization': 'Bearer ' + localStorage.getItem('authtoken')\n      }\n    }).then(res => {\n      console.log(\"all Categories of this page => =>\", res.data.data);\n      let categories = res.data.data;\n\n      if (categories.length > 0) {\n        categories.map((cat, index) => cat.default === true && categories.splice(index, 1));\n      }\n\n      ;\n      dispatch({\n        type: 'GET_CATEGORIES',\n        payload: categories\n      });\n    }).catch(err => console.log(\"err getPageEntities\", err));\n  };\n};","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/redux/actions/myProductsActions.js"],"names":["axios","host","deleteCategory","category","page","dispatch","objectToSend","id","_id","put","headers","localStorage","getItem","then","res","console","log","data","catch","err","selectCategory","history","type","payload","push","getCategories","get","platform","categories","length","map","cat","index","default","splice"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,cAArB;AAIA,OAAO,MAAMC,cAAc,GAAG,CAACC,QAAD,EAAUC,IAAV,KAAmB;AAC7C,SAAQC,QAAD,IAAc;AACjB;AACA;AAEA,QAAIC,YAAY,GAAG;AACfC,MAAAA,EAAE,EAAEJ,QAAQ,CAACK;AADE,KAAnB;AAIA,WAAOR,KAAK,CAACS,GAAN,CAAUR,IAAI,GAAI,qCAAoCG,IAAI,CAACG,EAAG,EAA9D,EAAgED,YAAhE,EAA6E;AAChFI,MAAAA,OAAO,EAAE;AACL,yBAAiB,YAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB;AADxB;AADuE,KAA7E,EAKNC,IALM,CAKDC,GAAG,IAAI;AACTC,MAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA8CF,GAAG,CAACG,IAAJ,CAASA,IAAvD,EADS,CAGT;AACA;AACA;AACA;AACH,KAZM,EAaNC,KAbM,CAaCC,GAAD,IAAS;AACZJ,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CG,GAA3C;AACH,KAfM,CAAP;AAgBH,GAxBD;AAyBH,CA1BM;AA4BP,OAAO,MAAMC,cAAc,GAAG,CAACjB,QAAD,EAAUkB,OAAV,KAAsB;AAChD,SAAQhB,QAAD,IAAc;AACjB;AAEAA,IAAAA,QAAQ,CAAC;AACLiB,MAAAA,IAAI,EAAE,kBADD;AAELC,MAAAA,OAAO,EAAEpB;AAFJ,KAAD,CAAR;AAIAkB,IAAAA,OAAO,CAACG,IAAR,CAAa,kBAAb;AACH,GARD;AASH,CAVM;AAaP,OAAO,MAAMC,aAAa,GAAIrB,IAAD,IAAU;AACnC,SAAQC,QAAD,IAAc;AAEjB,WAAOL,KAAK,CAAC0B,GAAN,CAAUzB,IAAI,GAAI,8CAA6CG,IAAI,CAACuB,QAAS,IAAGvB,IAAI,CAACG,EAAG,EAAxF,EAA2F;AAC9FG,MAAAA,OAAO,EAAE;AACL,yBAAiB,YAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB;AADxB;AADqF,KAA3F,EAKNC,IALM,CAKDC,GAAG,IAAI;AACTC,MAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ,EAAiDF,GAAG,CAACG,IAAJ,CAASA,IAA1D;AAEA,UAAIW,UAAU,GAAGd,GAAG,CAACG,IAAJ,CAASA,IAA1B;;AAEA,UAAGW,UAAU,CAACC,MAAX,GAAoB,CAAvB,EAA0B;AACtBD,QAAAA,UAAU,CAACE,GAAX,CAAe,CAACC,GAAD,EAAKC,KAAL,KACXD,GAAG,CAACE,OAAJ,KAAgB,IAAhB,IAAwBL,UAAU,CAACM,MAAX,CAAkBF,KAAlB,EAAwB,CAAxB,CAD5B;AAGH;;AAAA;AACD3B,MAAAA,QAAQ,CAAC;AACLiB,QAAAA,IAAI,EAAE,gBADD;AAELC,QAAAA,OAAO,EAAEK;AAFJ,OAAD,CAAR;AAIH,KAnBM,EAoBNV,KApBM,CAoBCC,GAAD,IAASJ,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCG,GAAnC,CApBT,CAAP;AAqBH,GAvBD;AAwBH,CAzBM","sourcesContent":["import axios from 'axios'\r\nimport { host } from '../../config';\r\n\r\n\r\n\r\nexport const deleteCategory = (category,page) => {\r\n    return (dispatch) => {\r\n        // console.log(\"Rak bech tfasakh l category hedhu =>\", category);\r\n        // console.log(\"Rak bech tfasakh l category men page hedhi =>\", page);\r\n        \r\n        let objectToSend = {\r\n            id: category._id\r\n        };\r\n\r\n        return axios.put(host + `/api/v1/secure/pages/entiteremove/${page.id}`,objectToSend,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log(\"deleteCategory response api =>\", res.data.data);\r\n\r\n            // dispatch({\r\n            //     type: 'GET_CATEGORIES',\r\n            //     payload: categories\r\n            // });\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"deleteCategory error api =>\", err)\r\n        });\r\n    };\r\n};\r\n\r\nexport const selectCategory = (category,history) => {\r\n    return (dispatch) => {\r\n        // console.log(\"Rak wassalt l category hedhu =>\", category);\r\n        \r\n        dispatch({\r\n            type: 'SELECT_CATEGORIE',\r\n            payload: category\r\n        });\r\n        history.push('add-new-products');\r\n    };\r\n};\r\n\r\n\r\nexport const getCategories = (page) => {\r\n    return (dispatch) => {\r\n        \r\n        return axios.get(host + `/api/v1/secure/project/get/entitiesproject/${page.platform}/${page.id}`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log(\"all Categories of this page => =>\", res.data.data);\r\n\r\n            let categories = res.data.data;\r\n\r\n            if(categories.length > 0) {\r\n                categories.map((cat,index) =>\r\n                    cat.default === true && categories.splice(index,1)\r\n                );\r\n            };\r\n            dispatch({\r\n                type: 'GET_CATEGORIES',\r\n                payload: categories\r\n            })\r\n        })\r\n        .catch((err) => console.log(\"err getPageEntities\", err))\r\n    }\r\n};"]},"metadata":{},"sourceType":"module"}