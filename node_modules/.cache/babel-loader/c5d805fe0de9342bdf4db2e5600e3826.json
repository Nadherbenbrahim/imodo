{"ast":null,"code":"import _slicedToArray from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{connect}from'react-redux';import{resetSocialMediaSelections,inviteMember,deleteTeamMember,sendMailTeam,getTeamMembers}from'../../../redux/actions/socialMediaActions';import{resetَAllWizard}from'../../../redux/actions/wizardActions';import Pages from'../Pages/Pages';import{Col,Row,Modal,Spinner,Image,Form}from'react-bootstrap';// Translations\nimport{trans}from'../../../Translations';import Swal from'sweetalert2/dist/sweetalert2.js';import Lottie from'react-lottie';import{CopyToClipboard}from'react-copy-to-clipboard';import notFoundAnimationData from'../../../assets/json/not-found.json';import{FaInfoCircle}from'react-icons/fa';import{IoIosCopy}from'react-icons/io';import{ReactComponent as Zoom}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/images/home/zoom-2.svg\";import{ReactComponent as Trash}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/images/home/trash-simple.svg\";import{ReactComponent as TrashOwner}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/images/home/trash-owner.svg\";var GRAY_SEPERATOR=require('../../../assets/images/home/gray-separator.png');export var Team=function Team(props){var lang=props.lang,socialMediaPageSelected=props.socialMediaPageSelected,teamMembers=props.teamMembers,getTeamMembers=props.getTeamMembers,sendMailTeam=props.sendMailTeam,inviteMember=props.inviteMember,deleteTeamMember=props.deleteTeamMember,resetَAllWizard=props.resetَAllWizard,resetSocialMediaSelections=props.resetSocialMediaSelections;// const fbHost = \"https://graph.facebook.com/v8.0\";\n// Popup Config: \nvar swalWithBootstrapButtons=Swal.mixin({customClass:{confirmButton:'wizard-pages-active-btn py-2 px-3'},buttonsStyling:false});// Lottie config\nvar defaultOptionsNotFound={loop:true,autoplay:true,animationData:notFoundAnimationData,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPopover=_useState2[0],setShowPopover=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showInviteModal=_useState4[0],setShowInviteModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loadingInvite=_useState6[0],setLoadingInvite=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),inviteToken=_useState8[0],setInviteToken=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),emailTeamMember=_useState10[0],setEmailTeamMember=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),nameTeamMember=_useState12[0],setNameTeamMember=_useState12[1];// const [teamMembers, setTeamMembers] = useState([]);\nvar handleInviteModal=function handleInviteModal(){return setShowInviteModal(!showInviteModal);};var handlePopover=function handlePopover(delay){setTimeout(function(){setShowPopover(!showPopover);},delay);};var validateEmail=function validateEmail(mail){if(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(mail)){return true;}else{return false;}};var renderPopover=function renderPopover(){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex manage-products-popover\"},/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto\"},trans[lang].team.infoPopover));};var renderModal=function renderModal(page){return/*#__PURE__*/React.createElement(Modal,{show:showInviteModal,onHide:handleInviteModal,size:\"lg\",centered:true},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column\"},/*#__PURE__*/React.createElement(Row,{className:\"\"},/*#__PURE__*/React.createElement(Col,{lg:6},/*#__PURE__*/React.createElement(Modal.Title,{className:\"px-2 team-name py-3 ml-3\"},trans[lang].team.addMember)),/*#__PURE__*/React.createElement(Col,{lg:6,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",class:\"team-close ml-auto mr-3\",onClick:function onClick(){setShowInviteModal(false);setNameTeamMember('');setEmailTeamMember('');}},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xD7\"))),/*#__PURE__*/React.createElement(\"hr\",{style:{borderBottom:'1px solid #818E94',opacity:'0.1',padding:'0',margin:'0px auto',width:'90%'}})),/*#__PURE__*/React.createElement(Modal.Body,{className:\"py-5 px-4\"},/*#__PURE__*/React.createElement(Row,{className:\"d-flex\"},/*#__PURE__*/React.createElement(Col,{lg:12,className:\"d-flex flex-column\"},/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto team-description\"},trans[lang].team.copyInvit),/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto team-description\"},trans[lang].team.invitInfo))),/*#__PURE__*/React.createElement(Row,{className:\"d-flex my-3\"},/*#__PURE__*/React.createElement(Col,{md:1}),/*#__PURE__*/React.createElement(Col,{md:10,className:\"d-flex\"},/*#__PURE__*/React.createElement(Col,{md:11,className:\"team-token-container p-2 mx-0\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto team-token-link\"},\"\".concat(window.location.origin,\"/\").concat(inviteToken.substring(0,33),\"...\"))),/*#__PURE__*/React.createElement(Col,{md:1,className:\"d-flex p-0\"},/*#__PURE__*/React.createElement(CopyToClipboard,{text:\"\".concat(window.location.origin,\"/\").concat(inviteToken),onCopy:function onCopy(){Swal.fire({position:'top-end',icon:'success',title:trans[lang].team.copySuccess,showConfirmButton:false,timer:1500});}},/*#__PURE__*/React.createElement(\"span\",{className:\"d-flex team-copy-span mr-auto\",style:{cursor:'pointer'}},/*#__PURE__*/React.createElement(IoIosCopy,{className:\"m-auto\",size:\"22  \",color:\"#fff\"}))))),/*#__PURE__*/React.createElement(Col,{lg:1})),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center my-4\"},/*#__PURE__*/React.createElement(Col,{md:6,className:\"d-flex\"},/*#__PURE__*/React.createElement(Image,{src:GRAY_SEPERATOR,fluid:true}))),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center my-2\"},/*#__PURE__*/React.createElement(Col,{md:8,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"team-description mx-auto my-2\"},trans[lang].team.enterEmailTeam))),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center my-2\"},/*#__PURE__*/React.createElement(\"div\",{md:4,className:\"d-flex\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",className:\"ml-auto mr-3 my-auto team-token-link\",value:nameTeamMember,disabled:true})),/*#__PURE__*/React.createElement(\"div\",{md:4,className:\"d-flex\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",className:\"ml-auto mr-3 my-auto team-token-link\",value:emailTeamMember,onChange:function onChange(e){return setEmailTeamMember(e.target.value);},placeholder:trans[lang].team.emailPlaceholder})),/*#__PURE__*/React.createElement(\"div\",{md:3,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"team-button-send mr-3 text-center mr-auto my-auto\",onClick:function onClick(){if(validateEmail(emailTeamMember)&&nameTeamMember.length>0){sendMailTeam(socialMediaPageSelected,emailTeamMember,nameTeamMember,inviteToken).then(function(){setShowInviteModal(false);setNameTeamMember('');setEmailTeamMember('');}).catch(function(err){return console.log(\"Err modal send invitation Team\",err);});}else{swalWithBootstrapButtons.fire({title:trans[lang].team.invalidEmail,confirmButtonText:trans[lang].team.retry});}}},trans[lang].team.sendInvit))))));};useEffect(function(){resetَAllWizard();},[]);useEffect(function(){if(socialMediaPageSelected){getTeamMembers(socialMediaPageSelected);};},[socialMediaPageSelected]);return/*#__PURE__*/React.createElement(\"div\",{style:{height:window.innerHeight*1.2,marginTop:'135px'}},renderModal(socialMediaPageSelected),/*#__PURE__*/React.createElement(Row,{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"p\",{className:\"home-big-title\"},trans[lang].team.title),/*#__PURE__*/React.createElement(FaInfoCircle,{style:{transitionDuration:'600ms'},color:!showPopover?\"#4080FF\":\"#E5007D\",size:'15',onMouseEnter:function onMouseEnter(){return handlePopover('20');},onMouseLeave:function onMouseLeave(){return handlePopover('300');}}),showPopover&&renderPopover()),/*#__PURE__*/React.createElement(Pages,{title:trans[lang].team.smallTitle,titleStyling:{color:'#4D4F5C',fontSize:'16px',fontFamily:'Poppins Medium'}}),socialMediaPageSelected&&/*#__PURE__*/React.createElement(React.Fragment,null,socialMediaPageSelected.status!==\"listPageConnectedOtherTeam\"?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Row,{className:\"mr-0 d-flex flex-column\"},socialMediaPageSelected.status===\"listPageConnectedOwner\"&&/*#__PURE__*/React.createElement(Row,{className:\"mb-3\"},/*#__PURE__*/React.createElement(Col,{lg:12,className:\"d-flex\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",className:\"mr-3 my-auto team-token-link\",value:nameTeamMember,onChange:function onChange(e){return setNameTeamMember(e.target.value);},placeholder:trans[lang].team.memberName}),/*#__PURE__*/React.createElement(\"div\",{className:nameTeamMember.length>=3?\"team-invite-btn mr-auto d-flex\":\"team-invite-btn-gris mr-auto d-flex\",onClick:function onClick(){if(nameTeamMember.length<3){swalWithBootstrapButtons.fire({title:trans[lang].team.validName,confirmButtonText:trans[lang].team.retry});}else{setLoadingInvite(true);inviteMember(socialMediaPageSelected,nameTeamMember).then(function(res){if(res.data.data===false){setLoadingInvite(false);swalWithBootstrapButtons.fire({title:trans[lang].team.errorOffer,confirmButtonText:trans[lang].team.retry});}else{setInviteToken(res.data.data.tokenPage);getTeamMembers(socialMediaPageSelected);setTimeout(function(){setLoadingInvite(false);setShowInviteModal(true);},1000);}}).catch(function(){setLoadingInvite(false);swalWithBootstrapButtons.fire({title:trans[lang].team.errorGenerating,confirmButtonText:trans[lang].team.retry});});}}},loadingInvite?/*#__PURE__*/React.createElement(React.Fragment,null,trans[lang].team.generatingToken,\" \",/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",size:\"sm\",variant:\"primary\",className:\"spinnerWhite my-auto ml-2\"})):/*#__PURE__*/React.createElement(React.Fragment,null,trans[lang].team.inviteMember)))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:5,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"ml-3 mr-auto my-auto team-members-titre\"},trans[lang].team.teamMembers)),/*#__PURE__*/React.createElement(Col,{lg:5,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"ml-auto my-auto recherche-team py-2\"}),/*#__PURE__*/React.createElement(Zoom,{className:\"zoom-icon\",color:\"\",width:\"16\",height:\"16\"}))),/*#__PURE__*/React.createElement(Col,{lg:10,className:\"p-3\",style:{backgroundColor:socialMediaPageSelected.team.length?'white':'transparent',borderRadius:'0.3rem'}},teamMembers&&teamMembers.length?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:4,className:\"d-flex pt-3 pb-3\"},/*#__PURE__*/React.createElement(\"p\",{className:\"ml-4 mr-auto my-auto manage-products-table-title\"},trans[lang].team.name)),/*#__PURE__*/React.createElement(Col,{lg:4,className:\"d-flex pt-3 pb-3\"},/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto manage-products-table-title\"},trans[lang].team.role)),/*#__PURE__*/React.createElement(Col,{lg:4,className:\"d-flex pt-3 pb-3\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mr-4 ml-auto my-auto manage-products-table-title\"},trans[lang].team.actions)),/*#__PURE__*/React.createElement(\"hr\",{style:{borderColor:'#EBEDF0',opacity:'1',padding:'0',margin:'auto',width:'94%'}})),teamMembers.map(function(member){return/*#__PURE__*/React.createElement(Row,{key:member.idFacebook+Math.random()},/*#__PURE__*/React.createElement(Col,{lg:4,className:\"d-flex pt-3 pb-3\"},/*#__PURE__*/React.createElement(\"p\",{className:\"ml-4 my-auto manage-product-entity-name\"},member.name)),/*#__PURE__*/React.createElement(Col,{lg:4,className:\"d-flex pt-3 pb-3\"},/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto manage-product-entity-name\",style:{color:member.role==='pending'&&'#E5007D',textTransform:'uppercase'}},member.role)),/*#__PURE__*/React.createElement(Col,{lg:4,className:\"d-flex pt-3 pb-3\"},socialMediaPageSelected.status===\"listPageConnectedOwner\"&&/*#__PURE__*/React.createElement(\"div\",{className:\"ml-auto \",style:{marginRight:'40px'}},member.role===\"owner\"?/*#__PURE__*/React.createElement(TrashOwner,{width:\"20\",height:\"20\",onClick:function onClick(){return swalWithBootstrapButtons.fire({title:trans[lang].team.cannotDeleteOwner,confirmButtonText:trans[lang].team.ok});}}):/*#__PURE__*/React.createElement(Trash,{width:\"20\",height:\"20\",style:{cursor:'pointer'},onClick:function onClick(){deleteTeamMember(socialMediaPageSelected,member.idFacebook,member.role).catch(function(){swalWithBootstrapButtons.fire({title:trans[lang].team.errorDeleteMember,confirmButtonText:trans[lang].team.retry});});}}))),/*#__PURE__*/React.createElement(\"hr\",{style:{borderColor:'#EBEDF0',opacity:'1',padding:'0',margin:'auto',width:'94%'}}));})):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Col,{lg:12,className:\"d-flex\",style:{backgroundColor:'#F9F9F9'}},/*#__PURE__*/React.createElement(Lottie,{options:defaultOptionsNotFound,width:200,className:\"m-auto\"})),/*#__PURE__*/React.createElement(Col,{lg:12,className:\"d-flex mt-5\",style:{backgroundColor:'#F9F9F9'}},/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto home-big-title\"},trans[lang].team.noMembers)))),/*#__PURE__*/React.createElement(Col,{lg:2}))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Col,{lg:12,className:\"d-flex\",style:{backgroundColor:'#F9F9F9'}},/*#__PURE__*/React.createElement(Lottie,{options:defaultOptionsNotFound,width:200,className:\"m-auto\"})),/*#__PURE__*/React.createElement(Col,{lg:12,className:\"d-flex mt-5\",style:{backgroundColor:'#F9F9F9'}},/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto home-big-title\"},trans[lang].team.cannotSee)))));};var mapStateToProps=function mapStateToProps(state){return{lang:state.socialMediaR.lang,socialMediaPageSelected:state.socialMediaR.socialMediaPageSelected,teamMembers:state.socialMediaR.teamMembers};};export default connect(mapStateToProps,{resetSocialMediaSelections:resetSocialMediaSelections,inviteMember:inviteMember,deleteTeamMember:deleteTeamMember,sendMailTeam:sendMailTeam,getTeamMembers:getTeamMembers,resetَAllWizard:resetَAllWizard})(Team);","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/app/Home/Team/Team.js"],"names":["React","useEffect","useState","connect","resetSocialMediaSelections","inviteMember","deleteTeamMember","sendMailTeam","getTeamMembers","resetَAllWizard","Pages","Col","Row","Modal","Spinner","Image","Form","trans","Swal","Lottie","CopyToClipboard","notFoundAnimationData","FaInfoCircle","IoIosCopy","GRAY_SEPERATOR","require","Team","props","lang","socialMediaPageSelected","teamMembers","swalWithBootstrapButtons","mixin","customClass","confirmButton","buttonsStyling","defaultOptionsNotFound","loop","autoplay","animationData","rendererSettings","preserveAspectRatio","showPopover","setShowPopover","showInviteModal","setShowInviteModal","loadingInvite","setLoadingInvite","inviteToken","setInviteToken","emailTeamMember","setEmailTeamMember","nameTeamMember","setNameTeamMember","handleInviteModal","handlePopover","delay","setTimeout","validateEmail","mail","test","renderPopover","team","infoPopover","renderModal","page","addMember","borderBottom","opacity","padding","margin","width","copyInvit","invitInfo","window","location","origin","substring","fire","position","icon","title","copySuccess","showConfirmButton","timer","cursor","enterEmailTeam","e","target","value","emailPlaceholder","length","then","catch","err","console","log","invalidEmail","confirmButtonText","retry","sendInvit","height","innerHeight","marginTop","transitionDuration","smallTitle","color","fontSize","fontFamily","status","memberName","validName","res","data","errorOffer","tokenPage","errorGenerating","generatingToken","backgroundColor","borderRadius","name","role","actions","borderColor","map","member","idFacebook","Math","random","textTransform","marginRight","cannotDeleteOwner","ok","errorDeleteMember","noMembers","cannotSee","mapStateToProps","state","socialMediaR"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { resetSocialMediaSelections, inviteMember, deleteTeamMember, sendMailTeam, getTeamMembers } from '../../../redux/actions/socialMediaActions';\r\nimport { resetَAllWizard, } from '../../../redux/actions/wizardActions';\r\n\r\nimport Pages from '../Pages/Pages';\r\n\r\nimport {\r\n    Col,\r\n    Row,\r\n    Modal,\r\n    Spinner,\r\n    Image,\r\n    Form,\r\n} from 'react-bootstrap';\r\n\r\n// Translations\r\nimport { trans } from '../../../Translations';\r\n\r\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\r\nimport Lottie from 'react-lottie';\r\n\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\r\n\r\nimport notFoundAnimationData from '../../../assets/json/not-found.json';\r\nimport { FaInfoCircle } from 'react-icons/fa';\r\nimport { IoIosCopy } from 'react-icons/io';\r\nimport {ReactComponent as Zoom} from '../../../assets/images/home/zoom-2.svg';\r\nimport {ReactComponent as Trash} from '../../../assets/images/home/trash-simple.svg';\r\nimport {ReactComponent as TrashOwner} from '../../../assets/images/home/trash-owner.svg';\r\n\r\nconst GRAY_SEPERATOR = require('../../../assets/images/home/gray-separator.png');\r\n\r\nexport const Team = (props) => {\r\n\r\n    let {\r\n        lang,\r\n        socialMediaPageSelected,\r\n        teamMembers,\r\n        \r\n        // Funtions:\r\n        getTeamMembers,\r\n        sendMailTeam,\r\n        inviteMember,\r\n        deleteTeamMember,\r\n        resetَAllWizard,\r\n        resetSocialMediaSelections,\r\n    } = props;\r\n\r\n    // const fbHost = \"https://graph.facebook.com/v8.0\";\r\n\r\n    // Popup Config: \r\n    const swalWithBootstrapButtons = Swal.mixin({\r\n        customClass: {\r\n        confirmButton: 'wizard-pages-active-btn py-2 px-3',\r\n        },\r\n        buttonsStyling: false\r\n    });\r\n\r\n    // Lottie config\r\n    const defaultOptionsNotFound = {\r\n        loop: true,\r\n        autoplay: true, \r\n        animationData: notFoundAnimationData,\r\n        rendererSettings: {\r\n          preserveAspectRatio: 'xMidYMid slice'\r\n        }\r\n    };\r\n   \r\n    const [showPopover, setShowPopover] = useState(false);\r\n    const [showInviteModal, setShowInviteModal] = useState(false);\r\n    const [loadingInvite, setLoadingInvite] = useState(false);\r\n    const [inviteToken, setInviteToken] = useState('');\r\n    const [emailTeamMember,setEmailTeamMember] = useState(''); \r\n    const [nameTeamMember,setNameTeamMember] = useState(''); \r\n    // const [teamMembers, setTeamMembers] = useState([]);\r\n\r\n    const handleInviteModal = () => setShowInviteModal(!showInviteModal);\r\n\r\n    const handlePopover = (delay) => {\r\n        setTimeout( () => {\r\n            setShowPopover(!showPopover);\r\n        },delay);\r\n    };\r\n\r\n    const validateEmail = (mail) => {\r\n        if (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(mail)) {\r\n            return (true);\r\n        } else {\r\n            return (false);\r\n        }\r\n    };\r\n    \r\n    const renderPopover = () => (\r\n        <div className=\"d-flex manage-products-popover\" >\r\n            <p className=\"m-auto\">\r\n                {trans[lang].team.infoPopover}\r\n                {/* <br/> */}\r\n                {/* <a href=\"\">learn more</a> */}\r\n            </p>\r\n        </div>\r\n    );\r\n\r\n    const renderModal = (page) => (\r\n        <Modal show={showInviteModal} onHide={handleInviteModal} size=\"lg\" centered>\r\n            <div className=\"d-flex flex-column\">\r\n                <Row className=\"\">\r\n                    <Col lg={6}><Modal.Title className=\"px-2 team-name py-3 ml-3\">{trans[lang].team.addMember}</Modal.Title></Col>\r\n                    <Col lg={6} className=\"d-flex\"><button  type=\"button\" class=\"team-close ml-auto mr-3\" onClick={() => { setShowInviteModal(false); setNameTeamMember(''); setEmailTeamMember(''); }} ><span aria-hidden=\"true\">×</span></button></Col>\r\n                    <hr  style={{borderBottom: '1px solid #818E94', opacity: '0.1',padding: '0',margin: '0px auto',width:'90%'}} />\r\n                </Row>\r\n                \r\n                <Modal.Body className=\"py-5 px-4\" >\r\n                    <Row className=\"d-flex\">\r\n                        <Col lg={12} className=\"d-flex flex-column\">\r\n                            <p className=\"m-auto team-description\">{trans[lang].team.copyInvit}</p>\r\n                            <p className=\"m-auto team-description\">{trans[lang].team.invitInfo}</p>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <Row className=\"d-flex my-3\">\r\n                        <Col md={1}/>\r\n                        \r\n                        <Col md={10} className=\"d-flex\">\r\n                            <Col md={11} className=\"team-token-container p-2 mx-0\">\r\n                                <p className=\"my-auto team-token-link\">{`${window.location.origin}/${inviteToken.substring(0,33)}...`}</p>\r\n                            </Col>\r\n                            <Col md={1} className=\"d-flex p-0\">\r\n                                <CopyToClipboard \r\n                                    text={`${window.location.origin}/${inviteToken}`}\r\n                                    onCopy={() => {\r\n                                        Swal.fire({\r\n                                            position: 'top-end',\r\n                                            icon: 'success',\r\n                                            title: trans[lang].team.copySuccess,\r\n                                            showConfirmButton: false,\r\n                                            timer: 1500\r\n                                        })\r\n                                    }}\r\n                                >\r\n                                    <span className=\"d-flex team-copy-span mr-auto\" style={{ cursor: 'pointer' }}>\r\n                                        <IoIosCopy className=\"m-auto\" size={\"22  \"} color={\"#fff\"} />\r\n                                    </span>\r\n                                </CopyToClipboard>\r\n                            </Col>\r\n                        </Col>\r\n\r\n                        <Col lg={1} />\r\n                    </Row>\r\n\r\n                    <Row className=\"justify-content-center my-4\">\r\n                        <Col md={6} className=\"d-flex\">\r\n                            <Image src={GRAY_SEPERATOR} fluid />\r\n                        </Col>\r\n                    </Row>\r\n                    \r\n                    <Row className=\"justify-content-center my-2\">\r\n                        <Col md={8} className=\"d-flex\">\r\n                            <p className=\"team-description mx-auto my-2\">{trans[lang].team.enterEmailTeam}</p>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <Row className=\"justify-content-center my-2\">\r\n                        <div md={4} className=\"d-flex\">\r\n                            <Form.Control type={\"text\"} className=\"ml-auto mr-3 my-auto team-token-link\" value={nameTeamMember} disabled={true} />\r\n                        </div>\r\n\r\n                        <div md={4} className=\"d-flex\">\r\n                            <Form.Control type={\"text\"} className=\"ml-auto mr-3 my-auto team-token-link\" value={emailTeamMember} onChange={(e) => setEmailTeamMember(e.target.value) } placeholder={trans[lang].team.emailPlaceholder} />\r\n                        </div>\r\n\r\n                        <div md={3} className=\"d-flex\">\r\n                            <div \r\n                                className={\"team-button-send mr-3 text-center mr-auto my-auto\"} \r\n                                onClick={() => {\r\n                                    if(validateEmail(emailTeamMember) && nameTeamMember.length > 0 ) {\r\n                                        sendMailTeam(socialMediaPageSelected, emailTeamMember, nameTeamMember, inviteToken)\r\n                                        .then(() => {\r\n                                            setShowInviteModal(false);\r\n                                            setNameTeamMember('');\r\n                                            setEmailTeamMember('');\r\n                                        })\r\n                                        .catch((err) => console.log(\"Err modal send invitation Team\", err))\r\n                                    } else {\r\n                                        swalWithBootstrapButtons.fire({\r\n                                            title: trans[lang].team.invalidEmail,\r\n                                            confirmButtonText: trans[lang].team.retry,\r\n                                        });\r\n                                    }\r\n                                }} \r\n                            >\r\n                            {trans[lang].team.sendInvit}\r\n                            </div>\r\n                        </div>\r\n                    </Row>\r\n                </Modal.Body>\r\n            </div>\r\n        </Modal>\r\n    );\r\n\r\n    useEffect(() => {\r\n        resetَAllWizard();\r\n    },[]);\r\n\r\n    useEffect(() => {\r\n        if(socialMediaPageSelected) {\r\n            getTeamMembers(socialMediaPageSelected);\r\n        };\r\n    },[socialMediaPageSelected]);\r\n\r\n    return (\r\n        <div style={{height: window.innerHeight * 1.2 , marginTop: '135px'}}>\r\n\r\n            {renderModal(socialMediaPageSelected)}\r\n\r\n            <Row className=\"mt-5\">\r\n                <p className=\"home-big-title\" >{trans[lang].team.title}</p>\r\n                <FaInfoCircle style={{transitionDuration: '600ms' }} color={!showPopover ? \"#4080FF\" : \"#E5007D\"} size={'15'} onMouseEnter={() => handlePopover('20')} onMouseLeave={() => handlePopover('300')} />\r\n                { showPopover && renderPopover() }\r\n            </Row>\r\n\r\n            <Pages title={trans[lang].team.smallTitle} titleStyling={{color: '#4D4F5C', fontSize: '16px', fontFamily: 'Poppins Medium' }} />\r\n\r\n            {socialMediaPageSelected\r\n            &&\r\n            <>\r\n            {socialMediaPageSelected.status !== \"listPageConnectedOtherTeam\"\r\n            ?\r\n            <div>\r\n                <Row className=\"mr-0 d-flex flex-column\">                \r\n                    {socialMediaPageSelected.status === \"listPageConnectedOwner\"\r\n                    &&\r\n                    <Row className=\"mb-3\"> \r\n                        <Col lg={12} className=\"d-flex\">\r\n                            <Form.Control type={\"text\"} className=\"mr-3 my-auto team-token-link\" value={nameTeamMember} onChange={(e) => setNameTeamMember(e.target.value) } placeholder={trans[lang].team.memberName} />\r\n                            <div \r\n                                className={nameTeamMember.length >= 3 ? \"team-invite-btn mr-auto d-flex\" : \"team-invite-btn-gris mr-auto d-flex\"}\r\n                                onClick={() => {\r\n                                    if(nameTeamMember.length < 3) {\r\n                                        swalWithBootstrapButtons.fire({\r\n                                            title: trans[lang].team.validName,\r\n                                            confirmButtonText: trans[lang].team.retry,\r\n                                        });\r\n                                    } else {\r\n                                        setLoadingInvite(true);\r\n                                        inviteMember(socialMediaPageSelected,nameTeamMember)\r\n                                        .then((res) => {\r\n                                            if(res.data.data === false) {\r\n                                                setLoadingInvite(false);\r\n                                                swalWithBootstrapButtons.fire({\r\n                                                    title: trans[lang].team.errorOffer,\r\n                                                    confirmButtonText: trans[lang].team.retry,\r\n                                                });\r\n                                            } else {\r\n                                                setInviteToken(res.data.data.tokenPage);\r\n                                                getTeamMembers(socialMediaPageSelected);\r\n                                                setTimeout(() => {\r\n                                                    setLoadingInvite(false);\r\n                                                    setShowInviteModal(true);\r\n                                                },1000);\r\n                                            }\r\n                                        })\r\n                                        .catch(() => {\r\n                                            setLoadingInvite(false);\r\n                                            swalWithBootstrapButtons.fire({\r\n                                                title: trans[lang].team.errorGenerating,\r\n                                                confirmButtonText: trans[lang].team.retry,\r\n                                            });\r\n                                        });    \r\n                                    }\r\n                                }}\r\n                            >\r\n                                {loadingInvite \r\n                                ?\r\n                                (<>{trans[lang].team.generatingToken} <Spinner animation=\"border\" size=\"sm\" variant=\"primary\" className=\"spinnerWhite my-auto ml-2\" /></>)\r\n                                :\r\n                                <>{trans[lang].team.inviteMember}</>\r\n                                }\r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n                    }\r\n                    <Row>\r\n                        <Col lg={5} className=\"d-flex\">\r\n                            <p className=\"ml-3 mr-auto my-auto team-members-titre\" >{trans[lang].team.teamMembers}</p>\r\n                        </Col>\r\n                        <Col lg={5} className=\"d-flex\">\r\n                            <input type=\"text\" className=\"ml-auto my-auto recherche-team py-2\" />\r\n                            <Zoom className={\"zoom-icon\"} color={\"\"}  width=\"16\" height=\"16\" />\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <Col lg={10} className=\"p-3\" style={{backgroundColor: socialMediaPageSelected.team.length ? 'white' : 'transparent', borderRadius: '0.3rem'}}>\r\n                        {teamMembers && teamMembers.length\r\n                        ?\r\n                        <>\r\n                        <Row>\r\n                            <Col lg={4} className=\"d-flex pt-3 pb-3\" >\r\n                                <p className=\"ml-4 mr-auto my-auto manage-products-table-title\">{trans[lang].team.name}</p>\r\n                            </Col>\r\n                            \r\n                            <Col lg={4} className=\"d-flex pt-3 pb-3\">\r\n                                <p className=\"m-auto manage-products-table-title\">{trans[lang].team.role}</p>\r\n                            </Col>\r\n\r\n                            <Col lg={4} className=\"d-flex pt-3 pb-3\">\r\n                                <p className=\"mr-4 ml-auto my-auto manage-products-table-title\">{trans[lang].team.actions}</p>\r\n                            </Col>\r\n                            <hr style={{borderColor: '#EBEDF0', opacity: '1',padding: '0',margin: 'auto',width: '94%'}} />\r\n                        </Row>\r\n\r\n                        {teamMembers.map((member) =>     \r\n                        <Row key={member.idFacebook + Math.random()}>\r\n                            <Col lg={4} className=\"d-flex pt-3 pb-3\">\r\n                                <p className=\"ml-4 my-auto manage-product-entity-name\">{member.name}</p>\r\n                            </Col>\r\n                            \r\n                            <Col lg={4} className=\"d-flex pt-3 pb-3\">\r\n                                <p className=\"m-auto manage-product-entity-name\" style={{color : member.role === 'pending'  && '#E5007D', textTransform: 'uppercase' }}>{member.role}</p>\r\n                            </Col>\r\n\r\n                            <Col lg={4} className=\"d-flex pt-3 pb-3\">\r\n                                {\r\n                                socialMediaPageSelected.status === \"listPageConnectedOwner\"\r\n                                &&\r\n                                <div className=\"ml-auto \" style={{marginRight: '40px'}}>\r\n                                    {member.role === \"owner\"\r\n                                    ?\r\n                                    <TrashOwner width=\"20\" height=\"20\" onClick={() => swalWithBootstrapButtons.fire({ title: trans[lang].team.cannotDeleteOwner ,confirmButtonText: trans[lang].team.ok, }) }/>\r\n                                    :\r\n                                    <Trash \r\n                                        width=\"20\" \r\n                                        height=\"20\"\r\n                                        style={{cursor: 'pointer'}} \r\n                                        onClick={() => {\r\n                                            deleteTeamMember(socialMediaPageSelected, member.idFacebook, member.role)\r\n                                            .catch(() => {\r\n                                                swalWithBootstrapButtons.fire({\r\n                                                    title: trans[lang].team.errorDeleteMember,\r\n                                                    confirmButtonText: trans[lang].team.retry,\r\n                                                });\r\n                                            })\r\n                                        }} \r\n                                    />\r\n                                    }\r\n                                </div>\r\n                                }\r\n                            </Col>\r\n                            <hr  style={{borderColor: '#EBEDF0', opacity: '1',padding: '0',margin: 'auto',width: '94%'}} />\r\n                        </Row>\r\n                        )}\r\n                        </>\r\n                        :\r\n                        <>\r\n                        <Col lg={12} className=\"d-flex\" style={{backgroundColor: '#F9F9F9' }}>\r\n                            <Lottie options={defaultOptionsNotFound} width={200} className=\"m-auto\" />\r\n                        </Col>\r\n\r\n                        <Col lg={12} className=\"d-flex mt-5\" style={{backgroundColor: '#F9F9F9' }}>\r\n                            <p className=\"m-auto home-big-title\">{trans[lang].team.noMembers}</p>\r\n                        </Col>\r\n                        </>\r\n                        }\r\n                    </Col>\r\n                            \r\n                    <Col lg={2} />\r\n                </Row>\r\n            </div>\r\n            :\r\n            <>\r\n            <Col lg={12} className=\"d-flex\" style={{backgroundColor: '#F9F9F9' }}>\r\n                <Lottie options={defaultOptionsNotFound} width={200} className=\"m-auto\" />\r\n            </Col>\r\n\r\n            <Col lg={12} className=\"d-flex mt-5\" style={{backgroundColor: '#F9F9F9' }}>\r\n                <p className=\"m-auto home-big-title\">{trans[lang].team.cannotSee}</p>\r\n            </Col>\r\n            </>\r\n            }\r\n            </> \r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    lang: state.socialMediaR.lang,\r\n    socialMediaPageSelected: state.socialMediaR.socialMediaPageSelected,\r\n    teamMembers: state.socialMediaR.teamMembers,\r\n})\r\n\r\nexport default connect(mapStateToProps, { resetSocialMediaSelections,inviteMember, deleteTeamMember, sendMailTeam, getTeamMembers, resetَAllWizard })(Team)\r\n"]},"metadata":{},"sourceType":"module"}