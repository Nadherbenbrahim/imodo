{"ast":null,"code":"var _jsxFileName = \"/usr/work/smart_front_oussema/src/app/Home/AutoWizard/WizardTest.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { host } from '../../../config';\nimport { connect } from 'react-redux';\nimport { nextSpecificWizardStep, testAgent, resetStep4ReceivedMsg, getExistingProject } from '../../../redux/actions/wizardActions';\nimport { Row, Col, Image, Spinner, Popover } from 'react-bootstrap';\nimport { withRouter } from 'react-router-dom'; // Translations\n\nimport { trans } from '../../../Translations';\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\nimport Keyboard from 'react-simple-keyboard';\nimport layout from \"simple-keyboard-layouts/build/layouts/arabic\";\nimport ReactTooltip from 'react-tooltip';\n\nconst Arabic = require('../../../assets/images/home/Arabic.svg');\n\nconst Arabic_Active = require('../../../assets/images/home/arabic01.svg');\n\nconst LETTER_ICON = require('../../../assets/images/home/3a.png');\n\nconst IMODO_PROFILE_ICON = require('../../../assets/images/home/full-bulle-imodo.png');\n\nexport const WizardTest = props => {\n  let {\n    lang,\n    wizardIntentType,\n    wizardSelectedPage,\n    wizardSelectedPost,\n    wizardReceivedMsg,\n    wizardIdProject,\n    wizardExistingProject,\n    history,\n    resetStep4ReceivedMsg,\n    nextSpecificWizardStep,\n    getExistingProject\n  } = props; // Popup Config:\n\n  const swalWithBootstrapButtons = Swal.mixin({\n    customClass: {\n      confirmButton: 'wizard-pages-active-btn-alert'\n    },\n    buttonsStyling: false\n  });\n  const keyboard = useRef(null);\n  const [message, setMessage] = useState('');\n  const [sendedMsg, setSendedMsg] = useState(null);\n  const [btnLoading, setBtnLoading] = useState(null);\n  const [wizardFinish, setWizardFinish] = useState(null);\n  const [showKeyboard, setShowKeyboard] = useState(false);\n  const [cursorPos, setCursorPos] = useState(0);\n  const [activateAgent, setActivateAgent] = useState(null); // Tags:\n  // const [Tags,setTags] = useState(false);\n\n  const TagsPopover = /*#__PURE__*/React.createElement(Popover, {\n    id: \"popover-tags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Popover.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"pl-1 my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    className: \"d-flex mb-1 mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto mr-auto wizard-config-tag\",\n    onClick: () => {\n      setMessage(prevMsg => prevMsg + '##FIRST_NAME##');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 29\n    }\n  }, trans[lang].wizardMiracleInput.firstName)), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    className: \"d-flex mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto mr-auto wizard-config-tag\",\n    onClick: () => {\n      setMessage(prevMsg => prevMsg + '##LAST_NAME##');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 29\n    }\n  }, trans[lang].wizardMiracleInput.lastName)), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    className: \"d-flex mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto mr-auto wizard-config-tag\",\n    onClick: () => {\n      setMessage(prevMsg => prevMsg + '##FULL_NAME##');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }, trans[lang].wizardMiracleInput.fullName)), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    className: \"m-auto d-flex mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto mr-auto wizard-config-tag\",\n    onClick: () => {\n      setMessage(prevMsg => prevMsg + '##PAGE_NAME##');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }, trans[lang].wizardMiracleInput.pageName)))))));\n\n  const chat = () => {\n    props.testAgent(message, wizardIntentType, wizardSelectedPage, wizardSelectedPost).then(() => {\n      setSendedMsg(message);\n      setMessage('');\n    }).catch(err => {\n      console.log(\"Getting test message wizard\", err);\n      swalWithBootstrapButtons.fire({\n        title: trans[lang].wizardTest.errGetMsg,\n        confirmButtonText: trans[lang].wizardTest.retry\n      });\n    });\n  };\n\n  const showTheFinish = () => {\n    setBtnLoading(true);\n    setTimeout(() => {\n      setWizardFinish(true);\n      setBtnLoading(null);\n    }, 1500);\n  };\n\n  const activateAgentNow = status => {\n    if (status === 'live') {\n      let objectToSend = {\n        live: true\n      };\n      axios.put(host + `/api/v1/secure/project/agent/live/${wizardIdProject}`, objectToSend, {\n        headers: {\n          'authorization': 'Bearer ' + localStorage.getItem('authtoken')\n        }\n      }).then(res => {\n        console.log('agent Live post APi Response =>', res.data.data); // history.push('/home/my-agents');\n\n        history.push({\n          pathname: '/home/my-agents',\n          state: {\n            imFrom: 'Wizard',\n            page: wizardSelectedPage\n          }\n        });\n      }).catch(err => {\n        console.log(\"agent Live post Api error  =>\", err);\n        swalWithBootstrapButtons.fire({\n          title: trans[lang].wizardTest.errActivAgent,\n          confirmButtonText: trans[lang].wizardTest.retry\n        });\n      });\n    } else {\n      let objectToSend = {\n        live: false\n      };\n      axios.put(host + `/api/v1/secure/project/agent/live/${wizardIdProject}`, objectToSend, {\n        headers: {\n          'authorization': 'Bearer ' + localStorage.getItem('authtoken')\n        }\n      }).then(res => {\n        console.log('agent Later post APi Response =>', res.data.data); // history.push('/home/my-agents');\n\n        history.push({\n          pathname: '/home/my-agents',\n          state: {\n            imFrom: 'Wizard',\n            page: wizardSelectedPage\n          }\n        });\n      }).catch(err => {\n        console.log(\"agent Later post Api error  =>\", err);\n        swalWithBootstrapButtons.fire({\n          title: trans[lang].wizardTest.errActivAgent,\n          confirmButtonText: trans[lang].wizardTest.retry\n        });\n      });\n    }\n  };\n\n  const backToStep3 = () => {\n    // Reset Msg received & Go:\n    resetStep4ReceivedMsg();\n    nextSpecificWizardStep(2);\n  };\n\n  const handleCursorPosition = e => {\n    // console.log(\"Code\", e.keyCode, \"cursor in\", e.target.selectionStart);\n    setCursorPos(e.target.selectionStart - 1);\n  };\n\n  const isProjectActive = project => {\n    if (project.trained && project.live) {\n      return true; // Status === Active\n      // Put your set State ya haider\n    } else if (project.trained && !project.live) {\n      return false; // Status === Not Active\n      // Put your set State ya haider\n    } else {\n        return false; // Status === DRAFT\n        // Put your set State ya haider\n      }\n  };\n\n  useEffect(() => {\n    resetStep4ReceivedMsg();\n\n    if (wizardIdProject) {\n      getExistingProject(wizardIdProject);\n    }\n\n    ;\n\n    if (wizardExistingProject) {\n      setActivateAgent(isProjectActive(wizardExistingProject));\n    }\n\n    ;\n  }, []);\n  return /*#__PURE__*/React.createElement(Row, {\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Col, {\n    lg: 9,\n    className: \"wizard-pages-container mb-3\",\n    style: {\n      backgroundColor: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"d-flex mt-4 ml-2 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto wizard-pages-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 21\n    }\n  }, trans[lang].wizardTest.testInteractionTitle)), /*#__PURE__*/React.createElement(Row, {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 9,\n    className: \"mx-auto\",\n    style: {\n      backgroundColor: 'white',\n      borderRadius: '0.2rem',\n      border: '1px solid #B4B4B4',\n      height: wizardReceivedMsg && wizardReceivedMsg.length > 1 ? \"auto\" : '300px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 21\n    }\n  }, sendedMsg === null && /*#__PURE__*/React.createElement(Row, {\n    className: \"d-flex\",\n    style: {\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"m-auto wizard-posts-status-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 33\n    }\n  }, trans[lang].wizardTest.testInteraction))), sendedMsg !== null && /*#__PURE__*/React.createElement(Row, {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"my-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-agents-msgs-bulle mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-agents-msgs-bulle-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 45\n    }\n  }, sendedMsg))))), /*#__PURE__*/React.createElement(Col, {\n    lg: 7,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 29\n    }\n  })), wizardReceivedMsg && wizardReceivedMsg.length > 0 && wizardReceivedMsg.map((msg, index) => msg.response.text === \"\" ? /*#__PURE__*/React.createElement(Row, {\n    key: index,\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(Col, {\n    lg: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"my-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 10,\n    className: \"px-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-agents-msgs-bulle-bleu mb-1\",\n    style: {\n      backgroundColor: '#3B86FF'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-agents-msgs-bulle-text\",\n    style: {\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 57\n    }\n  }, trans[lang].wizardTest.didNotUnderstand))), /*#__PURE__*/React.createElement(Col, {\n    lg: 2,\n    className: \"d-flex pl-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: IMODO_PROFILE_ICON,\n    className: \"mt-auto\",\n    style: {\n      maxWidth: '50px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 53\n    }\n  }))))))) : /*#__PURE__*/React.createElement(Row, {\n    key: index,\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(Col, {\n    lg: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"my-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 10,\n    className: \"px-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-agents-msgs-bulle-bleu mb-1\",\n    style: {\n      backgroundColor: '#3B86FF'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-agents-msgs-bulle-text\",\n    style: {\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 57\n    }\n  }, msg.response.text))), /*#__PURE__*/React.createElement(Col, {\n    lg: 2,\n    className: \"d-flex pl-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: IMODO_PROFILE_ICON,\n    className: \"mt-auto\",\n    style: {\n      maxWidth: '50px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 53\n    }\n  })))), /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 10,\n    className: \"px-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 49\n    }\n  }, msg.response.hasOwnProperty('buttons') && msg.response.buttons.length < 2 ? msg.response.buttons.map((btn, ind) => /*#__PURE__*/React.createElement(\"div\", {\n    key: ind,\n    \"data-for\": \"btnTip\",\n    \"data-tip\": btn.type === \"web_url\" ? btn.url : btn.payload,\n    className: \"button-message-facebook d-flex mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 57\n    }\n  }, btn.title))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"group-btns-facebook\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 53\n    }\n  }, msg.response.buttons.map((btn, ind) => /*#__PURE__*/React.createElement(\"div\", {\n    key: ind,\n    \"data-for\": \"btnTip\",\n    \"data-tip\": btn.type === \"web_url\" ? btn.url : btn.payload,\n    className: `btn-group-facebook${ind} d-flex`,\n    style: {\n      borderBottom: ind < msg.response.buttons.length - 1 && \"1px solid #caccd2\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 57\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 61\n    }\n  }, btn.title)))), /*#__PURE__*/React.createElement(ReactTooltip, {\n    id: \"btnTip\",\n    textColor: \"#fff\",\n    backgroundColor: \"#E5007D\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 53\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: 2,\n    className: \"d-flex pl-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 49\n    }\n  }))))))))), /*#__PURE__*/React.createElement(Row, {\n    className: \"mt-3 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 9,\n    className: \"mx-auto\",\n    style: {\n      backgroundColor: 'white',\n      borderRadius: '0.2rem',\n      border: '1px solid #B4B4B4'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"pt-4 pb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: showKeyboard ? Arabic_Active : Arabic,\n    onClick: () => setShowKeyboard(!showKeyboard),\n    className: \"my-auto my-agents-msgs-tiny-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 41\n    }\n  })), showKeyboard && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wizard-config-keyboard-container\",\n    style: {\n      marginLeft: '20px',\n      marginTop: \"-235px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Keyboard, {\n    keyboardRef: r => {\n      keyboard.current = r;\n      keyboard.current.setInput(message);\n    },\n    onChange: input => setMessage(input),\n    onKeyPress: key => key === \"{enter}\" && setShowKeyboard(false),\n    layout: layout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 45\n    }\n  })))), /*#__PURE__*/React.createElement(Col, {\n    lg: 11,\n    className: \"d-flex p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"my-auto wizard-test-input w-100\",\n    placeholder: trans[lang].wizardTest.msgPlaceholder,\n    value: message,\n    onChange: e => {\n      setMessage(e.target.value);\n\n      if (keyboard.current) {\n        keyboard.current.setInput(e.target.value);\n      }\n    },\n    onClick: e => setCursorPos(e.target.selectionStart),\n    onKeyDown: e => e.key === 'Enter' && chat(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(Row, {\n    className: \"d-flex justify-content-between pl-4 pr-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wizard-pages-inactive-btn py-2 px-4 mb-3\",\n    onClick: () => backToStep3(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 21\n    }\n  }, trans[lang].wizardTest.back), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wizard-pages-inactive-btn py-2 px-4 mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 29\n    }\n  }, trans[lang].wizardTest.saveDraft), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wizard-pages-active-btn py-2 px-4 mr-3\",\n    onClick: () => showTheFinish(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 29\n    }\n  }, btnLoading ? /*#__PURE__*/React.createElement(Spinner, {\n    size: \"sm\",\n    animation: \"border\",\n    variant: \"light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 34\n    }\n  }) : trans[lang].wizardTest.finish))))), wizardFinish && /*#__PURE__*/React.createElement(Col, {\n    lg: 2,\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-auto mb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"finish-test-container d-flex flex-column py-3 mb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: activateAgent ? \"mx-auto finish-test-white-btn mb-2\" : \"mx-auto finish-test-white-btn-active mb-2\",\n    onClick: () => activateAgentNow('live'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 25\n    }\n  }, wizardExistingProject && wizardExistingProject.hasOwnProperty('published') && wizardExistingProject.published ? trans[lang].wizardTest.updateNow : trans[lang].wizardTest.activateNow), /*#__PURE__*/React.createElement(\"button\", {\n    className: activateAgent ? \"mx-auto finish-test-transparent-btn mb-2\" : \"mx-auto finish-test-transparent-btn-active mb-2\",\n    onClick: () => activateAgentNow('later'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 25\n    }\n  }, wizardExistingProject && wizardExistingProject.hasOwnProperty('published') && wizardExistingProject.published ? trans[lang].wizardTest.updateLater : trans[lang].wizardTest.activateLater)))));\n};\n\nconst mapStateToProps = state => ({\n  lang: state.socialMediaR.lang,\n  wizardStep: state.wizardR.wizardStep,\n  wizardIntentType: state.wizardR.wizardIntentType,\n  wizardSelectedPage: state.wizardR.wizardSelectedPage,\n  wizardSelectedPost: state.wizardR.wizardSelectedPost,\n  wizardReceivedMsg: state.wizardR.wizardReceivedMsg,\n  wizardIdProject: state.wizardR.wizardIdProject,\n  wizardExistingProject: state.wizardR.wizardExistingProject\n});\n\nexport default withRouter(connect(mapStateToProps, {\n  nextSpecificWizardStep,\n  testAgent,\n  resetStep4ReceivedMsg,\n  getExistingProject\n})(WizardTest));","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/app/Home/AutoWizard/WizardTest.js"],"names":["React","useState","useEffect","useRef","axios","host","connect","nextSpecificWizardStep","testAgent","resetStep4ReceivedMsg","getExistingProject","Row","Col","Image","Spinner","Popover","withRouter","trans","Swal","Keyboard","layout","ReactTooltip","Arabic","require","Arabic_Active","LETTER_ICON","IMODO_PROFILE_ICON","WizardTest","props","lang","wizardIntentType","wizardSelectedPage","wizardSelectedPost","wizardReceivedMsg","wizardIdProject","wizardExistingProject","history","swalWithBootstrapButtons","mixin","customClass","confirmButton","buttonsStyling","keyboard","message","setMessage","sendedMsg","setSendedMsg","btnLoading","setBtnLoading","wizardFinish","setWizardFinish","showKeyboard","setShowKeyboard","cursorPos","setCursorPos","activateAgent","setActivateAgent","TagsPopover","prevMsg","wizardMiracleInput","firstName","lastName","fullName","pageName","chat","then","catch","err","console","log","fire","title","wizardTest","errGetMsg","confirmButtonText","retry","showTheFinish","setTimeout","activateAgentNow","status","objectToSend","live","put","headers","localStorage","getItem","res","data","push","pathname","state","imFrom","page","errActivAgent","backToStep3","handleCursorPosition","e","target","selectionStart","isProjectActive","project","trained","backgroundColor","testInteractionTitle","borderRadius","border","height","length","testInteraction","map","msg","index","response","text","color","didNotUnderstand","maxWidth","hasOwnProperty","buttons","btn","ind","type","url","payload","borderBottom","marginLeft","marginTop","r","current","setInput","input","key","msgPlaceholder","value","back","saveDraft","finish","published","updateNow","activateNow","updateLater","activateLater","mapStateToProps","socialMediaR","wizardStep","wizardR"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\nimport axios from 'axios';\r\nimport { host } from '../../../config';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { nextSpecificWizardStep, testAgent, resetStep4ReceivedMsg, getExistingProject } from '../../../redux/actions/wizardActions';\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Image,\r\n    Spinner,\r\n    Popover,\r\n} from 'react-bootstrap';\r\n\r\nimport {\r\n    withRouter,\r\n} from 'react-router-dom';\r\n\r\n// Translations\r\nimport { trans } from '../../../Translations';\r\n\r\n\r\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\r\nimport Keyboard from 'react-simple-keyboard';\r\nimport layout from \"simple-keyboard-layouts/build/layouts/arabic\";\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nconst Arabic = require('../../../assets/images/home/Arabic.svg');\r\nconst Arabic_Active = require('../../../assets/images/home/arabic01.svg');\r\nconst LETTER_ICON = require('../../../assets/images/home/3a.png');\r\nconst IMODO_PROFILE_ICON = require('../../../assets/images/home/full-bulle-imodo.png');\r\n\r\nexport const WizardTest = (props) => {\r\n\r\n    let {\r\n        lang,\r\n        wizardIntentType,\r\n        wizardSelectedPage,\r\n        wizardSelectedPost,\r\n        wizardReceivedMsg,\r\n        wizardIdProject,\r\n        wizardExistingProject,\r\n        history,\r\n\r\n        resetStep4ReceivedMsg,\r\n        nextSpecificWizardStep,\r\n        getExistingProject,\r\n    } = props;\r\n\r\n    // Popup Config:\r\n    const swalWithBootstrapButtons = Swal.mixin({ customClass: {confirmButton: 'wizard-pages-active-btn-alert'}, buttonsStyling: false });\r\n\r\n    const keyboard = useRef(null);\r\n\r\n\r\n    const [message,setMessage] = useState('');\r\n    const [sendedMsg,setSendedMsg] = useState(null);\r\n    const [btnLoading,setBtnLoading] = useState(null);\r\n    const [wizardFinish,setWizardFinish] = useState(null);\r\n    const [showKeyboard, setShowKeyboard] = useState(false);\r\n    const [cursorPos, setCursorPos] = useState(0);\r\n    const [activateAgent, setActivateAgent] = useState(null);\r\n\r\n    \r\n    // Tags:\r\n    // const [Tags,setTags] = useState(false);\r\n    \r\n    const TagsPopover = (\r\n        <Popover id=\"popover-tags\">\r\n          <Popover.Content>\r\n            <Row>\r\n                <Col lg={12}>\r\n                    <Row className=\"pl-1 my-2\">\r\n                        <Col xs={12} className=\"d-flex mb-1 mt-2\">\r\n                            <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { setMessage(prevMsg => prevMsg + '##FIRST_NAME##'); }}>{trans[lang].wizardMiracleInput.firstName}</p>\r\n                        </Col>\r\n                         \r\n                        <Col xs={12} className=\"d-flex mb-1\">\r\n                            <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { setMessage(prevMsg => prevMsg + '##LAST_NAME##'); }}>{trans[lang].wizardMiracleInput.lastName}</p>\r\n                        </Col>\r\n\r\n                        <Col xs={12} className=\"d-flex mb-1\">\r\n                            <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { setMessage(prevMsg => prevMsg + '##FULL_NAME##'); }}  >{trans[lang].wizardMiracleInput.fullName}</p>\r\n                        </Col>\r\n\r\n                        <Col xs={12} className=\"m-auto d-flex mb-2\">\r\n                            <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { setMessage(prevMsg => prevMsg + '##PAGE_NAME##'); }}  >{trans[lang].wizardMiracleInput.pageName}</p>\r\n                        </Col> \r\n                    </Row>\r\n                </Col>\r\n            </Row>\r\n          </Popover.Content>\r\n        </Popover>\r\n    );\r\n\r\n    const chat = () => {\r\n        props.testAgent(message,wizardIntentType,wizardSelectedPage,wizardSelectedPost)\r\n        .then(() => {\r\n            setSendedMsg(message);\r\n            setMessage('');\r\n        })\r\n        .catch(err => {\r\n            console.log(\"Getting test message wizard\", err);\r\n\r\n            swalWithBootstrapButtons.fire({\r\n                title: trans[lang].wizardTest.errGetMsg,\r\n                confirmButtonText: trans[lang].wizardTest.retry,\r\n            });\r\n        });\r\n    };\r\n\r\n    const showTheFinish = () => {\r\n        setBtnLoading(true);\r\n\r\n        setTimeout(() => {\r\n            setWizardFinish(true);\r\n            setBtnLoading(null);\r\n        },1500);\r\n    };\r\n\r\n    const activateAgentNow = (status) => {\r\n\r\n        if(status === 'live') {\r\n\r\n            let objectToSend = {\r\n                live : true\r\n            };\r\n\r\n            axios.put(host + `/api/v1/secure/project/agent/live/${wizardIdProject}`,objectToSend,{\r\n                headers: {\r\n                    'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n                }\r\n            })\r\n            .then(res => {\r\n                console.log('agent Live post APi Response =>', res.data.data);\r\n                // history.push('/home/my-agents');\r\n                history.push({\r\n                    pathname: '/home/my-agents',\r\n                    state: { imFrom : 'Wizard', page: wizardSelectedPage },\r\n                });\r\n                \r\n            })\r\n            .catch((err) => {\r\n                console.log(\"agent Live post Api error  =>\", err)\r\n                swalWithBootstrapButtons.fire({ title: trans[lang].wizardTest.errActivAgent,confirmButtonText: trans[lang].wizardTest.retry });\r\n            })\r\n            \r\n        } else {\r\n\r\n            let objectToSend = {\r\n                live : false\r\n            };\r\n\r\n            axios.put(host + `/api/v1/secure/project/agent/live/${wizardIdProject}`,objectToSend,{\r\n                headers: {\r\n                    'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n                }\r\n            })\r\n            .then(res => {\r\n                console.log('agent Later post APi Response =>', res.data.data);\r\n                // history.push('/home/my-agents');\r\n                history.push({\r\n                    pathname: '/home/my-agents',\r\n                    state: { imFrom : 'Wizard', page: wizardSelectedPage },\r\n                });\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"agent Later post Api error  =>\", err)\r\n                swalWithBootstrapButtons.fire({ title: trans[lang].wizardTest.errActivAgent,confirmButtonText: trans[lang].wizardTest.retry });\r\n            })\r\n        }\r\n\r\n    };\r\n\r\n    const backToStep3 = () => {\r\n        // Reset Msg received & Go:\r\n        resetStep4ReceivedMsg();\r\n        nextSpecificWizardStep(2)\r\n    };\r\n\r\n    const handleCursorPosition = (e) => {\r\n        // console.log(\"Code\", e.keyCode, \"cursor in\", e.target.selectionStart);\r\n        setCursorPos(e.target.selectionStart - 1);\r\n    }\r\n\r\n    const isProjectActive = (project) => {\r\n      \r\n        if(project.trained && project.live) {\r\n            return true; // Status === Active\r\n            // Put your set State ya haider\r\n\r\n        } else if (project.trained && !project.live) {\r\n            return false // Status === Not Active\r\n            // Put your set State ya haider\r\n\r\n        } else {\r\n            return false // Status === DRAFT\r\n            // Put your set State ya haider\r\n\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n            \r\n        resetStep4ReceivedMsg();\r\n        if(wizardIdProject) {\r\n            getExistingProject(wizardIdProject)\r\n        };\r\n\r\n        if(wizardExistingProject) {\r\n            setActivateAgent(isProjectActive(wizardExistingProject))\r\n        };\r\n\r\n    },[])\r\n\r\n    return (\r\n        <Row className=\"mt-5\">  \r\n            <Col lg={1} />\r\n    \r\n            <Col lg={9} className=\"wizard-pages-container mb-3\" style={{backgroundColor: 'white'}}>\r\n                \r\n                <Row className=\"d-flex mt-4 ml-2 mb-4\">\r\n                    <p className=\"my-auto wizard-pages-title\">{trans[lang].wizardTest.testInteractionTitle}</p>\r\n                </Row>\r\n                \r\n                <Row className=\"mb-4\">\r\n                    <Col lg={9} className=\"mx-auto\" style={{backgroundColor : 'white',borderRadius: '0.2rem',border: '1px solid #B4B4B4', height: wizardReceivedMsg && wizardReceivedMsg.length > 1 ? \"auto\" : '300px' }}>\r\n                        {sendedMsg === null\r\n                        &&\r\n                        <Row className=\"d-flex\" style={{height: '100%'}}>\r\n                            <Col lg={12} className=\"d-flex\" >\r\n                                <p className=\"m-auto wizard-posts-status-text\">{trans[lang].wizardTest.testInteraction}</p>\r\n                            </Col>\r\n                        </Row>\r\n                        }\r\n\r\n                        {/* BULLE GRIS */}\r\n                        {sendedMsg !== null &&\r\n                        <Row className=\"d-flex\">\r\n                            <Col>\r\n                                <Row className=\"my-3\">\r\n                                    <Col>\r\n                                        <div className=\"my-agents-msgs-bulle mb-1\">\r\n                                            <p className=\"my-agents-msgs-bulle-text\">\r\n                                               {sendedMsg}\r\n                                            </p>\r\n                                        </div>\r\n                                        {/* <p className=\"my-agents-msgs-bulle-date\">1 hour ago</p> */}\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n\r\n                            <Col lg={7} />\r\n                        </Row>\r\n                        }\r\n\r\n                        {/* BULLE BLEU */}\r\n                        {wizardReceivedMsg && wizardReceivedMsg.length > 0\r\n                        &&\r\n                        wizardReceivedMsg.map((msg,index) => \r\n                            msg.response.text === \"\"\r\n                            ?\r\n                            <Row key={index} className=\"d-flex\">\r\n                                <Col lg={6} />\r\n\r\n                                <Col lg={6}>\r\n                                    <Row className=\"my-3\">\r\n                                        <Col lg={12}>\r\n                                            <Row className=\"justify-content-end\">\r\n                                                <Col lg={10} className=\"px-0\">\r\n                                                    <div className=\"my-agents-msgs-bulle-bleu mb-1\" style={{backgroundColor: '#3B86FF'}}>\r\n                                                        <p className=\"my-agents-msgs-bulle-text\" style={{color: 'white'}}>\r\n                                                            {trans[lang].wizardTest.didNotUnderstand}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </Col>\r\n                                                <Col lg={2} className=\"d-flex pl-1\">\r\n                                                    <Image src={IMODO_PROFILE_ICON} className={\"mt-auto\"} style={{maxWidth: '50px'}} />\r\n                                                </Col>\r\n                                            </Row>\r\n                                            {/* <p className=\"my-agents-msgs-bulle-date\">1 hour ago</p> */}\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Col>\r\n                            </Row>\r\n                            :\r\n                            <Row key={index} className=\"d-flex\">\r\n                                <Col lg={6} />\r\n\r\n                                <Col lg={6}>\r\n                                    <Row className=\"my-3\">\r\n                                        <Col lg={12}>\r\n                                            <Row className=\"justify-content-end\">\r\n                                                <Col lg={10} className=\"px-0\">\r\n                                                    <div className=\"my-agents-msgs-bulle-bleu mb-1\" style={{backgroundColor: '#3B86FF'}}>\r\n                                                        <p className=\"my-agents-msgs-bulle-text\" style={{color: 'white'}}>\r\n                                                            {msg.response.text}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </Col>\r\n                                                <Col lg={2} className=\"d-flex pl-1\">\r\n                                                    <Image src={IMODO_PROFILE_ICON} className={\"mt-auto\"} style={{maxWidth: '50px'}} />\r\n                                                </Col>\r\n                                            </Row>\r\n                                            {/* <p className=\"my-agents-msgs-bulle-date\">1 hour ago</p> */}\r\n                                        </Col>\r\n\r\n                                        {/* BUTTONS */}\r\n                                        <Col lg={12}>\r\n                                            <Row className=\"justify-content-end\">\r\n                                                <Col lg={10} className=\"px-0\">\r\n                                                    {msg.response.hasOwnProperty('buttons') && msg.response.buttons.length < 2\r\n                                                    ?\r\n                                                    msg.response.buttons.map((btn,ind) => \r\n                                                    <div key={ind} data-for='btnTip' data-tip={btn.type === \"web_url\" ? btn.url : btn.payload} className=\"button-message-facebook d-flex mb-1\">\r\n                                                        <p className=\"m-auto\">{btn.title}</p>\r\n                                                    </div>\r\n                                                    )\r\n                                                    :\r\n                                                    <div className=\"group-btns-facebook\">\r\n                                                        {msg.response.buttons.map((btn,ind) => \r\n                                                        <div key={ind} data-for='btnTip' data-tip={btn.type === \"web_url\" ? btn.url : btn.payload} className={`btn-group-facebook${ind} d-flex`} style={{borderBottom: ind < msg.response.buttons.length - 1 && \"1px solid #caccd2\" }}>\r\n                                                            <p className=\"m-auto\">{btn.title}</p>\r\n                                                        </div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    }\r\n                                                    <ReactTooltip id='btnTip' textColor='#fff' backgroundColor='#E5007D' />\r\n                                                </Col>\r\n\r\n                                                <Col lg={2} className=\"d-flex pl-1\">\r\n                                                    {/* <Image src={IMODO_PROFILE_ICON} className={\"mt-auto\"} style={{maxWidth: '50px'}} /> */}\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </Col>\r\n                                        \r\n                                        {/* <Col lg={12}>\r\n                                            <Row className=\"justify-content-end\">\r\n                                                <Col lg={10} className=\"px-0\">\r\n                                                    {msg.response.hasOwnProperty('buttons') && msg.response.buttons.length > 1\r\n                                                    &&\r\n                                                    <div className=\"group-btns-facebook\">\r\n                                                        {msg.response.buttons.map((btn,ind) => \r\n                                                        <div key={ind} data-for='btnTip' data-tip={btn.type === \"web_url\" ? btn.url : btn.payload} className={`btn-group-facebook${ind} d-flex`} style={{borderBottom: ind < msg.response.buttons.length - 1 && \"1px solid #caccd2\" }}>\r\n                                                            <p className=\"m-auto\">{btn.title}</p>\r\n                                                        </div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    }\r\n                                                    <ReactTooltip id='btnTip' textColor='#fff' backgroundColor='#E5007D' />\r\n                                                </Col>\r\n\r\n                                                <Col lg={2} className=\"d-flex pl-1\"/>\r\n                                       \r\n                                            </Row>\r\n                                        </Col> */}\r\n\r\n                                    </Row>\r\n                                </Col>\r\n                            </Row>\r\n                        )}\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row className=\"mt-3 mb-3\">\r\n                    <Col lg={9} className=\"mx-auto\" style={{backgroundColor : 'white',borderRadius: '0.2rem',border: '1px solid #B4B4B4'}}>\r\n                        <Row className=\"pt-4 pb-4\">\r\n                            <Col lg={1}>\r\n                                {/* NADIA REMOVED TAGS & EMOJIS FROM THE TEST */}\r\n                                {/* <Row className=\"justify-content-around\"> */}\r\n                                <Row className=\"d-flex\">\r\n                                    {/* <div className=\"d-flex\">\r\n                                        <OverlayTrigger trigger=\"click\" placement=\"top\" overlay={TagsPopover}>\r\n                                            <Image \r\n                                                src={Tags ? BALISE_ICON_ACTIVE : BALISE_ICON} \r\n                                                onClick={() => setTags(!Tags)} \r\n                                                className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" \r\n                                                style={{ width: '19px', cursor: 'pointer'}} \r\n                                            />   \r\n                                        </OverlayTrigger> \r\n                                    </div>                                \r\n\r\n                                    <div className=\"d-flex\">\r\n                                        <Image src={EMO_ICON} className=\"m-auto my-agents-msgs-tiny-icon\" />\r\n                                    </div> */}\r\n\r\n                                    <div className=\"d-flex m-auto\">\r\n                                        <Image src={showKeyboard ? Arabic_Active  : Arabic} onClick={() => setShowKeyboard(!showKeyboard)} className=\"my-auto my-agents-msgs-tiny-icon\" />\r\n                                    </div>\r\n\r\n                                    {showKeyboard &&\r\n                                        <div className=\"wizard-config-keyboard-container\" style={{marginLeft: '20px', marginTop: \"-235px\"}}>\r\n                                            <Keyboard \r\n                                                keyboardRef={r => {keyboard.current = r; keyboard.current.setInput(message);}}\r\n                                                onChange={(input) => setMessage(input)}\r\n                                                onKeyPress={(key) => key === \"{enter}\" && setShowKeyboard(false)}\r\n                                                layout={layout} \r\n                                            />\r\n                                        </div>\r\n                                    }\r\n                                </Row>\r\n                            </Col>\r\n\r\n                            <Col lg={11} className=\"d-flex p-0\">\r\n                                <input \r\n                                    type=\"text\" \r\n                                    className=\"my-auto wizard-test-input w-100\" \r\n                                    placeholder={trans[lang].wizardTest.msgPlaceholder}\r\n                                    value={message}\r\n                                    onChange={(e) => { setMessage(e.target.value); if(keyboard.current) { keyboard.current.setInput(e.target.value); } }} \r\n                                    onClick={(e) => setCursorPos(e.target.selectionStart)}\r\n                                    onKeyDown={(e) => e.key === 'Enter' && chat()}\r\n                                />\r\n                            </Col>\r\n\r\n                            <Col lg={3} />    \r\n\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row className=\"d-flex justify-content-between pl-4 pr-4\">\r\n                    <div className=\"wizard-pages-inactive-btn py-2 px-4 mb-3\" onClick={() => backToStep3()}>\r\n                        {trans[lang].wizardTest.back}\r\n                    </div>\r\n\r\n                    <div className=\"mb-3\">\r\n                        <Row>\r\n                            <div className=\"wizard-pages-inactive-btn py-2 px-4 mr-3\">\r\n                                {trans[lang].wizardTest.saveDraft}\r\n                            </div>\r\n\r\n                            <div className={\"wizard-pages-active-btn py-2 px-4 mr-3\"} onClick={() => showTheFinish()}>\r\n                                {\r\n                                btnLoading\r\n                                ?\r\n                                (<Spinner size=\"sm\" animation=\"border\" variant=\"light\" />)\r\n                                :\r\n                                trans[lang].wizardTest.finish\r\n                                }\r\n                            </div>\r\n                        </Row>\r\n                    </div>\r\n                </Row>\r\n\r\n            </Col>\r\n    \r\n            {wizardFinish \r\n            &&    \r\n            <Col lg={2} className=\"d-flex\">\r\n                <div className=\"mt-auto mb-5\">\r\n                    <div className=\"finish-test-container d-flex flex-column py-3 mb-5\">\r\n                        <button className={activateAgent ? \"mx-auto finish-test-white-btn mb-2\" : \"mx-auto finish-test-white-btn-active mb-2\"} onClick={() => activateAgentNow('live')}>\r\n                            {wizardExistingProject && wizardExistingProject.hasOwnProperty('published') && wizardExistingProject.published ?  trans[lang].wizardTest.updateNow :  trans[lang].wizardTest.activateNow }\r\n                        </button>\r\n                        <button className={activateAgent ? \"mx-auto finish-test-transparent-btn mb-2\" : \"mx-auto finish-test-transparent-btn-active mb-2\"} onClick={() => activateAgentNow('later')}>\r\n                            {wizardExistingProject && wizardExistingProject.hasOwnProperty('published') && wizardExistingProject.published ?  trans[lang].wizardTest.updateLater : trans[lang].wizardTest.activateLater }\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </Col>\r\n            }\r\n        </Row>\r\n        )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    lang: state.socialMediaR.lang,\r\n    wizardStep: state.wizardR.wizardStep,\r\n    wizardIntentType: state.wizardR.wizardIntentType,\r\n    wizardSelectedPage: state.wizardR.wizardSelectedPage,\r\n    wizardSelectedPost: state.wizardR.wizardSelectedPost,\r\n    wizardReceivedMsg: state.wizardR.wizardReceivedMsg,\r\n    wizardIdProject: state.wizardR.wizardIdProject,\r\n    wizardExistingProject: state.wizardR.wizardExistingProject,\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps, { nextSpecificWizardStep, testAgent, resetStep4ReceivedMsg, getExistingProject })(WizardTest));"]},"metadata":{},"sourceType":"module"}