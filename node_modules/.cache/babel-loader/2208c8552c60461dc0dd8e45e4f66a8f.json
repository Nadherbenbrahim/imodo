{"ast":null,"code":"import _slicedToArray from\"/usr/work/smart_front_oussema/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import TopMenu from'../components/TopMenu';import{connect}from'react-redux';import{getAllConnectedPages,getConnectedPagesProject,getConnectedPagesPosts,removeProject as _removeProject,selectedPage}from'../actions';import PageCart from'../components/PageCart';import ButtonActiveted from'../components/ButtonActiveted';import{Link,useLocation}from'react-router-dom';function useQuery(){return new URLSearchParams(useLocation().search);}function Agent(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),seletedPage=_useState2[0],setSelectedPage=_useState2[1];var query=useQuery();useEffect(function(){// console.log(query.get(\"page\"))\nprops.getallConnectedPage().then(function(){return props.getPagePostProject();}).then(function(){return query.get(\"page\")?handelClick(query.get(\"page\")):console.log('noparams');});},[]);var handelClick=function handelClick(idPage){console.log(idPage);props.getPagePosts(idPage).then(function(){var selectedPage=props.allConnectedPages.find(function(el){return el.idPage==idPage;});console.log('selectedpafe**** ',seletedPage);setSelectedPage(selectedPage);});};var removePorjuctHandler=function removePorjuctHandler(idPost){var project=props.allProjects.find(function(el){return el.post.idPost==idPost;});props.removeProject(project).then(function(){return props.getPagePostProject();});};return React.createElement(\"div\",null,React.createElement(TopMenu,null),React.createElement(\"div\",{style:{paddingLeft:30,paddingRight:30,paddingTop:30}},React.createElement(\"h2\",{style:{fontSize:30,color:\"rgba(45, 47, 57, 1)\"}},\"Pages connected\"),React.createElement(\"div\",{className:\"pagecarts\"},Object.keys(props.allConnectedPages).map(function(el){return React.createElement(\"div\",{key:props.allConnectedPages[el]._id,onClick:function onClick(){handelClick(props.allConnectedPages[el].idPage);console.log('shadow ',selectedPage);},style:{cursor:\"pointer\",border:\"2px solid \".concat(seletedPage&&seletedPage.idPage===props.allConnectedPages[el].idPage?\"#E5007D\":\"transparent\")}},React.createElement(PageCart,{key:props.allConnectedPages[el]._id,name:props.allConnectedPages[el].name,connected:props.allConnectedPages[el].isConnected,page:props.allConnectedPages[el],show:false}),\" \");})),React.createElement(\"br\",null),React.createElement(\"br\",null),seletedPage&&React.createElement(React.Fragment,null,React.createElement(\"h2\",null,\"Projets liste\"),React.createElement(\"div\",{style:{background:'#fff',paddingTop:40,paddingLeft:70,paddingRight:70,paddingBottom:40}},React.createElement(\"table\",{style:{width:\"100%\"}},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Picture\"),React.createElement(\"th\",null,\"Message\"),React.createElement(\"th\",null,\"Type\"),React.createElement(\"th\",null,\"Status\"),React.createElement(\"th\",null,\"Edit project\"))),React.createElement(\"tbody\",null,props.allProjects.filter(function(el){return el.post.page.idPage==seletedPage.idPage;}).sort(function(a,b){return new Date(b.createDate)-new Date(a.createDate);}).map(function(el){return el.trained&&React.createElement(\"tr\",{key:el._id},React.createElement(\"td\",{style:{display:\"flex\",alignItems:\"center\"}},el.post.hasOwnProperty('full_picture')?React.createElement(\"img\",{src:el.post.full_picture,alt:\"page thumbnail\",style:{width:40,height:40}}):React.createElement(\"img\",{src:'https://graph.facebook.com/v3.0/'+seletedPage.idPage+'/picture?access_token='+seletedPage.access_token,alt:\"page thumbnail\",style:{width:40,height:40}}),\" \"),React.createElement(\"td\",null,el.post.hasOwnProperty('message')?el.post.message.slice(0,el.post.message.length<=15?el.post.message.length:15)+'...':el.post.idPost!==el.post.page.idPage?'Timeline Post':el.post.page.name),React.createElement(\"td\",null,el.post.idPost!==el.post.page.idPage?React.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"20\",height:\"20\",viewBox:\"0 0 20 20\"},React.createElement(\"g\",{transform:\"translate(-3 -3)\"},React.createElement(\"path\",{fill:\"#b4b4b4\",d:\"M23 20.778V5.222A2.229 2.229 0 0020.778 3H5.222A2.229 2.229 0 003 5.222v15.556A2.229 2.229 0 005.222 23h15.556A2.229 2.229 0 0023 20.778zM9.111 14.667l2.778 3.344L15.778 13l5 6.667H5.222z\",\"data-name\":\"Trac\\xE9 208\"}))):React.createElement(\"svg\",{viewBox:\"0 0 496.26 496.26\",width:20,height:20},React.createElement(\"path\",{d:\"M302.765 20.395H45.458C20.536 20.395.26 40.67.26 65.592c0 329.751-1.925 309.456 4.692 316.073 96.335 96.334 90.227 90.74 93.596 92.406 4.818 2.418-8.366 1.692 204.216 1.692 24.922 0 45.198-20.275 45.198-45.197V65.592c.001-24.922-20.275-45.197-45.197-45.197zM89.679 421.137l-34.791-34.791h34.791zm226.284 9.429c0 7.277-5.92 13.197-13.198 13.197H121.679v-73.418c0-8.837-7.164-16-16-16H32.26V65.592c0-7.277 5.92-13.197 13.198-13.197h257.307c7.277 0 13.198 5.92 13.198 13.197zM422.112 65.592v364.975c0 24.922-20.276 45.197-45.198 45.197-8.836 0-16-7.163-16-16s7.164-16 16-16c7.277 0 13.198-5.92 13.198-13.197V65.592c0-7.277-5.92-13.197-13.198-13.197-8.836 0-16-7.163-16-16s7.164-16 16-16c24.922 0 45.198 20.275 45.198 45.197zm74.148 0v364.975c0 24.922-20.275 45.197-45.198 45.197-8.836 0-16-7.163-16-16s7.164-16 16-16c7.277 0 13.198-5.92 13.198-13.197V65.592c0-7.277-5.92-13.197-13.198-13.197-8.836 0-16-7.163-16-16s7.164-16 16-16c24.923 0 45.198 20.275 45.198 45.197z\",\"data-original\":\"#000000\",className:\"prefix__active-path\",\"data-old_color\":\"#000000\",fill:\"#818E94\"}))),React.createElement(\"td\",null,\" \",React.createElement(ButtonActiveted,{project:el,seletedPage:seletedPage,agentPage:true})),React.createElement(\"td\",null,el.trained&&React.createElement(Link,{to:\"/dachboard/agent/\".concat(el.post.idPost)},React.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"27\",height:\"27\",viewBox:\"0 0 27 27\"},React.createElement(\"path\",{fill:\"none\",stroke:\"#e5137d\",strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M26 17.667a2.778 2.778 0 01-2.778 2.778H6.556L1 26V3.778A2.778 2.778 0 013.778 1h19.444A2.778 2.778 0 0126 3.778z\",\"data-name\":\"Icon feather-message-square\"}))),React.createElement(Link,{style:{cursor:'pointer'},to:\"/dachboard/wizard/\".concat(el.post.idPost!==el.post.page.idPage?'monitorPost':'monitorPage',\"/\").concat(seletedPage.idPage,\"/project/\").concat(el.post.idPost,\"?project=\").concat(el.post.idPost)},React.createElement(\"svg\",{style:{cursor:'pointer',margin:\"0 15px\"},xmlns:\"http://www.w3.org/2000/svg\",width:\"27.241\",height:\"27\",viewBox:\"0 0 27.241 27\"},React.createElement(\"g\",{fill:\"none\",stroke:\"#e5137d\",strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",\"data-name\":\"Icon feather-edit\",transform:\"translate(-2 -1.818)\"},React.createElement(\"path\",{d:\"M14.01 5.797H5.447A2.447 2.447 0 003 8.244v17.127a2.447 2.447 0 002.447 2.447h17.127a2.447 2.447 0 002.447-2.447v-8.564\",\"data-name\":\"Trac\\xE9 420\"}),React.createElement(\"path\",{d:\"M22.913 3.691A2.979 2.979 0 0127.127 7.9L13.784 21.247l-5.618 1.405 1.4-5.618z\",\"data-name\":\"Trac\\xE9 421\"})))),React.createElement(\"svg\",{style:{cursor:'pointer'},onClick:function onClick(){return removePorjuctHandler(el.post.idPost);},xmlns:\"http://www.w3.org/2000/svg\",width:\"27\",height:\"28.786\",viewBox:\"0 0 27 28.786\"},React.createElement(\"g\",{fill:\"none\",stroke:\"#e5137d\",strokeLinecap:\"square\",strokeMiterlimit:\"10\",strokeWidth:\"2\",transform:\"translate(-3 -1)\"},React.createElement(\"path\",{d:\"M26.322 9.143V27a1.786 1.786 0 01-1.786 1.786H8.465A1.786 1.786 0 016.679 27V9.143\",\"data-name\":\"Trac\\xE9 429\"}),React.createElement(\"path\",{d:\"M0 0L0 10\",\"data-name\":\"Ligne 25\",transform:\"translate(17 13.786)\"}),React.createElement(\"path\",{d:\"M0 0L0 10\",\"data-name\":\"Ligne 26\",transform:\"translate(12 13.786)\"}),React.createElement(\"path\",{d:\"M0 0L0 10\",\"data-name\":\"Ligne 27\",transform:\"translate(21 13.786)\"}),React.createElement(\"path\",{d:\"M12.036 6.464V2h8.929v4.464\",\"data-name\":\"Trac\\xE9 430\"}),React.createElement(\"path\",{d:\"M25 0L0 0\",\"data-name\":\"Ligne 28\",transform:\"translate(4 6.786)\"})))));})))))));}var mapStateToProps=function mapStateToProps(state){// let posts = []\n// state.allPosts.forEach(el => {\n//     state.allProjects.forEach(Element => {\n//         if (Element.post.idPost == el.idPost) {\n//             posts.push(el)\n//         }\n//     })\n// })\n// console.log('posts has project ', posts)\nreturn{allConnectedPages:state.allConnectedPages,// allposts: posts,\nallProjects:state.allProjects};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getallConnectedPage:function getallConnectedPage(){return dispatch(getAllConnectedPages());},getPagePostProject:function getPagePostProject(){return dispatch(getConnectedPagesProject());},getPagePosts:function getPagePosts(pageid){return dispatch(getConnectedPagesPosts(pageid));},removeProject:function removeProject(project){return dispatch(_removeProject(project));}};};export default connect(mapStateToProps,mapDispatchToProps)(Agent);","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/dachboard/Agent.js"],"names":["React","useEffect","useState","TopMenu","connect","getAllConnectedPages","getConnectedPagesProject","getConnectedPagesPosts","removeProject","selectedPage","PageCart","ButtonActiveted","Link","useLocation","useQuery","URLSearchParams","search","Agent","props","seletedPage","setSelectedPage","query","getallConnectedPage","then","getPagePostProject","get","handelClick","console","log","idPage","getPagePosts","allConnectedPages","find","el","removePorjuctHandler","idPost","project","allProjects","post","paddingLeft","paddingRight","paddingTop","fontSize","color","Object","keys","map","_id","cursor","border","name","isConnected","background","paddingBottom","width","filter","page","sort","a","b","Date","createDate","trained","display","alignItems","hasOwnProperty","full_picture","height","access_token","message","slice","length","margin","mapStateToProps","state","mapDispatchToProps","dispatch","pageid"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport TopMenu from '../components/TopMenu'\r\nimport { connect } from 'react-redux'\r\nimport { getAllConnectedPages, getConnectedPagesProject, getConnectedPagesPosts, removeProject, selectedPage } from '../actions'\r\nimport PageCart from '../components/PageCart'\r\nimport ButtonActiveted from '../components/ButtonActiveted'\r\nimport { Link, useLocation } from 'react-router-dom'\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nfunction Agent(props) {\r\n    const [seletedPage, setSelectedPage] = useState(null)\r\n    let query = useQuery()\r\n\r\n    useEffect(() => {\r\n        // console.log(query.get(\"page\"))\r\n        props.getallConnectedPage()\r\n            .then(() => props.getPagePostProject())\r\n            .then(() => query.get(\"page\") ? handelClick(query.get(\"page\")) : console.log('noparams'))\r\n    }, [])\r\n\r\n    const handelClick = (idPage) => {\r\n        console.log(idPage)\r\n        props.getPagePosts(idPage)\r\n            .then(() => {\r\n                const selectedPage = props.allConnectedPages.find(el => el.idPage == idPage)\r\n                console.log('selectedpafe**** ', seletedPage)\r\n                setSelectedPage(selectedPage)\r\n            })\r\n    }\r\n\r\n    const removePorjuctHandler = (idPost) => {\r\n        const project = props.allProjects.find(el => el.post.idPost == idPost)\r\n        props.removeProject(project)\r\n            .then(() => props.getPagePostProject())\r\n    }\r\n    return (\r\n        <div>\r\n            <TopMenu />\r\n            <div style={{ paddingLeft: 30, paddingRight: 30, paddingTop: 30 }}>\r\n                <h2 style={{ fontSize: 30, color: \"rgba(45, 47, 57, 1)\" }}>Pages connected</h2>\r\n                <div className=\"pagecarts\">\r\n                    {Object.keys(props.allConnectedPages).map(el => <div key={props.allConnectedPages[el]._id} onClick={() => { handelClick(props.allConnectedPages[el].idPage); console.log('shadow ', selectedPage) }} style={{ cursor: \"pointer\", border: `2px solid ${seletedPage && seletedPage.idPage === props.allConnectedPages[el].idPage ? \"#E5007D\" : \"transparent\"}` }}><PageCart key={props.allConnectedPages[el]._id} name={props.allConnectedPages[el].name} connected={props.allConnectedPages[el].isConnected} page={props.allConnectedPages[el]} show={false} /> </div>)}\r\n                </div>\r\n                <br /><br />\r\n                {/* {!selectedPage && <div style={{ background: '#fff', paddingTop: 40, paddingLeft: 70, paddingRight: 70, paddingBottom: 40, textAlign: \"center\" }}><h2>Select a Page...</h2></div>} */}\r\n                {seletedPage &&\r\n                    <><h2>Projets liste</h2>\r\n                        <div style={{ background: '#fff', paddingTop: 40, paddingLeft: 70, paddingRight: 70, paddingBottom: 40 }}>\r\n                            <table style={{ width: \"100%\", }}>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>Picture</th>\r\n                                        <th>Message</th>\r\n                                        <th>Type</th>\r\n                                        {/* <th>Published</th> */}\r\n                                        <th>Status</th>\r\n                                        <th>Edit project</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {\r\n                                        props.allProjects.filter(el => el.post.page.idPage == seletedPage.idPage).sort((a, b) => new Date(b.createDate) - new Date(a.createDate)).map(el => el.trained && <tr key={el._id}>\r\n                                            {/* <td style={{ display: \"flex\", alignItems: \"center\" }}><img src={'https://graph.facebook.com/v3.2/' + seletedPage.idPage + '/picture?access_token=' + seletedPage.access_token} alt=\"page thumbnail\" style={{ width: 40 }} /> <Link style={{ marginLeft: 20, fontSize: 14, color: \"#3B5998\", textDecoration: \"none\" }}>Timeline {el.hasOwnProperty('picture') ? 'Photo' : 'Post'}</Link></td> */}\r\n                                            <td style={{ display: \"flex\", alignItems: \"center\" }}>{el.post.hasOwnProperty('full_picture') ? <img src={el.post.full_picture} alt=\"page thumbnail\" style={{ width: 40, height: 40 }} /> : <img src={'https://graph.facebook.com/v3.0/' + seletedPage.idPage + '/picture?access_token=' + seletedPage.access_token} alt=\"page thumbnail\" style={{ width: 40, height: 40 }} />} </td>\r\n                                            <td>{el.post.hasOwnProperty('message') ? el.post.message.slice(0, el.post.message.length <= 15 ? el.post.message.length : 15) + '...' : el.post.idPost !== el.post.page.idPage ? 'Timeline Post' : el.post.page.name}</td>\r\n                                            <td>{el.post.idPost !== el.post.page.idPage ? <svg\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"20\"\r\n                                                height=\"20\"\r\n                                                viewBox=\"0 0 20 20\"\r\n                                            >\r\n                                                <g transform=\"translate(-3 -3)\">\r\n                                                    <path\r\n                                                        fill=\"#b4b4b4\"\r\n                                                        d=\"M23 20.778V5.222A2.229 2.229 0 0020.778 3H5.222A2.229 2.229 0 003 5.222v15.556A2.229 2.229 0 005.222 23h15.556A2.229 2.229 0 0023 20.778zM9.111 14.667l2.778 3.344L15.778 13l5 6.667H5.222z\"\r\n                                                        data-name=\"Tracé 208\"\r\n                                                    ></path>\r\n                                                </g>\r\n                                            </svg> :\r\n                                                <svg viewBox=\"0 0 496.26 496.26\" width={20} height={20}>\r\n                                                    <path\r\n                                                        d=\"M302.765 20.395H45.458C20.536 20.395.26 40.67.26 65.592c0 329.751-1.925 309.456 4.692 316.073 96.335 96.334 90.227 90.74 93.596 92.406 4.818 2.418-8.366 1.692 204.216 1.692 24.922 0 45.198-20.275 45.198-45.197V65.592c.001-24.922-20.275-45.197-45.197-45.197zM89.679 421.137l-34.791-34.791h34.791zm226.284 9.429c0 7.277-5.92 13.197-13.198 13.197H121.679v-73.418c0-8.837-7.164-16-16-16H32.26V65.592c0-7.277 5.92-13.197 13.198-13.197h257.307c7.277 0 13.198 5.92 13.198 13.197zM422.112 65.592v364.975c0 24.922-20.276 45.197-45.198 45.197-8.836 0-16-7.163-16-16s7.164-16 16-16c7.277 0 13.198-5.92 13.198-13.197V65.592c0-7.277-5.92-13.197-13.198-13.197-8.836 0-16-7.163-16-16s7.164-16 16-16c24.922 0 45.198 20.275 45.198 45.197zm74.148 0v364.975c0 24.922-20.275 45.197-45.198 45.197-8.836 0-16-7.163-16-16s7.164-16 16-16c7.277 0 13.198-5.92 13.198-13.197V65.592c0-7.277-5.92-13.197-13.198-13.197-8.836 0-16-7.163-16-16s7.164-16 16-16c24.923 0 45.198 20.275 45.198 45.197z\"\r\n                                                        data-original=\"#000000\"\r\n                                                        className=\"prefix__active-path\"\r\n                                                        data-old_color=\"#000000\"\r\n                                                        fill=\"#818E94\"\r\n                                                    />\r\n                                                </svg>\r\n                                            }</td>\r\n                                            {/* <td><span>{new Date(el.created_time).toLocaleDateString()}</span><br />\r\n                                                <span style={{ fontSize: 12, color: \"#B4B4B4\" }}>{new Date(el.created_time).toLocaleTimeString()}</span></td> */}\r\n                                            <td> <ButtonActiveted project={el} seletedPage={seletedPage} agentPage={true} /></td>\r\n                                            <td>\r\n                                                {\r\n                                                    el.trained &&\r\n\r\n                                                    <Link to={`/dachboard/agent/${el.post.idPost}`}>\r\n                                                        <svg\r\n                                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                            width=\"27\"\r\n                                                            height=\"27\"\r\n                                                            viewBox=\"0 0 27 27\"\r\n                                                        >\r\n                                                            <path\r\n                                                                fill=\"none\"\r\n                                                                stroke=\"#e5137d\"\r\n                                                                strokeLinecap=\"round\"\r\n                                                                strokeLinejoin=\"round\"\r\n                                                                strokeWidth=\"2\"\r\n                                                                d=\"M26 17.667a2.778 2.778 0 01-2.778 2.778H6.556L1 26V3.778A2.778 2.778 0 013.778 1h19.444A2.778 2.778 0 0126 3.778z\"\r\n                                                                data-name=\"Icon feather-message-square\"\r\n                                                            ></path>\r\n                                                        </svg>\r\n                                                    </Link>\r\n                                                }\r\n                                                <Link style={{ cursor: 'pointer' }} to={`/dachboard/wizard/${el.post.idPost !== el.post.page.idPage ? 'monitorPost' : 'monitorPage'}/${seletedPage.idPage}/project/${el.post.idPost}?project=${el.post.idPost}`}>\r\n\r\n                                                    <svg style={{ cursor: 'pointer', margin: \"0 15px\" }}\r\n                                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                        width=\"27.241\"\r\n                                                        height=\"27\"\r\n                                                        viewBox=\"0 0 27.241 27\"\r\n                                                    >\r\n                                                        <g\r\n                                                            fill=\"none\"\r\n                                                            stroke=\"#e5137d\"\r\n                                                            strokeLinecap=\"round\"\r\n                                                            strokeLinejoin=\"round\"\r\n                                                            strokeWidth=\"2\"\r\n                                                            data-name=\"Icon feather-edit\"\r\n                                                            transform=\"translate(-2 -1.818)\"\r\n                                                        >\r\n                                                            <path\r\n                                                                d=\"M14.01 5.797H5.447A2.447 2.447 0 003 8.244v17.127a2.447 2.447 0 002.447 2.447h17.127a2.447 2.447 0 002.447-2.447v-8.564\"\r\n                                                                data-name=\"Tracé 420\"\r\n                                                            ></path>\r\n                                                            <path\r\n                                                                d=\"M22.913 3.691A2.979 2.979 0 0127.127 7.9L13.784 21.247l-5.618 1.405 1.4-5.618z\"\r\n                                                                data-name=\"Tracé 421\"\r\n                                                            ></path>\r\n                                                        </g>\r\n                                                    </svg>\r\n                                                </Link>\r\n                                                <svg style={{ cursor: 'pointer' }} onClick={() => removePorjuctHandler(el.post.idPost)}\r\n                                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                    width=\"27\"\r\n                                                    height=\"28.786\"\r\n                                                    viewBox=\"0 0 27 28.786\"\r\n                                                >\r\n                                                    <g\r\n                                                        fill=\"none\"\r\n                                                        stroke=\"#e5137d\"\r\n                                                        strokeLinecap=\"square\"\r\n                                                        strokeMiterlimit=\"10\"\r\n                                                        strokeWidth=\"2\"\r\n                                                        transform=\"translate(-3 -1)\"\r\n                                                    >\r\n                                                        <path\r\n                                                            d=\"M26.322 9.143V27a1.786 1.786 0 01-1.786 1.786H8.465A1.786 1.786 0 016.679 27V9.143\"\r\n                                                            data-name=\"Tracé 429\"\r\n                                                        ></path>\r\n                                                        <path\r\n                                                            d=\"M0 0L0 10\"\r\n                                                            data-name=\"Ligne 25\"\r\n                                                            transform=\"translate(17 13.786)\"\r\n                                                        ></path>\r\n                                                        <path\r\n                                                            d=\"M0 0L0 10\"\r\n                                                            data-name=\"Ligne 26\"\r\n                                                            transform=\"translate(12 13.786)\"\r\n                                                        ></path>\r\n                                                        <path\r\n                                                            d=\"M0 0L0 10\"\r\n                                                            data-name=\"Ligne 27\"\r\n                                                            transform=\"translate(21 13.786)\"\r\n                                                        ></path>\r\n                                                        <path d=\"M12.036 6.464V2h8.929v4.464\" data-name=\"Tracé 430\"></path>\r\n                                                        <path\r\n                                                            d=\"M25 0L0 0\"\r\n                                                            data-name=\"Ligne 28\"\r\n                                                            transform=\"translate(4 6.786)\"\r\n                                                        ></path>\r\n                                                    </g>\r\n                                                </svg>\r\n                                            </td>\r\n                                        </tr>\r\n                                        )\r\n                                    }\r\n\r\n                                </tbody>\r\n                            </table>\r\n                        </div></>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    // let posts = []\r\n    // state.allPosts.forEach(el => {\r\n    //     state.allProjects.forEach(Element => {\r\n    //         if (Element.post.idPost == el.idPost) {\r\n    //             posts.push(el)\r\n    //         }\r\n    //     })\r\n    // })\r\n    // console.log('posts has project ', posts)\r\n    return {\r\n        allConnectedPages: state.allConnectedPages,\r\n        // allposts: posts,\r\n        allProjects: state.allProjects\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        getallConnectedPage: () => dispatch(getAllConnectedPages()),\r\n        getPagePostProject: () => dispatch(getConnectedPagesProject()),\r\n        getPagePosts: (pageid) => dispatch(getConnectedPagesPosts(pageid)),\r\n        removeProject: (project) => dispatch(removeProject(project))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Agent)\r\n"]},"metadata":{},"sourceType":"module"}