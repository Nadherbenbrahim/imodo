{"ast":null,"code":"import _slicedToArray from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{host}from'../../config';import Swal from'sweetalert2/dist/sweetalert2.js';// Popup Config: \nvar popup=Swal.mixin({customClass:{confirmButton:'wizard-pages-active-btn'},buttonsStyling:false});// Public reply:\nexport var sendPublicReply=function sendPublicReply(history,page,message,status){return function(dispatch){var objectToSend=null;var pagePlatform=page.platform===\"fb\"?\"facebook\":\"instagram\";if(status){objectToSend={statut:true,message:message};}else{objectToSend={statut:false,message:message};}console.log(\"Public Reply sending to nour\",objectToSend,page.idPage,pagePlatform);return axios.put(host+\"/api/v1/secure/pages/publicreply/\".concat(page.idPage,\"/\").concat(pagePlatform),objectToSend,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}});// .then(res => {\n//     console.log('Public Reply Response =>', res.data.data);\n//     history.push('/pages');\n// })\n// .catch((err) => console.log(\"setPreferences err\", err))\n};};// Set Language :\nexport var setLang=function setLang(lang){return function(dispatch){// console.log(\"Lang !\", lang);\nlocalStorage.setItem(\"modoLang\",lang);dispatch({type:'SET_LANG',payload:lang});};};// Filtring Pages:\nexport var filterPages=function filterPages(filterBy,Pages){return function(dispatch){// console.log(\"Filter\", filterBy, \"Those =>\", Pages)\nif(filterBy===\"all\"){dispatch({type:'FILTER_PAGES',payload:[]});}else{var filteredPages=Pages.filter(function(page){return page.platform===filterBy;});dispatch({type:'GET_ALL_PAGES',payload:filteredPages});};};};export var resetFilterPages=function resetFilterPages(){return function(dispatch){dispatch({type:'RESET_FILTER_PAGES'});};};export var filterDashboardPosts=function filterDashboardPosts(Page,filter){return function(dispatch){var fbHost=\"https://graph.facebook.com/v8.0\";return axios.get(host+\"/api/v1/secure/logEvent/dashbord/post/\".concat(Page.id,\"/\").concat(Page.accessToken,\"/\").concat(Page.platform,\"/\").concat(filter),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('getDashboardPosts',res.data.data);dispatch({type:'GET_DASHBOARD_POSTS',payload:res.data.data});});// .catch((err) => console.log(\"err getDashboardPosts\", err))\n};};export var filterDashboardIntents=function filterDashboardIntents(Page,filter){return function(dispatch){return axios.get(host+\"/api/v1/secure/logEvent/dashbord/intent/\".concat(Page.id,\"/\").concat(Page.platform,\"/\").concat(filter),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('Filtring dashboard intents RESULTS =>',res.data.data);var limitedTo5=res.data.data.slice(0,5);dispatch({type:'GET_DASHBOARD',payload:limitedTo5});}).catch(function(err){return console.log(\"Error Filtring dashboard intents\",err);});};};export var getDashboardPosts=function getDashboardPosts(Page){return function(dispatch){var fbHost=\"https://graph.facebook.com/v8.0\";return axios.get(host+\"/api/v1/secure/logEvent/dashbord/post/\".concat(Page.id,\"/\").concat(Page.accessToken,\"/\").concat(Page.platform,\"/all\"),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('getDashboardPosts',res.data.data);dispatch({type:'GET_DASHBOARD_POSTS',payload:res.data.data});}).catch(function(err){return console.log(\"err getDashboardPosts\",err);});};};export var getDashboard=function getDashboard(Page){return function(dispatch){// console.log(\"Getting the dashboard with page =>\", Page.id);\nvar filter=\"all\";return axios.get(host+\"/api/v1/secure/logEvent/dashbord/intent/\".concat(Page.id,\"/\").concat(Page.platform,\"/\").concat(filter),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('/logEvent/dashbord/intent/ Result =>',res.data.data);var limitedTo5=res.data.data.slice(0,5);dispatch({type:'GET_DASHBOARD',payload:limitedTo5});}).catch(function(err){return console.log(\"err getDashboard\",err);});};};export var setPreferences=function setPreferences(history,spam,likes,delay,Page,Platform,exactlySeconds,exactlyMinutes,randomlyFromSeconds,randomlyFromMinutes,randomlyToSeconds,randomlyToMinutes){return function(dispatch){var objectToSend=null;var pagePlatform=Platform===\"fb\"?\"facebook\":\"instagram\";if(delay===\"immediatly\"){objectToSend={platforme:pagePlatform,likesComment:likes,spam:spam,respReplies:{statut:'immediatly',time:[0]}};console.log(\"Immediatly\",objectToSend);}else if(delay===\"Exactly\"){// Minutes + Seconds => X ms\nvar minutes=exactlyMinutes*60000;var seconds=exactlySeconds*1000;var finalTime=minutes+seconds;objectToSend={platforme:pagePlatform,likesComment:likes,spam:spam,respReplies:{statut:'Exactly',time:[finalTime]}};console.log(\"Exactly\",objectToSend);}else{// from Minutes + Seconds => X ms\n// to Minutes + Seconds => X ms\nvar minutesFrom=randomlyFromMinutes*60000;var secondsFrom=randomlyFromSeconds*1000;var finalTimeFrom=minutesFrom+secondsFrom;var minutesTo=randomlyToMinutes*60000;var secondsTo=randomlyToSeconds*1000;var finalTimeTo=minutesTo+secondsTo;objectToSend={platforme:pagePlatform,likesComment:likes,spam:spam,respReplies:{statut:'Randomly',time:[finalTimeFrom,finalTimeTo]}};console.log(\"Randomly\",objectToSend);}console.log(\"Preferences sending to nour\",objectToSend);return axios.put(host+\"/api/v1/secure/pages/preference/\".concat(Page.idPage,\"/\").concat(pagePlatform),objectToSend,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('setPreferences Response =>',res.data.data);history.push('/pages');}).catch(function(err){return console.log(\"setPreferences err\",err);});};};export var addPageEntity=function addPageEntity(page){return function(dispatch){return axios.get(host+\"/api/v1/secure/pages/entities/add/\".concat(page.id),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('add entity',res.data.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err addPageEntity\",err);});};};export var getPageEntities=function getPageEntities(page){return function(dispatch){return axios.get(host+\"/api/v1/secure/project/get/entitiesproject/\".concat(page.platform,\"/\").concat(page.id),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){// console.log('entities mtaaa page', res.data.data);\nvar categories=res.data.data;if(categories.length>0){categories.map(function(cat,index){return cat.default===true&&categories.splice(index,1);});};dispatch({type:'GET_ENTITIES_OF_A_PAGE',payload:categories});}).catch(function(err){return console.log(\"err getPageEntities\",err);});};};// TEAM:\nexport var getTeamMembers=function getTeamMembers(Page){return function(dispatch){return axios.get(host+\"/api/v1/secure/membership/listUser/\".concat(Page.id,\"/\").concat(Page.platform),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){// console.log('membership/listUser/ Response api  => ', res.data.data);\ndispatch({type:'GET_TEAM',payload:res.data.data});}).catch(function(err){return console.log(\"membership/listUser/ error =>\",err);});};};export var sendMailTeam=function sendMailTeam(Page,emailTeamMember,nameTeamMember,inviteToken){return function(dispatch){// console.log(\"Page\", Page);\n// console.log(\"Email\", emailTeamMember);\n// console.log(\"Name\", nameTeamMember);\nreturn axios.post(host+\"/api/v1/secure/membership/sendMail/\".concat(Page.id,\"/\").concat(Page.platform),{email:emailTeamMember,nameUser:nameTeamMember,token:inviteToken},{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('membership/sendMail/ Response api  => ',res.data.data);}).catch(function(err){return console.log(\"membership/sendMail/ error =>\",err);});};};export var inviteExistingMember=function inviteExistingMember(page,member){return function(dispatch){return axios.post(host+\"/api/v1/secure/membership/addExistingMember/\".concat(page.id,\"/\").concat(page.platform),member,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}});};};export var inviteMember=function inviteMember(page,nameTeamMember){return function(dispatch){return axios.get(host+\"/api/v1/secure/membership/get/\".concat(page.id,\"/\").concat(page.platform,\"/\").concat(nameTeamMember),{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}});};};export var deleteTeamMember=function deleteTeamMember(page,idFacebook,role){return function(dispatch){var typePage=page.platform;var idPage=page.id;return axios.post(host+\"/api/v1/secure/membership/deleteMember/\".concat(role),{idFacebook:idFacebook,idPage:idPage,typePage:typePage},{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('/membership/deleteMember/ response api',res.data.data);dispatch({type:'GET_TEAM',payload:res.data.data});}).catch(function(err){console.log(\"/membership/deleteMember/ error api\",err);popup.fire({title:'Error while deleting the member',confirmButtonText:'Retry'});});};};/* INSTAGRAM */export var connectInstagramPage=function connectInstagramPage(idPage){return function(dispatch){var page={id:idPage};return axios.post(host+\"/api/v1/secure/pagesInsta/connect/\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}});// .then(res => {\n//     console.log('retour de connect page insta', res.data);\n//     // dispatch({\n//     //     type: 'GET_ENTITIES_OF_A_PAGE',\n//     //     payload: res.data.data\n//     // })\n// })\n// .catch((err) => console.log(\"err connect page insta\", err))\n};};export var disconnectInstagramPage=function disconnectInstagramPage(idPage){return function(dispatch){var page={id:idPage};return axios.post(host+\"/api/v1/secure/pagesInsta/disconnect/disconnect\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de disconnect page insta',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err disconnect page instagram\",err);});};};export var deleteInstagramPage=function deleteInstagramPage(idPage){return function(dispatch){var page={id:idPage};return axios.post(host+\"/api/v1/secure/pagesInsta/disconnect/delete\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de disconnect page insta',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err disconnect page instagram\",err);});};};export var makeOwnerInstagramPage=function makeOwnerInstagramPage(idPage,idFacebook){return function(dispatch){var page={id:idPage,idFacebook:idFacebook// idFacebook of the new owner\n};return axios.post(host+\"/api/v1/secure/pagesInsta/disconnect/owner\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de owner page insta',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err owner page instagram\",err);});};};/* FACEBOOK */export var connectFacebookPage=function connectFacebookPage(idPage){return function(dispatch){var page={id:idPage};return axios.post(host+\"/api/v1/secure/pages/connect/\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}});// .then(res => {\n//     console.log('retour de connect page facebook', res.data);\n//     // dispatch({\n//     //     type: 'GET_ENTITIES_OF_A_PAGE',\n//     //     payload: res.data.data\n//     // })\n// })\n// .catch((err) => console.log(\"err de connect page facebook\", err))\n};};export var disconnectFacebookPage=function disconnectFacebookPage(idPage){return function(dispatch){var page={id:idPage};return axios.post(host+\"/api/v1/secure/pages/disconnect/disconnect\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}});// .then(res => {\n//     console.log('retour de disconnect page facebok', res.data);\n//     // dispatch({\n//     //     type: 'GET_ENTITIES_OF_A_PAGE',\n//     //     payload: res.data.data\n//     // })\n// })\n// .catch((err) => console.log(\"err de disconnect page facebok\", err))\n};};export var deleteFacebookPage=function deleteFacebookPage(idPage,idFacebook){return function(dispatch){var page={id:idPage};return axios.post(host+\"/api/v1/secure/pages/disconnect/delete\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de disconnect page facebok',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err de disconnect page facebok\",err);});};};export var makeOwnerFacebookPage=function makeOwnerFacebookPage(idPage,idFacebook){return function(dispatch){var page={id:idPage,idFacebook:idFacebook// idFacebook of the new owner\n};return axios.post(host+\"/api/v1/secure/pages/disconnect/owner\",page,{headers:{'authorization':'Bearer '+localStorage.getItem('authtoken')}}).then(function(res){console.log('retour de owner page facebook',res.data);// dispatch({\n//     type: 'GET_ENTITIES_OF_A_PAGE',\n//     payload: res.data.data\n// })\n}).catch(function(err){return console.log(\"err owner page facebook\",err);});};};export var purgePages=function purgePages(allPages,idPage){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('idPage',idPage,'purge this =>',allPages);// allPages.filter(page => page.idPage !== idPage);\ndispatch({type:'GET_ALL_PAGES',payload:allPages.filter(function(page){return page.idPage!==idPage;})});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var sycroPageWithWizard=function sycroPageWithWizard(allPages,wizardPage){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var found,page,selectedPage;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// console.log('Lets search for', wizardPage);\n// console.log('in', allPages);\nfound=allPages.filter(function(p){return p.idPage===wizardPage.id;});page=found[0];// console.log(\"Pagek ahaya =>\", page);\nselectedPage={platform:page.platform,name:page.name,picture_url:page.imageUrl?page.imageUrl:\"https://graph.facebook.com/v8.0/\".concat(page.idPage,\"/picture?access_token=\").concat(page.access_token),id:page.idPage,accessToken:page.access_token,team:page.user,admins:page.admins,status:page.status};// console.log(\"You just sync a page with wizard\", selectedPage)\ndispatch({type:'SELECT_SOCIAL_MEDIA_PAGE',payload:selectedPage});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var selectSocialMediaPage=function selectSocialMediaPage(page,platform,status){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var selectedPage;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:/*\r\n            ALL STATUS :\r\n            \"listPageConnectedOwner\" => #E5007D\" || \"listPageInvite\" => #139216\" \r\n            \"listPageInviteAdmin\" => \"#199EE3\"  || \"listPageConnectedOtherTeam\" => #B4B4B4\"\r\n            \"listPageNotConnected\" => \"No Color\"\r\n        */selectedPage={platform:platform===\"fb\"?\"facebook\":\"instagram\",name:page.name,picture_url:page.imageUrl?page.imageUrl:\"https://graph.facebook.com/v8.0/\".concat(page.idPage,\"/picture?access_token=\").concat(page.access_token),id:page.idPage,accessToken:page.access_token,team:page.user,admins:page.admins,status:status};// console.log(\"u just selected a page\", selectedPage)\ndispatch({type:'SELECT_SOCIAL_MEDIA_PAGE',payload:selectedPage});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var getFbData=function getFbData(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var token;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return localStorage.getItem('authtoken');case 2:token=_context4.sent;return _context4.abrupt(\"return\",axios.get(host+'/api/v1/secure/pages/get/all/',{headers:{'authorization':'Bearer '+token}}).then(function(res){var allFbPages=[];Object.entries(res.data.data).map(function(_ref5){var _ref6=_slicedToArray(_ref5,2),key=_ref6[0],tab=_ref6[1];return tab.map(function(page){page.status=key;allFbPages.push(page);});});allFbPages.sort(function(page,nextPage){var nameA=page.name.toLowerCase(),nameB=nextPage.name.toLowerCase();//sort ascending \nif(nameA<nameB)return-1;if(nameA>nameB)return 1;return 0;// default return value (no sorting)\n});dispatch({type:'GET_FB_DATA',payload:allFbPages,payload2:res.data.data});}).catch(function(err){console.log(\"GetFbData err\",JSON.stringify(err));}));case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var getInstaData=function getInstaData(){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var token;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return localStorage.getItem('authtoken');case 2:token=_context5.sent;return _context5.abrupt(\"return\",axios.get(host+'/api/v1/secure/pagesInsta/get/all/',{headers:{'authorization':'Bearer '+token}}).then(function(res){// console.log('Instagram pages ya haider =>', res.data.data)\nvar allInstaPages=[];Object.entries(res.data.data).map(function(_ref8){var _ref9=_slicedToArray(_ref8,2),key=_ref9[0],tab=_ref9[1];return tab.map(function(page){page.status=key;allInstaPages.push(page);});});allInstaPages.sort(function(page,nextPage){var nameA=page.name.toLowerCase(),nameB=nextPage.name.toLowerCase();//sort ascending \nif(nameA<nameB)return-1;if(nameA>nameB)return 1;return 0;// default return value (no sorting)\n});dispatch({type:'GET_INSTA_DATA',payload:allInstaPages,payload2:res.data.data});}).catch(function(err){console.log(\"getInstaData error\",JSON.stringify(err));}));case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref7.apply(this,arguments);};}();};export var getAllPage=function getAllPage(){return/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var token;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return localStorage.getItem('authtoken');case 2:token=_context6.sent;dispatch({type:'RESET_ALL_PAGES'});return _context6.abrupt(\"return\",axios.get(host+'/api/v1/secure/pages/test/get/all/',{headers:{'authorization':'Bearer '+token}}).then(function(res){// console.log('getting all pages :D ===>', res.data.data)\nvar apiResp=res.data.data;var allPages=[];// Push the Fb Data:\nObject.entries(apiResp.facebookPages).map(function(_ref11){var _ref12=_slicedToArray(_ref11,2),key=_ref12[0],tab=_ref12[1];return tab.map(function(page){page.platform=\"facebook\";page.status=key;allPages.push(page);});});// Push the Insta Data:\nObject.entries(apiResp.instaPages).map(function(_ref13){var _ref14=_slicedToArray(_ref13,2),key=_ref14[0],tab=_ref14[1];return tab.map(function(page){page.platform=\"instagram\";page.status=key;allPages.push(page);});});allPages.sort(function(page,nextPage){var nameA=page.name.toLowerCase(),nameB=nextPage.name.toLowerCase();//sort ascending \nif(nameA<nameB)return-1;if(nameA>nameB)return 1;return 0;// default return value (no sorting)\n});// console.log(\"All Pages for test are Sorted=>\",allPages);\ndispatch({type:'GET_ALL_PAGES',payload:allPages});}).catch(function(err){console.log(\"getAllPage error ya nouuur\",err);}));case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref10.apply(this,arguments);};}();};export var getAllPageConnected=function getAllPageConnected(){return/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var token;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return localStorage.getItem('authtoken');case 2:token=_context7.sent;dispatch({type:'RESET_ALL_PAGES'});return _context7.abrupt(\"return\",axios.get(host+'/api/v1/secure/pages/test/connect/get/all/',{headers:{'authorization':'Bearer '+token}}).then(function(res){// console.log('getAllPageConnected ===>', res.data.data)\nvar apiResp=res.data.data;var allPages=[];// Push the Fb Data:\nObject.entries(apiResp.facebookPages).map(function(_ref16){var _ref17=_slicedToArray(_ref16,2),key=_ref17[0],tab=_ref17[1];return tab.map(function(page){page.platform=\"facebook\";page.status=key;allPages.push(page);});});Object.entries(apiResp.instaPages).map(function(_ref18){var _ref19=_slicedToArray(_ref18,2),key=_ref19[0],tab=_ref19[1];return tab.map(function(page){page.platform=\"instagram\";page.status=key;allPages.push(page);});});allPages.sort(function(page,nextPage){var nameA=page.name.toLowerCase(),nameB=nextPage.name.toLowerCase();//sort ascending \nif(nameA<nameB)return-1;if(nameA>nameB)return 1;return 0;// default return value (no sorting)\n});// console.log(\"All Pages Connected Pages for test are Sorted =>\",allPages);\ndispatch({type:'GET_ALL_PAGES',payload:allPages});}).catch(function(err){console.log(\"getAllPageConnected error\",JSON.stringify(err));}));case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x7){return _ref15.apply(this,arguments);};}();};export var resetAllPages=function resetAllPages(){return function(dispatch){return dispatch({type:'RESET_ALL_PAGES'});};};export var resetDashboard=function resetDashboard(){return function(dispatch){return dispatch({type:'RESET_DASHBOARD'});};};export var resetSocialMediaSelections=function resetSocialMediaSelections(){return function(dispatch){return dispatch({type:'RESET_SM_SELECTIONS'});};};","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/redux/actions/socialMediaActions.js"],"names":["axios","host","Swal","popup","mixin","customClass","confirmButton","buttonsStyling","sendPublicReply","history","page","message","status","dispatch","objectToSend","pagePlatform","platform","statut","console","log","idPage","put","headers","localStorage","getItem","setLang","lang","setItem","type","payload","filterPages","filterBy","Pages","filteredPages","filter","resetFilterPages","filterDashboardPosts","Page","fbHost","get","id","accessToken","then","res","data","filterDashboardIntents","limitedTo5","slice","catch","err","getDashboardPosts","getDashboard","setPreferences","spam","likes","delay","Platform","exactlySeconds","exactlyMinutes","randomlyFromSeconds","randomlyFromMinutes","randomlyToSeconds","randomlyToMinutes","platforme","likesComment","respReplies","time","minutes","seconds","finalTime","minutesFrom","secondsFrom","finalTimeFrom","minutesTo","secondsTo","finalTimeTo","push","addPageEntity","getPageEntities","categories","length","map","cat","index","default","splice","getTeamMembers","sendMailTeam","emailTeamMember","nameTeamMember","inviteToken","post","email","nameUser","token","inviteExistingMember","member","inviteMember","deleteTeamMember","idFacebook","role","typePage","fire","title","confirmButtonText","connectInstagramPage","disconnectInstagramPage","deleteInstagramPage","makeOwnerInstagramPage","connectFacebookPage","disconnectFacebookPage","deleteFacebookPage","makeOwnerFacebookPage","purgePages","allPages","sycroPageWithWizard","wizardPage","found","p","selectedPage","name","picture_url","imageUrl","access_token","team","user","admins","selectSocialMediaPage","getFbData","allFbPages","Object","entries","key","tab","sort","nextPage","nameA","toLowerCase","nameB","payload2","JSON","stringify","getInstaData","allInstaPages","getAllPage","apiResp","facebookPages","instaPages","getAllPageConnected","resetAllPages","resetDashboard","resetSocialMediaSelections"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport { host } from '../../config';\r\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\r\n\r\n// Popup Config: \r\nconst popup = Swal.mixin({\r\n    customClass: {\r\n    confirmButton: 'wizard-pages-active-btn',\r\n    },\r\n    buttonsStyling: false\r\n});\r\n\r\n// Public reply:\r\nexport const sendPublicReply = (history,page,message,status) => {\r\n    return (dispatch) => {\r\n        \r\n        let objectToSend = null;\r\n        let pagePlatform = page.platform === \"fb\" ? \"facebook\" : \"instagram\";\r\n        \r\n        if(status) {\r\n            objectToSend = {\r\n                statut: true,\r\n                message: message,\r\n            }\r\n            \r\n        } else {\r\n            objectToSend = {\r\n                statut: false,\r\n                message: message,\r\n            }\r\n        }\r\n\r\n        console.log(\"Public Reply sending to nour\", objectToSend, page.idPage, pagePlatform);\r\n\r\n        return axios.put(host + `/api/v1/secure/pages/publicreply/${page.idPage}/${pagePlatform}`,objectToSend,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        // .then(res => {\r\n        //     console.log('Public Reply Response =>', res.data.data);\r\n\r\n        //     history.push('/pages');\r\n        // })\r\n        // .catch((err) => console.log(\"setPreferences err\", err))\r\n    }\r\n};\r\n\r\n// Set Language :\r\nexport const setLang = (lang) => {\r\n    return (dispatch) => {\r\n        // console.log(\"Lang !\", lang);\r\n        localStorage.setItem(\"modoLang\", lang);\r\n\r\n        dispatch({\r\n            type: 'SET_LANG',\r\n            payload: lang,\r\n        });\r\n    };\r\n};\r\n\r\n// Filtring Pages:\r\nexport const filterPages = (filterBy,Pages) => {\r\n    return (dispatch) => {\r\n\r\n        // console.log(\"Filter\", filterBy, \"Those =>\", Pages)\r\n        \r\n        if(filterBy === \"all\") {\r\n            dispatch({\r\n                type: 'FILTER_PAGES',\r\n                payload: [],\r\n            });\r\n        } else {\r\n            let filteredPages = Pages.filter((page) => page.platform === filterBy);\r\n            dispatch({\r\n                type: 'GET_ALL_PAGES',\r\n                payload: filteredPages,\r\n            });\r\n        };\r\n        \r\n    };\r\n};\r\n\r\nexport const resetFilterPages = () => {\r\n    return (dispatch) => {\r\n        dispatch({ type: 'RESET_FILTER_PAGES' });\r\n    };\r\n};\r\n\r\nexport const filterDashboardPosts = (Page,filter) => {\r\n    return (dispatch) => {\r\n\r\n        const fbHost = \"https://graph.facebook.com/v8.0\";\r\n\r\n        return axios.get(host + `/api/v1/secure/logEvent/dashbord/post/${Page.id}/${Page.accessToken}/${Page.platform}/${filter}`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('getDashboardPosts', res.data.data);\r\n            \r\n            dispatch({\r\n                type: 'GET_DASHBOARD_POSTS',\r\n                payload: res.data.data,\r\n            });\r\n            \r\n        })\r\n        // .catch((err) => console.log(\"err getDashboardPosts\", err))\r\n    };\r\n};\r\n\r\nexport const filterDashboardIntents = (Page,filter) => {\r\n    return (dispatch) => {\r\n\r\n        return axios.get(host + `/api/v1/secure/logEvent/dashbord/intent/${Page.id}/${Page.platform}/${filter}`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('Filtring dashboard intents RESULTS =>', res.data.data);\r\n            let limitedTo5 = res.data.data.slice(0,5);\r\n\r\n            dispatch({\r\n                type: 'GET_DASHBOARD',\r\n                payload: limitedTo5,\r\n            });\r\n        })\r\n        .catch((err) => console.log(\"Error Filtring dashboard intents\", err))\r\n    };\r\n};\r\n\r\nexport const getDashboardPosts = (Page) => {\r\n    return (dispatch) => {\r\n\r\n        const fbHost = \"https://graph.facebook.com/v8.0\";\r\n\r\n        return axios.get(host + `/api/v1/secure/logEvent/dashbord/post/${Page.id}/${Page.accessToken}/${Page.platform}/all`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('getDashboardPosts', res.data.data);\r\n            \r\n            dispatch({\r\n                type: 'GET_DASHBOARD_POSTS',\r\n                payload: res.data.data,\r\n            });\r\n            \r\n        })\r\n        .catch((err) => console.log(\"err getDashboardPosts\", err))\r\n    };\r\n};\r\n\r\nexport const getDashboard = (Page) => {\r\n    return (dispatch) => {\r\n\r\n        // console.log(\"Getting the dashboard with page =>\", Page.id);\r\n        let filter = \"all\";\r\n\r\n        return axios.get(host + `/api/v1/secure/logEvent/dashbord/intent/${Page.id}/${Page.platform}/${filter}`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('/logEvent/dashbord/intent/ Result =>', res.data.data);\r\n            let limitedTo5 = res.data.data.slice(0,5);\r\n\r\n            dispatch({\r\n                type: 'GET_DASHBOARD',\r\n                payload: limitedTo5,\r\n            });\r\n        })\r\n        .catch((err) => console.log(\"err getDashboard\", err))\r\n    };\r\n};\r\n\r\nexport const setPreferences = (history,spam,likes,delay,Page,Platform,exactlySeconds,exactlyMinutes,randomlyFromSeconds,randomlyFromMinutes,randomlyToSeconds,randomlyToMinutes) => {\r\n    return (dispatch) => {\r\n        \r\n        let objectToSend = null;\r\n        let pagePlatform = Platform === \"fb\" ? \"facebook\" : \"instagram\";\r\n        if(delay === \"immediatly\") {\r\n            objectToSend = {\r\n                platforme: pagePlatform,\r\n                likesComment:likes,\r\n                spam: spam,\r\n                respReplies: {\r\n                    statut: 'immediatly',\r\n                    time: [0]\r\n                }\r\n            }\r\n\r\n            console.log(\"Immediatly\",objectToSend);\r\n\r\n        } else if(delay === \"Exactly\") {\r\n            // Minutes + Seconds => X ms\r\n            let minutes = exactlyMinutes * 60000;\r\n            let seconds = exactlySeconds * 1000;\r\n            let finalTime = minutes + seconds;\r\n\r\n            objectToSend = {\r\n                platforme: pagePlatform,\r\n                likesComment:likes,\r\n                spam: spam,\r\n                respReplies: {\r\n                    statut: 'Exactly',\r\n                    time: [finalTime],\r\n                }\r\n            }\r\n\r\n            console.log(\"Exactly\",objectToSend);\r\n\r\n        } else {\r\n            // from Minutes + Seconds => X ms\r\n            // to Minutes + Seconds => X ms\r\n            let minutesFrom = randomlyFromMinutes * 60000;\r\n            let secondsFrom = randomlyFromSeconds * 1000;\r\n            let finalTimeFrom = minutesFrom + secondsFrom;\r\n            \r\n            let minutesTo = randomlyToMinutes * 60000;\r\n            let secondsTo = randomlyToSeconds * 1000;\r\n            let finalTimeTo = minutesTo + secondsTo;\r\n\r\n            objectToSend = {\r\n                platforme: pagePlatform,\r\n                likesComment:likes,\r\n                spam: spam,\r\n                respReplies: {\r\n                    statut: 'Randomly',\r\n                    time: [finalTimeFrom,finalTimeTo],\r\n                }\r\n            }\r\n\r\n            console.log(\"Randomly\",objectToSend);\r\n\r\n        }\r\n\r\n\r\n        console.log(\"Preferences sending to nour\", objectToSend);\r\n\r\n        return axios.put(host + `/api/v1/secure/pages/preference/${Page.idPage}/${pagePlatform}`,objectToSend,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('setPreferences Response =>', res.data.data);\r\n\r\n            history.push('/pages');\r\n        })\r\n        .catch((err) => console.log(\"setPreferences err\", err))\r\n    }\r\n};\r\n\r\nexport const addPageEntity = (page) => {\r\n    return (dispatch) => {\r\n        \r\n        return axios.get(host + `/api/v1/secure/pages/entities/add/${page.id}`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('add entity', res.data.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err addPageEntity\", err))\r\n    }\r\n};\r\n\r\nexport const getPageEntities = (page) => {\r\n    return (dispatch) => {\r\n        \r\n        return axios.get(host + `/api/v1/secure/project/get/entitiesproject/${page.platform}/${page.id}`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            // console.log('entities mtaaa page', res.data.data);\r\n            let categories = res.data.data;\r\n\r\n            if(categories.length > 0) {\r\n                categories.map((cat,index) =>\r\n                    cat.default === true && categories.splice(index,1)\r\n                );\r\n            };\r\n\r\n\r\n            dispatch({\r\n                type: 'GET_ENTITIES_OF_A_PAGE',\r\n                payload: categories\r\n            })\r\n        })\r\n        .catch((err) => console.log(\"err getPageEntities\", err))\r\n    }\r\n};\r\n\r\n// TEAM:\r\n\r\nexport const getTeamMembers = (Page) => {\r\n    return (dispatch) => {\r\n\r\n        return axios.get(host + `/api/v1/secure/membership/listUser/${Page.id}/${Page.platform}`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            // console.log('membership/listUser/ Response api  => ', res.data.data);\r\n\r\n            dispatch({\r\n                type: 'GET_TEAM',\r\n                payload: res.data.data\r\n            })\r\n        })\r\n        .catch((err) => console.log(\"membership/listUser/ error =>\", err))\r\n    }\r\n};\r\n\r\nexport const sendMailTeam = (Page, emailTeamMember, nameTeamMember, inviteToken) => {\r\n    return (dispatch) => {\r\n    \r\n        // console.log(\"Page\", Page);\r\n        // console.log(\"Email\", emailTeamMember);\r\n        // console.log(\"Name\", nameTeamMember);\r\n\r\n        return axios.post(host + `/api/v1/secure/membership/sendMail/${Page.id}/${Page.platform}`, {\r\n            email: emailTeamMember,\r\n            nameUser: nameTeamMember,\r\n            token: inviteToken,\r\n        },\r\n        {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('membership/sendMail/ Response api  => ', res.data.data)\r\n        })\r\n        .catch((err) => console.log(\"membership/sendMail/ error =>\", err))\r\n    }\r\n};\r\n\r\nexport const inviteExistingMember = (page,member) => {\r\n    return (dispatch) => {\r\n        \r\n        return axios.post(host + `/api/v1/secure/membership/addExistingMember/${page.id}/${page.platform}`, member, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nexport const inviteMember = (page,nameTeamMember) => {\r\n    return (dispatch) => {\r\n        \r\n        return axios.get(host + `/api/v1/secure/membership/get/${page.id}/${page.platform}/${nameTeamMember}`, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n    }\r\n};\r\n\r\nexport const deleteTeamMember = (page,idFacebook,role) => {\r\n    return (dispatch) => {\r\n       let typePage = page.platform;\r\n       let idPage = page.id;\r\n\r\n        return axios.post(host + `/api/v1/secure/membership/deleteMember/${role}`,{\r\n            idFacebook,\r\n            idPage,\r\n            typePage,\r\n        },{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('/membership/deleteMember/ response api', res.data.data);\r\n\r\n            dispatch({\r\n                type: 'GET_TEAM',\r\n                payload: res.data.data\r\n            })\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"/membership/deleteMember/ error api\", err)\r\n            popup.fire({\r\n                title: 'Error while deleting the member',\r\n                confirmButtonText: 'Retry',\r\n            });\r\n        })\r\n    }\r\n};\r\n\r\n\r\n/* INSTAGRAM */\r\nexport const connectInstagramPage = (idPage) => {\r\n    return (dispatch) => {\r\n\r\n        let page = {\r\n            id: idPage,\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pagesInsta/connect/`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        // .then(res => {\r\n        //     console.log('retour de connect page insta', res.data);\r\n            \r\n        //     // dispatch({\r\n        //     //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n        //     //     payload: res.data.data\r\n        //     // })\r\n        // })\r\n        // .catch((err) => console.log(\"err connect page insta\", err))\r\n    }\r\n};\r\n\r\nexport const disconnectInstagramPage = (idPage) => {\r\n    return (dispatch) => {\r\n     \r\n        let page = {\r\n            id: idPage,\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pagesInsta/disconnect/disconnect`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de disconnect page insta', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err disconnect page instagram\", err))\r\n    };\r\n};\r\n\r\nexport const deleteInstagramPage = (idPage) => {\r\n    return (dispatch) => {\r\n     \r\n        let page = {\r\n            id: idPage,\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pagesInsta/disconnect/delete`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de disconnect page insta', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err disconnect page instagram\", err))\r\n    };\r\n};\r\n\r\nexport const makeOwnerInstagramPage = (idPage,idFacebook) => {\r\n    return (dispatch) => {\r\n     \r\n        let page = {\r\n            id: idPage,\r\n            idFacebook: idFacebook // idFacebook of the new owner\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pagesInsta/disconnect/owner`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de owner page insta', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err owner page instagram\", err))\r\n    };\r\n};\r\n\r\n/* FACEBOOK */\r\nexport const connectFacebookPage = (idPage) => {\r\n    return (dispatch) => {\r\n        \r\n        let page ={\r\n            id: idPage,\r\n        };\r\n\r\n        return axios.post(host + `/api/v1/secure/pages/connect/`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        // .then(res => {\r\n        //     console.log('retour de connect page facebook', res.data);\r\n            \r\n        //     // dispatch({\r\n        //     //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n        //     //     payload: res.data.data\r\n        //     // })\r\n        // })\r\n        // .catch((err) => console.log(\"err de connect page facebook\", err))\r\n    }\r\n};\r\n\r\nexport const disconnectFacebookPage = (idPage) => {\r\n    return (dispatch) => {\r\n\r\n        let page = {\r\n            id: idPage,\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pages/disconnect/disconnect`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        // .then(res => {\r\n        //     console.log('retour de disconnect page facebok', res.data);\r\n            \r\n        //     // dispatch({\r\n        //     //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n        //     //     payload: res.data.data\r\n        //     // })\r\n        // })\r\n        // .catch((err) => console.log(\"err de disconnect page facebok\", err))\r\n\r\n    };\r\n};\r\n\r\nexport const deleteFacebookPage = (idPage,idFacebook) => {\r\n    return (dispatch) => {\r\n\r\n        let page = {\r\n            id: idPage,\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pages/disconnect/delete`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de disconnect page facebok', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err de disconnect page facebok\", err))\r\n\r\n    };\r\n};\r\n\r\nexport const makeOwnerFacebookPage = (idPage,idFacebook) => {\r\n    return (dispatch) => {\r\n     \r\n        let page = {\r\n            id: idPage,\r\n            idFacebook: idFacebook // idFacebook of the new owner\r\n        };\r\n        \r\n        return axios.post(host + `/api/v1/secure/pages/disconnect/owner`,page,{\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log('retour de owner page facebook', res.data);\r\n            \r\n            // dispatch({\r\n            //     type: 'GET_ENTITIES_OF_A_PAGE',\r\n            //     payload: res.data.data\r\n            // })\r\n        })\r\n        .catch((err) => console.log(\"err owner page facebook\", err))\r\n    };\r\n};\r\n\r\n\r\n\r\nexport const purgePages = (allPages, idPage) => {\r\n    return async (dispatch) => {        \r\n        console.log('idPage', idPage,'purge this =>', allPages ,);\r\n        // allPages.filter(page => page.idPage !== idPage);\r\n    \r\n        dispatch({\r\n            type: 'GET_ALL_PAGES',\r\n            payload: allPages.filter(page => page.idPage !== idPage),\r\n        })\r\n    }\r\n};\r\n\r\nexport const sycroPageWithWizard = (allPages,wizardPage) => {\r\n    return async (dispatch) => {\r\n        \r\n        // console.log('Lets search for', wizardPage);\r\n        // console.log('in', allPages);\r\n\r\n        let found = allPages.filter((p) => p.idPage === wizardPage.id);\r\n        let page = found[0];\r\n        \r\n        // console.log(\"Pagek ahaya =>\", page);\r\n\r\n        const selectedPage = {\r\n            platform: page.platform,\r\n            name: page.name,\r\n            picture_url : page.imageUrl ? page.imageUrl : `https://graph.facebook.com/v8.0/${page.idPage}/picture?access_token=${page.access_token}`,\r\n            id: page.idPage,\r\n            accessToken: page.access_token,\r\n            team: page.user,\r\n            admins: page.admins,\r\n            status: page.status,\r\n        };\r\n        \r\n        // console.log(\"You just sync a page with wizard\", selectedPage)\r\n\r\n        dispatch({\r\n            type: 'SELECT_SOCIAL_MEDIA_PAGE',\r\n            payload: selectedPage\r\n        })\r\n    }\r\n};\r\n\r\nexport const selectSocialMediaPage = (page,platform,status) => {\r\n    return async (dispatch) => {\r\n        /*\r\n            ALL STATUS :\r\n            \"listPageConnectedOwner\" => #E5007D\" || \"listPageInvite\" => #139216\" \r\n            \"listPageInviteAdmin\" => \"#199EE3\"  || \"listPageConnectedOtherTeam\" => #B4B4B4\"\r\n            \"listPageNotConnected\" => \"No Color\"\r\n        */\r\n\r\n        const selectedPage = {\r\n            platform: platform === \"fb\" ? \"facebook\" : \"instagram\",\r\n            name: page.name,\r\n            picture_url : page.imageUrl ? page.imageUrl : `https://graph.facebook.com/v8.0/${page.idPage}/picture?access_token=${page.access_token}`,\r\n            id: page.idPage,\r\n            accessToken: page.access_token,\r\n            team: page.user,\r\n            admins: page.admins,\r\n            status: status,\r\n        };\r\n        \r\n        // console.log(\"u just selected a page\", selectedPage)\r\n\r\n        dispatch({\r\n            type: 'SELECT_SOCIAL_MEDIA_PAGE',\r\n            payload: selectedPage\r\n        })\r\n    }\r\n};\r\n\r\nexport const getFbData = () => {\r\n    return async (dispatch) => {\r\n           \r\n        let token = await localStorage.getItem('authtoken');\r\n\r\n        return axios.get(host + '/api/v1/secure/pages/get/all/', {\r\n            headers: {\r\n                'authorization': 'Bearer ' + token\r\n            }\r\n        })\r\n        .then(res => {\r\n        \r\n            let allFbPages = [];\r\n            Object.entries(res.data.data).map( ([key, tab]) => \r\n                tab.map((page) => {\r\n                    page.status = key;\r\n                    allFbPages.push(page);\r\n            }));\r\n\r\n            allFbPages.sort((page,nextPage) =>  {\r\n                let  nameA = page.name.toLowerCase(), nameB = nextPage.name.toLowerCase()\r\n                //sort ascending \r\n                if (nameA < nameB) return -1; \r\n\r\n                if (nameA > nameB) return 1;\r\n                \r\n                return 0; // default return value (no sorting)\r\n            });\r\n\r\n            dispatch({\r\n                type: 'GET_FB_DATA',\r\n                payload: allFbPages,\r\n                payload2: res.data.data,\r\n            })\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"GetFbData err\", JSON.stringify(err))\r\n        })\r\n    }\r\n};\r\n\r\nexport const getInstaData = () => {\r\n    return async (dispatch) => {\r\n\r\n       let token = await localStorage.getItem('authtoken');\r\n        \r\n        return axios.get(host + '/api/v1/secure/pagesInsta/get/all/', {\r\n            headers: {\r\n                'authorization': 'Bearer ' + token\r\n            }\r\n        })\r\n        .then(res => {\r\n            // console.log('Instagram pages ya haider =>', res.data.data)\r\n            let allInstaPages = [];\r\n            \r\n            Object.entries(res.data.data).map( ([key, tab]) => \r\n                tab.map((page) => {\r\n                    page.status = key;\r\n                    allInstaPages.push(page);\r\n                }\r\n            ));\r\n\r\n            allInstaPages.sort((page,nextPage) =>  {                \r\n                let  nameA = page.name.toLowerCase(), nameB = nextPage.name.toLowerCase()\r\n                //sort ascending \r\n                if (nameA < nameB) return -1; \r\n\r\n                if (nameA > nameB) return 1;\r\n                \r\n                return 0; // default return value (no sorting)\r\n            });\r\n            \r\n            dispatch({\r\n                type: 'GET_INSTA_DATA',\r\n                payload: allInstaPages,\r\n                payload2: res.data.data\r\n            })\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"getInstaData error\", JSON.stringify(err))\r\n        })\r\n    }\r\n};\r\n\r\n\r\nexport const getAllPage = () => {\r\n    return async (dispatch) => {\r\n\r\n        let token = await localStorage.getItem('authtoken');\r\n\r\n        dispatch({ type: 'RESET_ALL_PAGES' })\r\n        \r\n        return axios.get(host + '/api/v1/secure/pages/test/get/all/', {\r\n            headers: {\r\n                'authorization': 'Bearer ' + token\r\n            }\r\n        })\r\n        .then(res => {\r\n            // console.log('getting all pages :D ===>', res.data.data)\r\n\r\n            let apiResp = res.data.data;\r\n            let allPages = [];\r\n\r\n            // Push the Fb Data:\r\n            Object.entries(apiResp.facebookPages).map( ([key, tab]) => \r\n                tab.map((page) => {\r\n                    page.platform = \"facebook\"\r\n                    page.status = key;\r\n                    allPages.push(page);\r\n            }));\r\n            \r\n            // Push the Insta Data:\r\n            Object.entries(apiResp.instaPages).map( ([key, tab]) => \r\n                tab.map((page) => {\r\n                    page.platform = \"instagram\"\r\n                    page.status = key;\r\n                    allPages.push(page);\r\n            }));\r\n\r\n            allPages.sort((page,nextPage) =>  {                \r\n                let  nameA = page.name.toLowerCase(), nameB = nextPage.name.toLowerCase()\r\n                //sort ascending \r\n                if (nameA < nameB) return -1; \r\n\r\n                if (nameA > nameB) return 1;\r\n                \r\n                return 0; // default return value (no sorting)\r\n            });\r\n            \r\n            // console.log(\"All Pages for test are Sorted=>\",allPages);\r\n\r\n            dispatch({\r\n                type: 'GET_ALL_PAGES',\r\n                payload: allPages,\r\n            })\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"getAllPage error ya nouuur\", err)\r\n        });\r\n\r\n    }\r\n};\r\n\r\nexport const getAllPageConnected = () => {\r\n    return async (dispatch) => {\r\n\r\n        let token = await localStorage.getItem('authtoken');\r\n        \r\n        dispatch({ type: 'RESET_ALL_PAGES' })\r\n        \r\n\r\n        return axios.get(host + '/api/v1/secure/pages/test/connect/get/all/', {\r\n            headers: {\r\n                'authorization': 'Bearer ' + token\r\n            }\r\n        })\r\n        .then(res => {\r\n            // console.log('getAllPageConnected ===>', res.data.data)\r\n\r\n            let apiResp = res.data.data;\r\n            let allPages = [];\r\n\r\n            // Push the Fb Data:\r\n            Object.entries(apiResp.facebookPages).map( ([key, tab]) => \r\n                tab.map((page) => {\r\n                    page.platform = \"facebook\"\r\n                    page.status = key;\r\n                    allPages.push(page);\r\n            }));\r\n            \r\n            Object.entries(apiResp.instaPages).map( ([key, tab]) => \r\n                tab.map((page) => {\r\n                    page.platform = \"instagram\"\r\n                    page.status = key;\r\n                    allPages.push(page);\r\n            }));\r\n            \r\n            allPages.sort((page,nextPage) =>  {                \r\n                let  nameA = page.name.toLowerCase(), nameB = nextPage.name.toLowerCase()\r\n                //sort ascending \r\n                if (nameA < nameB) return -1; \r\n\r\n                if (nameA > nameB) return 1;\r\n                \r\n                return 0; // default return value (no sorting)\r\n            });\r\n\r\n            // console.log(\"All Pages Connected Pages for test are Sorted =>\",allPages);\r\n\r\n            dispatch({\r\n                type: 'GET_ALL_PAGES',\r\n                payload: allPages,\r\n            })\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"getAllPageConnected error\", JSON.stringify(err))\r\n        });\r\n\r\n    }\r\n}\r\n\r\nexport const resetAllPages = () => {\r\n    return (dispatch) => dispatch({ type: 'RESET_ALL_PAGES' });\r\n};\r\n\r\nexport const resetDashboard = () => {\r\n    return (dispatch) => dispatch({ type: 'RESET_DASHBOARD' });\r\n};\r\n\r\nexport const resetSocialMediaSelections = () => {\r\n    return (dispatch) => dispatch({ type: 'RESET_SM_SELECTIONS' });\r\n};\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}