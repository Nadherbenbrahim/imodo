{"ast":null,"code":"import _regeneratorRuntime from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'./Login.css';import{FacebookProvider,LoginButton}from'react-facebook';import axios from'axios';import{host}from'../../config';import Swal from'sweetalert2/dist/sweetalert2.js';import{Redirect,useParams}from\"react-router-dom\";function Facebook(props){var content=props.content,type=props.type;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),redirect=_useState2[0],setRedirect=_useState2[1];var _useParams=useParams(),tokenMembership=_useParams.tokenMembership;// Popup config\nvar swalWithBootstrapButtons=Swal.mixin({customClass:{confirmButton:'wizard-pages-active-btn-alert'},buttonsStyling:false});var handleResponse=function handleResponse(data){var token=data.tokenDetail.accessToken;var tokenMemberShip=tokenMembership?tokenMembership:null;axios.post(host+'/api/v1/auth/login/facebook',{token:token,tokenMemberShip:tokenMemberShip}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(resdata){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return localStorage.setItem('authtoken',resdata.data.data.user.idFacebook);case 2:_context.next=4;return localStorage.setItem('userData',JSON.stringify(resdata.data.data));case 4:setRedirect(true);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){console.log(\"Login Error =>\",err);swalWithBootstrapButtons.fire({icon:'error',title:'Connexion error with the server try again !',confirmButtonText:'Okay'});});};var handleError=function handleError(error){console.log(error);};return/*#__PURE__*/React.createElement(React.Fragment,null,redirect&&/*#__PURE__*/React.createElement(Redirect,{to:\"/home/pages\"}),/*#__PURE__*/React.createElement(FacebookProvider,{appId:\"783983335073350\",version:\"v3.0\"},/*#__PURE__*/React.createElement(LoginButton,{scope:\"public_profile,publish_pages,email,pages_messaging,pages_manage_cta,pages_show_list,manage_pages,instagram_basic,instagram_manage_comments,ads_management,ads_read\",onCompleted:handleResponse,onError:handleError,className:type===\"nav\"?\"facebookbtn\":type===\"signUp\"?\"button-free-trial\":\"facebookbtnLanding\"},/*#__PURE__*/React.createElement(\"span\",null,content))));}export default Facebook;","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/app/Login/Facebook.js"],"names":["React","useEffect","useState","FacebookProvider","LoginButton","axios","host","Swal","Redirect","useParams","Facebook","props","content","type","redirect","setRedirect","tokenMembership","swalWithBootstrapButtons","mixin","customClass","confirmButton","buttonsStyling","handleResponse","data","token","tokenDetail","accessToken","tokenMemberShip","post","then","resdata","localStorage","setItem","user","idFacebook","JSON","stringify","catch","err","console","log","fire","icon","title","confirmButtonText","handleError","error"],"mappings":"ybAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAO,aAAP,CACA,OAASC,gBAAT,CAA2BC,WAA3B,KAA8C,gBAA9C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,cAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,iCAAjB,CAGA,OACEC,QADF,CAEEC,SAFF,KAGO,kBAHP,CAKA,QAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,IAGrBC,CAAAA,OAHqB,CAKnBD,KALmB,CAGrBC,OAHqB,CAIrBC,IAJqB,CAKnBF,KALmB,CAIrBE,IAJqB,eAOSX,QAAQ,CAAC,KAAD,CAPjB,wCAOhBY,QAPgB,eAONC,WAPM,8BAQGN,SAAS,EARZ,CAQjBO,eARiB,YAQjBA,eARiB,CAUvB;AACA,GAAMC,CAAAA,wBAAwB,CAAGV,IAAI,CAACW,KAAL,CAAW,CAC1CC,WAAW,CAAE,CACXC,aAAa,CAAE,+BADJ,CAD6B,CAI1CC,cAAc,CAAE,KAJ0B,CAAX,CAAjC,CASA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,IAAD,CAAU,CAE/B,GAAIC,CAAAA,KAAK,CAAGD,IAAI,CAACE,WAAL,CAAiBC,WAA7B,CACA,GAAIC,CAAAA,eAAe,CAAGX,eAAe,CAAGA,eAAH,CAAqB,IAA1D,CAEAX,KAAK,CAACuB,IAAN,CAAWtB,IAAI,CAAG,6BAAlB,CAAiD,CAC7CkB,KAAK,CAALA,KAD6C,CAE7CG,eAAe,CAAfA,eAF6C,CAAjD,EAGGE,IAHH,0FAGS,iBAAMC,OAAN,wIAEDC,CAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCF,OAAO,CAACP,IAAR,CAAaA,IAAb,CAAkBU,IAAlB,CAAuBC,UAAzD,CAFC,8BAGDH,CAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAgCG,IAAI,CAACC,SAAL,CAAeN,OAAO,CAACP,IAAR,CAAaA,IAA5B,CAAhC,CAHC,QAIPR,WAAW,CAAC,IAAD,CAAX,CAJO,sDAHT,gEASGsB,KATH,CASS,SAACC,GAAD,CAAS,CAChBC,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8BF,GAA9B,EACArB,wBAAwB,CAACwB,IAAzB,CAA8B,CAC5BC,IAAI,CAAE,OADsB,CAE5BC,KAAK,CAAE,6CAFqB,CAG5BC,iBAAiB,CAAE,MAHS,CAA9B,EAKD,CAhBD,EAkBD,CAvBD,CA0BA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC7BP,OAAO,CAACC,GAAR,CAAYM,KAAZ,EACD,CAFD,CAIA,mBACE,wCACIhC,QAAQ,eAAI,oBAAC,QAAD,EAAU,EAAE,CAAC,aAAb,EADhB,cAGE,oBAAC,gBAAD,EAAkB,KAAK,CAAC,iBAAxB,CAA0C,OAAO,CAAC,MAAlD,eACE,oBAAC,WAAD,EACE,KAAK,CAAC,oKADR,CAEE,WAAW,CAAEQ,cAFf,CAGE,OAAO,CAAEuB,WAHX,CAKE,SAAS,CAAEhC,IAAI,GAAK,KAAT,CAAiB,aAAjB,CAAiCA,IAAI,GAAG,QAAP,CAAkB,mBAAlB,CAAyC,oBALvF,eAOE,gCAAOD,OAAP,CAPF,CADF,CAHF,CADF,CAiBD,CAED,cAAeF,CAAAA,QAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport './Login.css';\nimport { FacebookProvider, LoginButton } from 'react-facebook';\nimport axios from 'axios';\nimport { host } from '../../config';\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\n\n\nimport {\n  Redirect,\n  useParams,\n} from \"react-router-dom\";\n\nfunction Facebook(props) {\n\n  let {\n    content,\n    type,\n  } = props;\n\n  const [redirect, setRedirect] = useState(false);\n  let { tokenMembership } = useParams();\n  \n  // Popup config\n  const swalWithBootstrapButtons = Swal.mixin({\n    customClass: {\n      confirmButton: 'wizard-pages-active-btn-alert',\n    },\n    buttonsStyling: false\n  });\n\n\n\n  const handleResponse = (data) => {\n    \n    let token = data.tokenDetail.accessToken;\n    let tokenMemberShip = tokenMembership ? tokenMembership : null;\n\n    axios.post(host + '/api/v1/auth/login/facebook', {\n        token,\n        tokenMemberShip\n    }).then( async resdata => {\n      // console.log('Login =>', resdata)\n      await localStorage.setItem('authtoken', resdata.data.data.user.idFacebook)\n      await localStorage.setItem('userData',JSON.stringify(resdata.data.data));\n      setRedirect(true);\n\n    }).catch((err) => {\n      console.log(\"Login Error =>\", err)\n      swalWithBootstrapButtons.fire({\n        icon: 'error',\n        title: 'Connexion error with the server try again !',\n        confirmButtonText: 'Okay',\n      });\n    })\n\n  };\n\n\n  const handleError = (error) => {\n    console.log(error);\n  }\n\n  return (\n    <>\n      { redirect && <Redirect to=\"/home/pages\" /> }\n\n      <FacebookProvider appId=\"783983335073350\" version=\"v3.0\">\n        <LoginButton\n          scope=\"public_profile,publish_pages,email,pages_messaging,pages_manage_cta,pages_show_list,manage_pages,instagram_basic,instagram_manage_comments,ads_management,ads_read\"\n          onCompleted={handleResponse}\n          onError={handleError}\n          \n          className={type === \"nav\" ? \"facebookbtn\" : type===\"signUp\" ? \"button-free-trial\" :  \"facebookbtnLanding\" }\n        >\n          <span>{content}</span>\n        </LoginButton>\n      </FacebookProvider>\n    </>\n  );\n}\n\nexport default Facebook;\n"]},"metadata":{},"sourceType":"module"}