{"ast":null,"code":"var _jsxFileName = \"/usr/work/smart_front_oussema/src/app/Login/Facebook.js\";\nimport React, { useState } from 'react';\nimport './Login.css';\nimport { withRouter } from 'react-router-dom';\nimport { FacebookProvider, LoginButton } from 'react-facebook';\nimport { connect } from 'react-redux';\nimport { loginAction, fbdata } from '../../actions';\nimport axios from 'axios';\nimport { showLoading, hideLoading } from 'react-redux-loading-bar';\nimport { host } from '../../config';\nimport { Redirect } from \"react-router-dom\";\n\nfunction Facebook(props) {\n  const [redirect, setRedirect] = useState(false);\n\n  const handleResponse = data => {\n    // props.fbdata(data)\n    // props.login(data.tokenDetail.accessToken)\n    // console.log('facebookdata ', data)\n    let token = data.tokenDetail.accessToken;\n    let tokenMemberShip = null;\n    axios.post(host + '/api/v1/auth/login/facebook', {\n      token,\n      tokenMemberShip\n    }).then(async resdata => {\n      console.log('Login =>', resdata);\n      await localStorage.setItem('authtoken', resdata.data.data.user.idFacebook);\n      await localStorage.setItem('userData', JSON.stringify(resdata.data.data));\n      setRedirect(true); // dispatch(hideLoading())\n      // ownProps.history.push('dashboard')\n      // dispatch({\n      //     type: 'LOGIN',\n      //     user: resdata\n      // })\n    }).catch(err => console.log(\"Login Error =>\", err));\n  };\n\n  const handleError = error => {\n    console.log(error);\n  };\n\n  return React.createElement(React.Fragment, null, redirect && React.createElement(Redirect, {\n    to: \"/home\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), React.createElement(FacebookProvider, {\n    appId: \"783983335073350\",\n    version: \"v3.0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(LoginButton, {\n    scope: \"public_profile,publish_pages,email,pages_messaging,pages_manage_cta,pages_show_list,manage_pages,instagram_basic,instagram_manage_comments\",\n    onCompleted: handleResponse,\n    onError: handleError,\n    className: \"facebookbtn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, props.content.toUpperCase()))));\n}\n\nconst mapStateToProps = state => ({// user: state.userdata || {}\n});\n\nconst mapDispatchToProps = (dispatch, owenProps) => {\n  return {\n    login: token => dispatch(loginAction(token, owenProps)),\n    fbdata: data => dispatch(fbdata(data))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Facebook));","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/app/Login/Facebook.js"],"names":["React","useState","withRouter","FacebookProvider","LoginButton","connect","loginAction","fbdata","axios","showLoading","hideLoading","host","Redirect","Facebook","props","redirect","setRedirect","handleResponse","data","token","tokenDetail","accessToken","tokenMemberShip","post","then","resdata","console","log","localStorage","setItem","user","idFacebook","JSON","stringify","catch","err","handleError","error","content","toUpperCase","mapStateToProps","state","mapDispatchToProps","dispatch","owenProps","login"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport './Login.css';\nimport { withRouter } from 'react-router-dom';\nimport { FacebookProvider, LoginButton } from 'react-facebook';\nimport { connect } from 'react-redux';\nimport { loginAction, fbdata } from '../../actions'\nimport axios from 'axios';\nimport { showLoading, hideLoading } from 'react-redux-loading-bar';\n\nimport { host } from '../../config';\n\nimport {\n  Redirect,\n} from \"react-router-dom\";\n\n\nfunction Facebook(props) {\n\n  const [redirect, setRedirect] = useState(false);\n\n  const handleResponse = (data) => {\n    // props.fbdata(data)\n    // props.login(data.tokenDetail.accessToken)\n    \n    // console.log('facebookdata ', data)\n    \n    let token = data.tokenDetail.accessToken;\n    let tokenMemberShip = null;\n\n    axios.post(host + '/api/v1/auth/login/facebook', {\n        token,\n        tokenMemberShip\n    }).then( async resdata => {\n        console.log('Login =>', resdata)\n\n        await localStorage.setItem('authtoken', resdata.data.data.user.idFacebook)\n        await localStorage.setItem('userData',JSON.stringify(resdata.data.data));\n        \n        setRedirect(true);\n\n\n        // dispatch(hideLoading())\n   \n        // ownProps.history.push('dashboard')\n    \n        // dispatch({\n        //     type: 'LOGIN',\n        //     user: resdata\n        // })\n    }).catch((err) => console.log(\"Login Error =>\",err) )\n  \n  }\n\n  const handleError = (error) => {\n    console.log(error);\n  }\n\n  return (\n    <>\n      {redirect && <Redirect to=\"/home\" />}\n      <FacebookProvider appId=\"783983335073350\" version=\"v3.0\">\n        <LoginButton\n          scope=\"public_profile,publish_pages,email,pages_messaging,pages_manage_cta,pages_show_list,manage_pages,instagram_basic,instagram_manage_comments\"\n          onCompleted={handleResponse}\n          onError={handleError}\n          className=\"facebookbtn\"\n        >\n          <span>{props.content.toUpperCase()}</span>\n        </LoginButton>\n      </FacebookProvider>\n    </>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  // user: state.userdata || {}\n})\n\nconst mapDispatchToProps = (dispatch, owenProps) => {\n  return {\n    login: (token) => dispatch(loginAction(token, owenProps)),\n    fbdata: (data) => dispatch(fbdata(data))\n  }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Facebook));\n"]},"metadata":{},"sourceType":"module"}