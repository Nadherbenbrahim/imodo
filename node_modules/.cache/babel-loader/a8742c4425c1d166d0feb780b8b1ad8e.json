{"ast":null,"code":"import React,{useEffect}from'react';import{connect}from'react-redux';import{nextWizardStep,getWizardPagesPosts,getWizardActivePosts,setWizardSelectedPost,prevWizardStep,addProject,resetWizardPageSelected}from'../../../redux/actions/wizardActions';import{Row,Col,Image}from'react-bootstrap';import Lottie from'react-lottie';import Swal from'sweetalert2/dist/sweetalert2.js';import ReactTooltip from'react-tooltip';// Translations\nimport{trans}from'../../../Translations';import animationData from'../../../assets/json/loading.json';import{ReactComponent as IconAwesomeSort}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/images/home/Icon-awesome-sort.svg\";function WizardPosts(props){var lang=props.lang;var defaultOptions={loop:true,autoplay:true,animationData:animationData,rendererSettings:{preserveAspectRatio:'xMidYMid slice'}};useEffect(function(){window.scrollTo(0,0);props.getWizardPagesPosts(props.wizardSelectedPage);props.getWizardActivePosts(props.wizardSelectedPage);},[]);var isPostActive=function isPostActive(idPost,wizardActivePosts){if(wizardActivePosts){var found=wizardActivePosts.find(function(activePost){return activePost.post.idPost===idPost;});if(found){if(found.intents.length===0){return false;}else if(found.trained&&found.live){return trans[lang].wizardPosts.active;}else if(found.trained&&!found.live){return trans[lang].wizardPosts.notActive;}else{return trans[lang].wizardPosts.draft;}}else{return false;}}else return false;};var checkNextStep=function checkNextStep(){if(props.wizardSelectedPost===null){var swalWithBootstrapButtons=Swal.mixin({customClass:{confirmButton:'wizard-pages-active-btn-alert'},buttonsStyling:false});swalWithBootstrapButtons.fire({title:trans[lang].wizardPosts.selectPostError,confirmButtonText:trans[lang].wizardPosts.retry});}};var nextMove=function nextMove(post){props.setWizardSelectedPost(post);props.addProject(props.wizardSelectedPage,post).then(function(){props.nextWizardStep();});};var handleBackFromStep2To1=function handleBackFromStep2To1(){props.resetWizardPageSelected();props.prevWizardStep();};return/*#__PURE__*/React.createElement(Row,{className:\"d-flex mt-5\"},/*#__PURE__*/React.createElement(Col,{lg:1}),/*#__PURE__*/React.createElement(Col,{lg:9,className:\"wizard-pages-container\",style:{backgroundColor:'white'}},/*#__PURE__*/React.createElement(Row,{className:\"my-5 mx-4\"},/*#__PURE__*/React.createElement(Col,{lg:12,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto wizard-pages-title\"},trans[lang].wizardPosts.selectPost)),/*#__PURE__*/React.createElement(Col,{lg:12,className:\"mt-5 mb-5\"},/*#__PURE__*/React.createElement(\"div\",null,props.wizardPagePosts?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:12,style:{borderBottom:'1px solid #EBEDF0'}},/*#__PURE__*/React.createElement(Row,{className:\"py-2\"},/*#__PURE__*/React.createElement(Col,{lg:4,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"my-auto wizard-pages-page-title-table\"},trans[lang].wizardPosts.post)),/*#__PURE__*/React.createElement(Col,{lg:2,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"m-auto wizard-pages-page-title-table\"},trans[lang].wizardPosts.type,/*#__PURE__*/React.createElement(IconAwesomeSort,{className:\"ml-1\",width:\"10\",height:\"10\"}))),/*#__PURE__*/React.createElement(Col,{lg:3,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"m-auto wizard-pages-page-title-table\"},trans[lang].wizardPosts.published,/*#__PURE__*/React.createElement(IconAwesomeSort,{className:\"ml-1\",width:\"10\",height:\"10\"}))),/*#__PURE__*/React.createElement(Col,{lg:3,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"m-auto wizard-pages-page-title-table\"},trans[lang].wizardPosts.agentStatus,/*#__PURE__*/React.createElement(IconAwesomeSort,{className:\"ml-1\",width:\"10\",height:\"10\"}))))),/*#__PURE__*/React.createElement(Col,{lg:12},props.wizardPagePosts.map(function(post,index){var createdTime=new Date(Date.parse(post.created_time));var publishedDate=\"\".concat(createdTime.getDate(),\"/\").concat(createdTime.getMonth()+1,\"/\").concat(createdTime.getFullYear());var checkedMinutes=createdTime.getMinutes()<10?\"0\"+createdTime.getMinutes():createdTime.getMinutes();var publishedTime=\"\".concat(createdTime.getHours(),\":\").concat(checkedMinutes);return/*#__PURE__*/React.createElement(Row,{className:\"py-2\",key:index,onClick:function onClick(){return props.wizardActivePosts&&isPostActive(post.id,props.wizardActivePosts)?null:nextMove(post);},style:{cursor:'pointer',borderBottom:'1px solid #EBEDF0'},\"data-for\":props.wizardActivePosts&&isPostActive(post.id,props.wizardActivePosts)?\"postTip\":\"noIID\",\"data-tip\":trans[lang].wizardPosts.accessPost},/*#__PURE__*/React.createElement(ReactTooltip,{id:\"postTip\",textColor:\"#fff\",backgroundColor:\"#E5007D\"}),/*#__PURE__*/React.createElement(Col,{lg:4,className:\"d-flex \"},post.picture?/*#__PURE__*/React.createElement(Image,{src:post.picture,className:\"my-auto\",style:{maxWidth:'38px'}}):/*#__PURE__*/React.createElement(Image,{src:props.wizardSelectedPage.picture_url,className:\"my-auto\",style:{maxWidth:'38px'}}),/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto ml-2 wizard-pages-page-title\",style:{color:props.wizardActivePosts&&isPostActive(post.id,props.wizardActivePosts)?'#818E94':'#3B5998'}},post.message&&post.message.length>40?post.message.substring(0,10)+\"...\":post.message?post.message:props.wizardSelectedPage.name)),/*#__PURE__*/React.createElement(Col,{lg:2,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto wizard-posts-status-text\"},post.type)),/*#__PURE__*/React.createElement(Col,{lg:3,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex-column m-auto\"},/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto wizard-pages-page-date\"},publishedDate),/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto wizard-pages-page-time\"},publishedTime))),/*#__PURE__*/React.createElement(Col,{lg:3,className:\"d-flex\"},props.wizardActivePosts&&isPostActive(post.id,props.wizardActivePosts)?/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto wizard-posts-status-text\",style:{color:'#E5137D'}},isPostActive(post.id,props.wizardActivePosts)):/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto wizard-posts-status-text\"},trans[lang].wizardPosts.noAgent)));}))):/*#__PURE__*/React.createElement(Row,{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"m-auto\"},/*#__PURE__*/React.createElement(Lottie,{options:defaultOptions,width:200})))))),/*#__PURE__*/React.createElement(Col,{lg:12},/*#__PURE__*/React.createElement(Row,{className:\"mb-3\"},/*#__PURE__*/React.createElement(Col,{lg:6},/*#__PURE__*/React.createElement(Row,{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-pages-inactive-btn d-flex py-2 px-4 ml-3 mr-auto my-auto\",onClick:handleBackFromStep2To1},trans[lang].wizardPosts.back))),/*#__PURE__*/React.createElement(Col,{lg:6},/*#__PURE__*/React.createElement(Row,{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-pages-inactive-btn ml-auto py-2 px-4 mr-3\"},trans[lang].wizardPosts.saveDraft),/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-pages-active-btn py-2 px-4 mr-3\",onClick:function onClick(){return checkNextStep();}},trans[lang].wizardPosts.next)))))),/*#__PURE__*/React.createElement(Col,{lg:2}));}var mapStateToProps=function mapStateToProps(state){return{lang:state.socialMediaR.lang,wizardStep:state.wizardR.wizardStep,wizardSelectedPage:state.wizardR.wizardSelectedPage,wizardSelectedPost:state.wizardR.wizardSelectedPost,wizardPagePosts:state.wizardR.wizardPagePosts,wizardActivePosts:state.wizardR.wizardActivePosts};};export default connect(mapStateToProps,{nextWizardStep:nextWizardStep,getWizardPagesPosts:getWizardPagesPosts,getWizardActivePosts:getWizardActivePosts,setWizardSelectedPost:setWizardSelectedPost,prevWizardStep:prevWizardStep,addProject:addProject,resetWizardPageSelected:resetWizardPageSelected})(WizardPosts);","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/app/Home/AutoWizard/WizardPosts.js"],"names":["React","useEffect","connect","nextWizardStep","getWizardPagesPosts","getWizardActivePosts","setWizardSelectedPost","prevWizardStep","addProject","resetWizardPageSelected","Row","Col","Image","Lottie","Swal","ReactTooltip","trans","animationData","WizardPosts","props","lang","defaultOptions","loop","autoplay","rendererSettings","preserveAspectRatio","window","scrollTo","wizardSelectedPage","isPostActive","idPost","wizardActivePosts","found","find","activePost","post","intents","length","trained","live","wizardPosts","active","notActive","draft","checkNextStep","wizardSelectedPost","swalWithBootstrapButtons","mixin","customClass","confirmButton","buttonsStyling","fire","title","selectPostError","confirmButtonText","retry","nextMove","then","handleBackFromStep2To1","backgroundColor","selectPost","wizardPagePosts","borderBottom","type","published","agentStatus","map","index","createdTime","Date","parse","created_time","publishedDate","getDate","getMonth","getFullYear","checkedMinutes","getMinutes","publishedTime","getHours","id","cursor","accessPost","picture","maxWidth","picture_url","color","message","substring","name","noAgent","back","saveDraft","next","mapStateToProps","state","socialMediaR","wizardStep","wizardR"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\r\n\r\nimport { connect } from 'react-redux';\r\nimport { nextWizardStep, getWizardPagesPosts, getWizardActivePosts, setWizardSelectedPost,prevWizardStep, addProject, resetWizardPageSelected } from '../../../redux/actions/wizardActions';\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Image,\r\n} from 'react-bootstrap';\r\n\r\nimport Lottie from 'react-lottie';\r\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\n// Translations\r\nimport { trans } from '../../../Translations';\r\n\r\nimport animationData from '../../../assets/json/loading.json';\r\nimport {ReactComponent as IconAwesomeSort} from '../../../assets/images/home/Icon-awesome-sort.svg';\r\n\r\nfunction WizardPosts(props) {\r\n\r\n    let { lang } = props;\r\n    \r\n    const defaultOptions = {\r\n        loop: true,\r\n        autoplay: true, \r\n        animationData: animationData,\r\n        rendererSettings: {\r\n          preserveAspectRatio: 'xMidYMid slice'\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n        props.getWizardPagesPosts(props.wizardSelectedPage);\r\n        props.getWizardActivePosts(props.wizardSelectedPage);\r\n    }, []);\r\n\r\n    const isPostActive = (idPost,wizardActivePosts) => {\r\n        if(wizardActivePosts) {\r\n            let found = wizardActivePosts.find(activePost => activePost.post.idPost === idPost);\r\n            \r\n            if(found) {\r\n\r\n                if(found.intents.length === 0) {\r\n                    return false;\r\n                } else if(found.trained && found.live) {\r\n                    return trans[lang].wizardPosts.active\r\n                } else if (found.trained && !found.live) {\r\n                    return trans[lang].wizardPosts.notActive\r\n                } else {\r\n                    return trans[lang].wizardPosts.draft\r\n                }\r\n            }\r\n            else { \r\n               return false;\r\n            }\r\n        } else return false;\r\n\r\n    };\r\n\r\n    const checkNextStep = () => {\r\n        if(props.wizardSelectedPost === null) {\r\n            const swalWithBootstrapButtons = Swal.mixin({\r\n                customClass: {\r\n                  confirmButton: 'wizard-pages-active-btn-alert',\r\n                },\r\n                buttonsStyling: false\r\n            });\r\n            swalWithBootstrapButtons.fire({\r\n                title: trans[lang].wizardPosts.selectPostError,\r\n                confirmButtonText: trans[lang].wizardPosts.retry,\r\n            });\r\n        }\r\n    };\r\n\r\n    const nextMove = (post) => {\r\n        props.setWizardSelectedPost(post); \r\n        props.addProject(props.wizardSelectedPage,post)\r\n        .then(() =>{\r\n            props.nextWizardStep();\r\n        });\r\n    };\r\n\r\n    const handleBackFromStep2To1 = () => {\r\n        props.resetWizardPageSelected();\r\n        props.prevWizardStep();\r\n    };\r\n\r\n    return (\r\n    <Row className=\"d-flex mt-5\">  \r\n        <Col lg={1} />\r\n\r\n        <Col lg={9} className=\"wizard-pages-container\" style={{backgroundColor: 'white'}}>\r\n            {/* Title */}\r\n            <Row className=\"my-5 mx-4\">\r\n                <Col lg={12} className=\"d-flex\">\r\n                    <p className=\"my-auto wizard-pages-title\">{trans[lang].wizardPosts.selectPost}</p>\r\n                </Col>\r\n                \r\n                {/* POSTS LIST */}\r\n                <Col lg={12} className=\"mt-5 mb-5\">\r\n                    <div>\r\n                    {props.wizardPagePosts\r\n                    ?\r\n                    (\r\n                    <Row>\r\n                        <Col lg={12} style={{borderBottom: '1px solid #EBEDF0'}}>\r\n                            <Row className=\"py-2\" >\r\n                                <Col lg={4} className=\"d-flex\">\r\n                                    <div className=\"my-auto wizard-pages-page-title-table\" >{trans[lang].wizardPosts.post}</div>\r\n                                </Col>    \r\n                                \r\n                                <Col lg={2} className=\"d-flex\" >\r\n                                    <div className=\"m-auto wizard-pages-page-title-table\" >\r\n                                        {trans[lang].wizardPosts.type}<IconAwesomeSort className={\"ml-1\"}  width=\"10\" height=\"10\" />\r\n                                    </div>\r\n                                </Col>    \r\n\r\n                                <Col lg={3} className=\"d-flex\" >\r\n                                    <div className=\"m-auto wizard-pages-page-title-table\" >\r\n                                        {trans[lang].wizardPosts.published}<IconAwesomeSort className={\"ml-1\"}  width=\"10\" height=\"10\" />\r\n                                    </div>\r\n                                </Col>    \r\n\r\n                                <Col lg={3} className=\"d-flex\" >\r\n                                    <div className=\"m-auto wizard-pages-page-title-table\" >\r\n                                        {trans[lang].wizardPosts.agentStatus}<IconAwesomeSort className={\"ml-1\"}  width=\"10\" height=\"10\" />\r\n                                    </div>\r\n                                </Col>    \r\n                            </Row>\r\n                        </Col>\r\n                        \r\n                        <Col lg={12}>\r\n                        {props.wizardPagePosts.map( (post,index) => {\r\n                            let createdTime = new Date(Date.parse(post.created_time));\r\n                            let publishedDate = `${createdTime.getDate()}/${createdTime.getMonth()+ 1}/${createdTime.getFullYear()}`;\r\n                            let checkedMinutes = createdTime.getMinutes() < 10 ? \"0\" + createdTime.getMinutes() : createdTime.getMinutes();\r\n                            let publishedTime = `${createdTime.getHours()}:${checkedMinutes}`\r\n                        \r\n                            return (\r\n                                <Row \r\n                                    className=\"py-2\" \r\n                                    key={index}  \r\n                                    onClick={() => props.wizardActivePosts && isPostActive(post.id,props.wizardActivePosts) ? null : nextMove(post) } \r\n                                    style={{ cursor: 'pointer', borderBottom: '1px solid #EBEDF0' }}\r\n                                    data-for={props.wizardActivePosts && isPostActive(post.id,props.wizardActivePosts) ? \"postTip\" : \"noIID\"} \r\n                                    data-tip={trans[lang].wizardPosts.accessPost}\r\n                                >\r\n\r\n                                    <ReactTooltip id={\"postTip\"} textColor='#fff' backgroundColor='#E5007D' />\r\n\r\n                                    <Col lg={4} className=\"d-flex \">\r\n                                        {\r\n                                        post.picture\r\n                                        ?\r\n                                        <Image src={post.picture} className=\"my-auto\" style={{maxWidth: '38px'}} />\r\n                                        :\r\n                                        <Image src={props.wizardSelectedPage.picture_url} className=\"my-auto\" style={{maxWidth: '38px'}} />\r\n                                        }\r\n                                        <p className=\"my-auto ml-2 wizard-pages-page-title\" style={{ color: props.wizardActivePosts && isPostActive(post.id,props.wizardActivePosts) ? '#818E94' : '#3B5998',  }}>\r\n                                            {post.message && post.message.length > 40\r\n                                            ?\r\n                                            post.message.substring(0,10) + \"...\"\r\n                                            :                                                        \r\n                                            post.message\r\n                                            ?\r\n                                            post.message\r\n                                            :\r\n                                            props.wizardSelectedPage.name\r\n                                            }\r\n                                        </p>\r\n                                    </Col>\r\n\r\n                                    <Col lg={2} className=\"d-flex\">\r\n                                        <p className=\"m-auto wizard-posts-status-text\">{post.type}</p>\r\n                                    </Col>\r\n\r\n                                    <Col lg={3} className=\"d-flex\">\r\n                                        <div className=\"flex-column m-auto\">\r\n                                            <p className=\"m-auto wizard-pages-page-date\">{publishedDate}</p>\r\n                                            <p  className=\"m-auto wizard-pages-page-time\">{publishedTime}</p>\r\n                                        </div>\r\n                                    </Col>\r\n\r\n                                    <Col lg={3} className=\"d-flex\" >\r\n                                        {props.wizardActivePosts && isPostActive(post.id,props.wizardActivePosts) \r\n                                        ? \r\n                                        <p className=\"m-auto wizard-posts-status-text\" style={{color: '#E5137D'}}>{isPostActive(post.id,props.wizardActivePosts)}</p>\r\n                                        : \r\n                                        <p className=\"m-auto wizard-posts-status-text\">{trans[lang].wizardPosts.noAgent}</p>   \r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            )})\r\n                        }\r\n                        </Col>\r\n                    </Row>\r\n                    )\r\n                    : \r\n                    (\r\n                    <Row className=\"d-flex\">\r\n                        <div className=\"m-auto\">\r\n                            <Lottie options={defaultOptions} width={200} />\r\n                        </div>\r\n                    </Row>\r\n                    )\r\n                    }\r\n                </div>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/* BTNS */}\r\n            <Col lg={12}>\r\n                <Row className=\"mb-3\">\r\n                    <Col lg={6}>\r\n                        <Row className=\"d-flex\">\r\n                            <div className=\"wizard-pages-inactive-btn d-flex py-2 px-4 ml-3 mr-auto my-auto\" onClick={handleBackFromStep2To1}>\r\n                                {trans[lang].wizardPosts.back}\r\n                            </div>\r\n                        </Row>\r\n                    </Col>\r\n\r\n                    <Col lg={6}>\r\n                        <Row className=\"d-flex\">\r\n                            <div className={\"wizard-pages-inactive-btn ml-auto py-2 px-4 mr-3\"}>{trans[lang].wizardPosts.saveDraft}</div>\r\n                            \r\n                            <div className={\"wizard-pages-active-btn py-2 px-4 mr-3\"} onClick={() => checkNextStep()}>\r\n                                {trans[lang].wizardPosts.next}\r\n                            </div>\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n            </Col>\r\n        </Col>\r\n\r\n        <Col lg={2} />\r\n    </Row>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        lang: state.socialMediaR.lang,\r\n        wizardStep: state.wizardR.wizardStep,\r\n        wizardSelectedPage: state.wizardR.wizardSelectedPage,\r\n        wizardSelectedPost: state.wizardR.wizardSelectedPost,\r\n        wizardPagePosts: state.wizardR.wizardPagePosts,\r\n        wizardActivePosts: state.wizardR.wizardActivePosts,\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, { nextWizardStep, getWizardPagesPosts, getWizardActivePosts, setWizardSelectedPost, prevWizardStep, addProject, resetWizardPageSelected  })(WizardPosts)\r\n"]},"metadata":{},"sourceType":"module"}