{"ast":null,"code":"var _jsxFileName = \"/usr/work/smart_front_oussema/src/app/Home/Pages/PageCard.js\";\nimport React, { useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { connectInstagramPage, deconnectInstagramPage, connectFacebookPage, deconnectFacebookPage, getFbData, getInstaData } from '../../../redux/actions/socialMediaActions';\nimport { Row, Col, Image, Overlay, Modal } from 'react-bootstrap';\nimport Lottie from 'react-lottie';\nimport animationData from '../../../assets/json/loadingSpinner.json';\nimport { useLocation } from 'react-router-dom';\n\nconst DISC_ICON = require('../../../assets/images/home/disconnected-icon.png');\n\nconst CONN_ICON = require('../../../assets/images/home/connected-icon.png');\n\nconst INSTA_ICON = require('../../../assets/images/home/insta-icon.png');\n\nconst FB_ICON = require('../../../assets/images/home/fb-icon.png');\n\nfunction PageCard(props) {\n  // ALL PROPS : platform={\"fb\"} isConnectedPage={page.isConnected} namePage={page.name} idPage={page.idPage} accessToken={page.access_token}\n  const [fbGraphData, setFbGraphData] = useState(null);\n  const [instaGraphData, setInstaGraphData] = useState(null);\n  const [showPopoverConnect, setShowPopoverConnect] = useState(false);\n  const [targetPopoverConnect, setTargetPopoverConnect] = useState(null);\n  const ref = useRef();\n  const [showDisconnectModal, setShowDisconnectModal] = useState(false);\n\n  const handleDisconnectModal = () => setShowDisconnectModal(!showDisconnectModal);\n\n  const defaultOptions = {\n    loop: true,\n    autoplay: true,\n    animationData: animationData,\n    rendererSettings: {\n      preserveAspectRatio: 'xMidYMid slice'\n    }\n  };\n  const location = useLocation();\n  const fbHost = \"https://graph.facebook.com/v8.0\";\n\n  const handleConnectPopover = event => {\n    setShowPopoverConnect(!showPopoverConnect);\n    setTargetPopoverConnect(event.target);\n  };\n\n  useEffect(() => {\n    if (props.platform === \"fb\") {\n      axios.get(`${fbHost}/${props.idPage}/?fields=fan_count,picture,new_like_count&access_token=${props.accessToken}`).then(res => {\n        setFbGraphData(res.data);\n      }).catch(err => {\n        console.log(\"PageCardFb\", err);\n      });\n    } else {\n      // INSTA\n      axios.get(`${fbHost}/${props.idPage}/?fields=id,media,followers_count,media_count,profile_picture_url,username,name&access_token=${props.accessToken}`).then(res => {\n        setInstaGraphData(res.data);\n      }).catch(err => {\n        console.log(\"PageCard Insta\", err);\n      });\n    }\n  }, []);\n  return (\n    /*#__PURE__*/\n\n    /* if clicked border: 1px solid red; */\n    React.createElement(\"div\", {\n      key: props.idPage + Math.random(),\n      className: \"pages-card m-1\",\n      style: {\n        backgroundColor: \"white\",\n        border: props.isConnectedPage ? \"1px solid #E5007D\" : \"0\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      show: showDisconnectModal,\n      onHide: handleDisconnectModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }, \"Modal heading\")), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }, \"Woohoo, you're reading this text in a modal!\")), /*#__PURE__*/React.createElement(\"div\", {\n      ref: ref,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Overlay, {\n      show: showPopoverConnect,\n      target: targetPopoverConnect,\n      placement: \"right\",\n      container: ref.current,\n      containerPadding: 10,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page-card-connect-popover d-flex\",\n      onClick: () => props.platform === \"insta\" && !props.isConnectedPage ? props.connectInstagramPage(props.idPage) : props.platform === \"insta\" && props.isConnectedPage ? props.deconnectInstagramPage(props.idPage) : props.platform === \"fb\" && !props.isConnectedPage ? props.connectFacebookPage(props.idPage) : props.deconnectFacebookPage(props.idPage),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }, props.isConnectedPage ? /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 25\n      }\n    }, \"Disconnect\") : /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 25\n      }\n    }, \"Connect\")))), location.pathname === \"/home/pages\" && props.status === \"listPageNotConnected\" && /*#__PURE__*/React.createElement(Row, {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: props.isConnectedPage ? CONN_ICON : DISC_ICON,\n      style: {\n        cursor: 'pointer'\n      },\n      className: \"mr-auto\",\n      fluid: true,\n      onClick: handleConnectPopover,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Row, {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      className: \"d-flex flex-column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, props.picture !== null ? /*#__PURE__*/React.createElement(Image, {\n      src: props.picture,\n      fluid: true,\n      className: \"m-auto pages-card-profile-picture\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 25\n      }\n    }) : fbGraphData !== null ? /*#__PURE__*/React.createElement(Image, {\n      src: fbGraphData.picture.data.url,\n      fluid: true,\n      className: \"m-auto pages-card-profile-picture\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }) : /*#__PURE__*/React.createElement(Lottie, {\n      options: defaultOptions,\n      width: 150\n      /*height={400}*/\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      style: {\n        zIndex: 1,\n        marginTop: '-20px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Col, {\n      lg: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: props.platform === \"fb\" ? FB_ICON : INSTA_ICON,\n      fluid: true,\n      className: \"m-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 29\n      }\n    }))))), /*#__PURE__*/React.createElement(Row, {\n      className: \"d-flex mb-3 mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-auto pages-card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }, props.namePage)), /*#__PURE__*/React.createElement(Row, {\n      className: \"d-flex mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      className: \"m-auto justify-content-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: 12,\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 29\n      }\n    }, instaGraphData !== null ? /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-auto pages-card-title\",\n      style: {\n        fontSize: '35px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 33\n      }\n    }, instaGraphData.followers_count) : fbGraphData !== null ? /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-auto pages-card-title\",\n      style: {\n        fontSize: '35px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 37\n      }\n    }, fbGraphData.fan_count) : /*#__PURE__*/React.createElement(Lottie, {\n      options: defaultOptions,\n      width: 100\n      /*height={400}*/\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      lg: 12,\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-auto pages-card-desc-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 33\n      }\n    }, \"Fans\")))), /*#__PURE__*/React.createElement(Col, {\n      lg: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: 12,\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 29\n      }\n    }, instaGraphData !== null ? /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-auto pages-card-title\",\n      style: {\n        fontSize: '35px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 37\n      }\n    }, instaGraphData.media_count) : fbGraphData !== null ? /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-auto pages-card-title\",\n      style: {\n        fontSize: '35px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 37\n      }\n    }, fbGraphData.new_like_count) : /*#__PURE__*/React.createElement(Lottie, {\n      options: defaultOptions,\n      width: 100\n      /*height={400}*/\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      lg: 12,\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 29\n      }\n    }, props.platform === \"fb\" ? /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-auto pages-card-desc-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 33\n      }\n    }, \"Interactions\") : /*#__PURE__*/React.createElement(\"p\", {\n      className: \"m-auto pages-card-desc-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 33\n      }\n    }, \"Posts\")))))))\n  );\n}\n\n;\n\nconst mapStateToProps = state => {\n  return {\n    socialMediaPageSelected: state.socialMediaR.socialMediaPageSelected\n  };\n};\n\nexport default connect(mapStateToProps, {\n  connectInstagramPage,\n  deconnectInstagramPage,\n  connectFacebookPage,\n  deconnectFacebookPage,\n  getFbData,\n  getInstaData\n})(PageCard);","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/app/Home/Pages/PageCard.js"],"names":["React","useEffect","useState","useRef","axios","connect","connectInstagramPage","deconnectInstagramPage","connectFacebookPage","deconnectFacebookPage","getFbData","getInstaData","Row","Col","Image","Overlay","Modal","Lottie","animationData","useLocation","DISC_ICON","require","CONN_ICON","INSTA_ICON","FB_ICON","PageCard","props","fbGraphData","setFbGraphData","instaGraphData","setInstaGraphData","showPopoverConnect","setShowPopoverConnect","targetPopoverConnect","setTargetPopoverConnect","ref","showDisconnectModal","setShowDisconnectModal","handleDisconnectModal","defaultOptions","loop","autoplay","rendererSettings","preserveAspectRatio","location","fbHost","handleConnectPopover","event","target","platform","get","idPage","accessToken","then","res","data","catch","err","console","log","Math","random","backgroundColor","border","isConnectedPage","current","pathname","status","cursor","picture","url","zIndex","marginTop","namePage","fontSize","followers_count","fan_count","media_count","new_like_count","mapStateToProps","state","socialMediaPageSelected","socialMediaR"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport { connect } from 'react-redux';\r\nimport { connectInstagramPage,deconnectInstagramPage, connectFacebookPage, deconnectFacebookPage, getFbData, getInstaData } from '../../../redux/actions/socialMediaActions';\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Image,\r\n    Overlay,\r\n    Modal,\r\n} from 'react-bootstrap';\r\nimport Lottie from 'react-lottie';\r\nimport animationData from '../../../assets/json/loadingSpinner.json';\r\n\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nconst DISC_ICON = require('../../../assets/images/home/disconnected-icon.png');\r\nconst CONN_ICON = require('../../../assets/images/home/connected-icon.png');\r\nconst INSTA_ICON = require('../../../assets/images/home/insta-icon.png');\r\nconst FB_ICON = require('../../../assets/images/home/fb-icon.png');\r\n\r\nfunction PageCard(props) {\r\n    // ALL PROPS : platform={\"fb\"} isConnectedPage={page.isConnected} namePage={page.name} idPage={page.idPage} accessToken={page.access_token}\r\n\r\n    const [fbGraphData,setFbGraphData] = useState(null);\r\n    const [instaGraphData,setInstaGraphData] = useState(null);\r\n    const [showPopoverConnect, setShowPopoverConnect] = useState(false);\r\n    const [targetPopoverConnect, setTargetPopoverConnect] = useState(null);\r\n    const ref = useRef();\r\n\r\n    const [showDisconnectModal, setShowDisconnectModal] = useState(false);\r\n\r\n    const handleDisconnectModal = () => setShowDisconnectModal(!showDisconnectModal);\r\n    \r\n    const defaultOptions = {\r\n        loop: true,\r\n        autoplay: true, \r\n        animationData: animationData,\r\n        rendererSettings: {\r\n          preserveAspectRatio: 'xMidYMid slice'\r\n        }\r\n    };\r\n    const location = useLocation();\r\n    const fbHost = \"https://graph.facebook.com/v8.0\"\r\n\r\n    const handleConnectPopover = (event) => {\r\n        setShowPopoverConnect(!showPopoverConnect);\r\n        setTargetPopoverConnect(event.target);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(props.platform === \"fb\") {\r\n            axios.get(`${fbHost}/${props.idPage}/?fields=fan_count,picture,new_like_count&access_token=${props.accessToken}`)\r\n                .then(res => { setFbGraphData(res.data); })\r\n                .catch(err => { console.log(\"PageCardFb\",(err)) })\r\n            } else {\r\n            // INSTA\r\n            axios.get(`${fbHost}/${props.idPage}/?fields=id,media,followers_count,media_count,profile_picture_url,username,name&access_token=${props.accessToken}`)\r\n                .then(res => { setInstaGraphData(res.data); })\r\n                .catch(err => { console.log(\"PageCard Insta\",(err)) })\r\n        }\r\n    }, [])\r\n\r\n\r\n    return (\r\n        /* if clicked border: 1px solid red; */\r\n        <div key={props.idPage + Math.random()} className=\"pages-card m-1\" style={{backgroundColor: \"white\", border: props.isConnectedPage ? \"1px solid #E5007D\" : \"0\"}}>\r\n            \r\n            <Modal show={showDisconnectModal} onHide={handleDisconnectModal}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Modal heading</Modal.Title>\r\n                </Modal.Header>\r\n                \r\n                <Modal.Body>Woohoo, you're reading this text in a modal!</Modal.Body>\r\n            </Modal>\r\n          \r\n            <div ref={ref}>\r\n                <Overlay\r\n                    show={showPopoverConnect}\r\n                    target={targetPopoverConnect}\r\n                    placement=\"right\"\r\n                    container={ref.current}\r\n                    containerPadding={10}\r\n                >\r\n                    <div \r\n                        className=\"page-card-connect-popover d-flex\"\r\n                        onClick={() => \r\n                            props.platform === \"insta\" && !props.isConnectedPage\r\n                            ? \r\n                            props.connectInstagramPage(props.idPage)\r\n                            :\r\n                            props.platform === \"insta\" && props.isConnectedPage\r\n                            ? \r\n                            props.deconnectInstagramPage(props.idPage) \r\n                            : \r\n                            props.platform === \"fb\" && !props.isConnectedPage\r\n                            ?\r\n                            props.connectFacebookPage(props.idPage)\r\n                            :\r\n                            props.deconnectFacebookPage(props.idPage)\r\n                        }\r\n                    >\r\n                        {props.isConnectedPage\r\n                        ?\r\n                        <p className=\"m-auto\">Disconnect</p>\r\n                        :\r\n                        <p className=\"m-auto\">Connect</p>\r\n                        }\r\n                    </div>\r\n                </Overlay>\r\n            </div>\r\n            {\r\n                location.pathname === \"/home/pages\" && props.status === \"listPageNotConnected\"\r\n                &&\r\n                <Row className=\"d-flex\">\r\n                    <Image \r\n                        src={ props.isConnectedPage ? CONN_ICON : DISC_ICON}\r\n                        style={{ cursor: 'pointer' }} \r\n                        className=\"mr-auto\" \r\n                        fluid \r\n                        onClick={handleConnectPopover}\r\n                    />\r\n                </Row>\r\n            }\r\n                \r\n            <Row className=\"d-flex\">\r\n                <Col className=\"d-flex flex-column\">\r\n                    {\r\n                        props.picture !== null\r\n                        ?\r\n                        <Image src={props.picture} fluid className=\"m-auto pages-card-profile-picture\" />\r\n                        :\r\n                        fbGraphData !== null \r\n                        ?\r\n                        <Image src={fbGraphData.picture.data.url} fluid className=\"m-auto pages-card-profile-picture\" />\r\n                        :\r\n                        <Lottie options={defaultOptions} width={150} /*height={400}*/ />\r\n                    }\r\n                        \r\n                    <div className=\"d-flex\" style={{ zIndex: 1, marginTop: '-20px' }}>\r\n                        <Col lg={6} />\r\n\r\n                        <Col lg={6}>\r\n                            <Image src={props.platform === \"fb\" ? FB_ICON : INSTA_ICON} fluid className=\"m-auto\" />\r\n                        </Col>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row className=\"d-flex mb-3 mt-3\">\r\n                <p className=\"m-auto pages-card-title\" >{props.namePage}</p>\r\n            </Row>\r\n\r\n            <Row className=\"d-flex mt-3\">\r\n                <Row className=\"m-auto justify-content-between\">    \r\n                    <Col lg={6}>\r\n                        <Row>\r\n                            <Col lg={12} className=\"d-flex\">\r\n                                {\r\n                                instaGraphData !== null\r\n                                ?\r\n                                <p className=\"m-auto pages-card-title\" style={{fontSize: '35px'}}>{instaGraphData.followers_count}</p>\r\n                                :\r\n                                fbGraphData !== null \r\n                                ?\r\n                                    <p className=\"m-auto pages-card-title\" style={{fontSize: '35px'}}>{fbGraphData.fan_count}</p>\r\n                                :\r\n                                    <Lottie options={defaultOptions} width={100} /*height={400}*/ />\r\n                                }\r\n                            </Col>\r\n\r\n                            <Col lg={12} className=\"d-flex\" >\r\n                                <p className=\"m-auto pages-card-desc-2\">Fans</p>\r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n\r\n                    <Col lg={6}>\r\n                        <Row>\r\n                            <Col lg={12} className=\"d-flex\">\r\n                                {\r\n                                instaGraphData !== null\r\n                                ?\r\n                                    <p className=\"m-auto pages-card-title\" style={{fontSize: '35px'}}>{instaGraphData.media_count}</p>\r\n                                :\r\n                                fbGraphData !== null\r\n                                ?\r\n                                    <p className=\"m-auto pages-card-title\" style={{fontSize: '35px'}}>{fbGraphData.new_like_count}</p>\r\n                                :\r\n                                    <Lottie options={defaultOptions} width={100} /*height={400}*/ />\r\n                                }\r\n                            </Col>\r\n\r\n                            <Col lg={12} className=\"d-flex\">\r\n                                {\r\n                                props.platform === \"fb\"\r\n                                ?\r\n                                <p  className=\"m-auto pages-card-desc-2\">Interactions</p>\r\n                                :\r\n                                <p  className=\"m-auto pages-card-desc-2\">Posts</p>\r\n                                }\r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n            </Row>\r\n        </div>\r\n    )\r\n};\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        socialMediaPageSelected : state.socialMediaR.socialMediaPageSelected,\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, { connectInstagramPage,deconnectInstagramPage, connectFacebookPage, deconnectFacebookPage, getFbData, getInstaData })(PageCard);\r\n"]},"metadata":{},"sourceType":"module"}