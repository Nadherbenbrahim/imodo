{"ast":null,"code":"var _jsxFileName = \"/usr/work/smart_front_oussema/src/dachboard/TestAgent.js\";\nimport React, { useEffect, Fragment, useState } from 'react';\nimport TopMenu from '../components/TopMenu';\nimport { withRouter, Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { nlptest, trainagent, unTrained, removechatAction, setsubmited } from '../actions';\nimport { sendMessage } from '../sockets/chat';\nimport { chatAction } from '../actions/index';\nimport Chat from '../components/Chat';\nimport Loader from 'react-loader-spinner';\nimport ActivateAgent from '../components/ActivateAgent';\nimport Keyboard from 'react-simple-keyboard';\nimport 'react-simple-keyboard/build/css/index.css';\nimport layout from \"simple-keyboard-layouts/build/layouts/arabic\";\nimport { v4 as uuidv4 } from 'uuid';\nimport { store } from '..';\n\nfunction TestAgent(props) {\n  const [showKeyBoard, setshowKeyBoard] = useState(false);\n  const [showlive, setshowlive] = useState(false);\n  const [answerCommentMsg, setanswerCommentMsg] = useState('');\n\n  const onChange = input => {\n    console.log(\"Input changed\", input);\n    setanswerCommentMsg(input);\n  };\n\n  const onKeyPress = button => {\n    console.log(\"Button pressed\", button);\n\n    if (button.toString() == \"{enter}\") {\n      setshowKeyBoard(false);\n    }\n  };\n\n  useEffect(() => {\n    props.unTrainedAgent();\n\n    if (!props.porject.trained) {\n      props.train(props.porject);\n    }\n\n    console.log(\"test Agent\", props.porject.post.page.idPage, props.porject.post.idPost);\n    const data = {\n      idProject: props.porject._id,\n      intents: props.porject.intents.map(el => el.name),\n      entiti: props.porject.entities.filter(el => el.default == false).map(el => el.name),\n      idPost: props.porject.post.idPost,\n      idPage: props.porject.post.page.idPage\n    };\n    console.log(\"datafiltred \", data);\n    props.trainAgent(data); // .then(() => getMessage(props.chat, setsubmited))\n  }, []);\n\n  const handelSubmit = e => {\n    e.preventDefault();\n    if (!e.target.message.value) return;\n    let obj = {\n      message: {\n        text: e.target.message.value,\n        dateSend: Date.now().toString()\n      },\n      idPost: props.porject.post.idPost\n    };\n    props.setsubmited(true);\n    sendMessage(obj);\n    e.currentTarget.reset();\n  };\n\n  function getUnique(arr) {\n    // // store the comparison  values in array\n    // const unique = arr.map(e => e[\"send\"][\"text\"])\n    //     // store the indexes of the unique objects\n    //     .map((e, i, final) => final.indexOf(e) === i && i)\n    //     // eliminate the false indexes & return unique objects\n    //     .filter((e) => arr[e]).map(e => arr[e]);\n    // console.log(\"unique \", unique)\n    // return unique;\n    var b = arr.filter(function (item, pos, arr) {\n      // Always keep the 0th element as there is nothing before it\n      // Then check if each element is different than the one before it\n      return pos === 0 || item[\"response\"][\"text\"] !== arr[pos - 1][\"response\"][\"text\"];\n    });\n    return b;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TopMenu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }), props.getPost.hasOwnProperty(\"idPost\") && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'absolute',\n      top: 120,\n      left: 20,\n      background: \"#fff\",\n      padding: 20,\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      boxShadow: \"0 0 10px lightgray\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, props.getPost.full_picture && /*#__PURE__*/React.createElement(\"img\", {\n    src: props.getPost.full_picture,\n    alt: \"\",\n    style: {\n      marginRight: 10,\n      width: 51\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 52\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontSize: 17,\n      color: \"#3B5998\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, props.getPost.hasOwnProperty(\"message\") ? props.getPost.message.length < 15 ? props.getPost.message : props.getPost.message.slice(0, 15) + \"...\" : \"Timeline Post\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      paddingLeft: 30,\n      paddingRight: 30,\n      paddingTop: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      fontSize: 30,\n      color: \"rgba(45, 47, 57, 1)\",\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, \"iModo Wizard\"), /*#__PURE__*/React.createElement(\"svg\", {\n    style: {\n      marginTop: 50,\n      marginBottom: 50,\n      marginLeft: \"auto\",\n      marginRight: \"auto\",\n      display: \"block\"\n    },\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"828\",\n    height: \"63\",\n    viewBox: \"0 0 828 63\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Groupe_1164\",\n    \"data-name\": \"Groupe 1164\",\n    transform: \"translate(-684 -251)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"step\",\n    transform: \"translate(-509 -438)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"text\", {\n    id: \"Page_Selection\",\n    \"data-name\": \"Page Selection\",\n    transform: \"translate(1249 747)\",\n    fill: \"#e5007d\",\n    \"font-size\": \"15\",\n    \"font-family\": \"Poppins-Medium, Poppins\",\n    \"font-weight\": \"500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"tspan\", {\n    x: \"-55.898\",\n    y: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 200\n    }\n  }, \"Page Selection\")), /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"Ellipse\",\n    cx: \"19\",\n    cy: \"19\",\n    r: \"19\",\n    transform: \"translate(1230 689)\",\n    fill: \"#e5007d\",\n    opacity: \"0.25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Line\",\n    d: \"M0,0H1V180H0Z\",\n    transform: \"translate(1457.702 708.5) rotate(90)\",\n    fill: \"#e5007d\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Icon_awesome-check\",\n    \"data-name\": \"Icon awesome-check\",\n    d: \"M4.94,15.21.213,10.483a.727.727,0,0,1,0-1.028L1.241,8.426a.727.727,0,0,1,1.028,0L5.454,11.61l6.82-6.82a.727.727,0,0,1,1.028,0l1.028,1.028a.727.727,0,0,1,0,1.028L5.968,15.21A.727.727,0,0,1,4.94,15.21Z\",\n    transform: \"translate(1242.001 698.423)\",\n    fill: \"#fff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"step-2\",\n    \"data-name\": \"step\",\n    transform: \"translate(-273 -438)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"text\", {\n    id: \"Post_Selection\",\n    \"data-name\": \"Post Selection\",\n    transform: \"translate(1249 747)\",\n    fill: \"#e5007d\",\n    \"font-size\": \"15\",\n    \"font-family\": \"Poppins-Medium, Poppins\",\n    \"font-weight\": \"500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"tspan\", {\n    x: \"-52.68\",\n    y: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 200\n    }\n  }, \"Post Selection\")), /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"Ellipse-2\",\n    \"data-name\": \"Ellipse\",\n    cx: \"19\",\n    cy: \"19\",\n    r: \"19\",\n    transform: \"translate(1230 689)\",\n    fill: \"#e5007d\",\n    opacity: \"0.25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Line-2\",\n    \"data-name\": \"Line\",\n    d: \"M0,0H1V180H0Z\",\n    transform: \"translate(1457.702 708.5) rotate(90)\",\n    fill: \"#e5007d\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Icon_awesome-check-2\",\n    \"data-name\": \"Icon awesome-check\",\n    d: \"M4.94,15.21.213,10.483a.727.727,0,0,1,0-1.028L1.241,8.426a.727.727,0,0,1,1.028,0L5.454,11.61l6.82-6.82a.727.727,0,0,1,1.028,0l1.028,1.028a.727.727,0,0,1,0,1.028L5.968,15.21A.727.727,0,0,1,4.94,15.21Z\",\n    transform: \"translate(1242.001 698.423)\",\n    fill: \"#fff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"step-3\",\n    \"data-name\": \"step\",\n    transform: \"translate(-37 -438)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"text\", {\n    id: \"Automation_config\",\n    \"data-name\": \"Automation config\",\n    transform: \"translate(1249 747)\",\n    fill: \"#e5007d\",\n    \"font-size\": \"15\",\n    \"font-family\": \"Poppins-Medium, Poppins\",\n    \"font-weight\": \"500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"tspan\", {\n    x: \"-70.628\",\n    y: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 206\n    }\n  }, \"Automation config\")), /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"Ellipse-3\",\n    \"data-name\": \"Ellipse\",\n    cx: \"19\",\n    cy: \"19\",\n    r: \"19\",\n    transform: \"translate(1230 689)\",\n    fill: \"#e5007d\",\n    opacity: \"0.25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Line-3\",\n    \"data-name\": \"Line\",\n    d: \"M0,0H1V180H0Z\",\n    transform: \"translate(1457.702 708.5) rotate(90)\",\n    fill: \"#e5007d\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Icon_awesome-check-3\",\n    \"data-name\": \"Icon awesome-check\",\n    d: \"M4.94,15.21.213,10.483a.727.727,0,0,1,0-1.028L1.241,8.426a.727.727,0,0,1,1.028,0L5.454,11.61l6.82-6.82a.727.727,0,0,1,1.028,0l1.028,1.028a.727.727,0,0,1,0,1.028L5.968,15.21A.727.727,0,0,1,4.94,15.21Z\",\n    transform: \"translate(1242.001 698.423)\",\n    fill: \"#fff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"step-4\",\n    \"data-name\": \"step\",\n    transform: \"translate(199 -438)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"text\", {\n    id: \"Test_validation\",\n    \"data-name\": \"Test & validation\",\n    transform: \"translate(1249 747)\",\n    fill: \"#e5007d\",\n    \"font-size\": \"15\",\n    \"font-family\": \"Poppins-Medium, Poppins\",\n    \"font-weight\": \"500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"tspan\", {\n    x: \"-63.217\",\n    y: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 208\n    }\n  }, \"Test & validation\")), /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"Ellipse-4\",\n    \"data-name\": \"Ellipse\",\n    cx: \"19\",\n    cy: \"19\",\n    r: \"19\",\n    transform: \"translate(1230 689)\",\n    fill: \"#e5007d\",\n    opacity: \"0.25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    id: \"_4\",\n    \"data-name\": \"4\",\n    transform: \"translate(1249 714)\",\n    fill: \"#e5007d\",\n    \"font-size\": \"16\",\n    \"font-family\": \"Poppins-SemiBold, Poppins\",\n    \"font-weight\": \"600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"tspan\", {\n    x: \"-5.288\",\n    y: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 177\n    }\n  }, \"4\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: '#fff',\n      paddingTop: 40,\n      paddingLeft: 70,\n      paddingRight: 70,\n      paddingBottom: 40,\n      width: \"70%\",\n      margin: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, \"Test Interaction\"), showlive && /*#__PURE__*/React.createElement(ActivateAgent, {\n    porject: props.porject,\n    setshowlive: () => setshowlive(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }), props.trained ? /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"400px\",\n      border: \"1px solid lightgray\",\n      margin: \"30px auto\",\n      padding: \"30px\",\n      position: \"relative\",\n      overflowY: \"scroll\",\n      width: \"60%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 29\n    }\n  }, props.submited && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loaderStyle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    type: \"Puff\",\n    color: \"#E5007D\",\n    height: 100,\n    width: 100,\n    visible: props.submited,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 41\n    }\n  })), props.messages.map(el => /*#__PURE__*/React.createElement(Chat, {\n    key: uuidv4(),\n    response: el.response,\n    send: el.send,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 59\n    }\n  }))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handelSubmit,\n    style: {\n      width: \"68%\",\n      margin: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 29\n    }\n  }, showKeyBoard && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"absolute\",\n      bottom: \"25%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Keyboard, {\n    onChange: onChange,\n    onKeyPress: onKeyPress,\n    layout: layout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      transform: \"translateY(5px)\",\n      zIndex: 1000,\n      position: \"absolute\",\n      margin: \"10px 5px\",\n      width: 41,\n      background: \"rgb(249, 249, 249)\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      height: 40,\n      border: \"1px solid lightgray\",\n      cursor: 'pointer'\n    },\n    onClick: () => setshowKeyBoard(!showKeyBoard),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 33\n    }\n  }, \"\\u0639\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    style: {\n      height: \"75px\",\n      width: \"100%\",\n      border: \"1px solid lightgray\",\n      padding: \"0 20px 0 60px\",\n      display: \"block\",\n      boxSizing: \"border-box\"\n    },\n    placeholder: \"Your Message...\",\n    name: \"message\",\n    disabled: props.submited,\n    value: answerCommentMsg,\n    onChange: e => setanswerCommentMsg(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    style: {\n      border: \"none\",\n      background: \"transparent\",\n      padding: 0,\n      margin: 0,\n      marginTop: \"30px\",\n      cursor: \"pointer\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    style: {\n      marginLeft: \"auto\",\n      marginRight: \"auto\",\n      display: \"block\"\n    },\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"153\",\n    height: \"40\",\n    viewBox: \"0 0 153 40\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Button\",\n    transform: \"translate(-675 -531)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_1551\",\n    \"data-name\": \"Rectangle 1551\",\n    width: \"153\",\n    height: \"40\",\n    rx: \"4\",\n    transform: \"translate(675 531)\",\n    fill: \"#4080ff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 49\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    id: \"Test_interaction\",\n    \"data-name\": \"Test interaction\",\n    transform: \"translate(688 557)\",\n    fill: \"#fff\",\n    \"font-size\": \"16\",\n    \"font-family\": \"Poppins-SemiBold, Poppins\",\n    \"font-weight\": \"600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"tspan\", {\n    x: \"0\",\n    y: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 222\n    }\n  }, \"Test interaction\"))))))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      marginTop: \"50px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => {\n      props.history.goBack();\n      props.removechatAction();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"125\",\n    height: \"50\",\n    viewBox: \"0 0 125 50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Button\",\n    transform: \"translate(-1376 -914)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_1549\",\n    \"data-name\": \"Rectangle 1549\",\n    width: \"125\",\n    height: \"50\",\n    rx: \"4\",\n    transform: \"translate(1376 914)\",\n    fill: \"#e4e6eb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    id: \"Back\",\n    transform: \"translate(1416 946)\",\n    fill: \"#818e94\",\n    \"font-size\": \"20\",\n    \"font-family\": \"Roboto-Bold, Roboto\",\n    \"font-weight\": \"700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"tspan\", {\n    x: \"0\",\n    y: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 175\n    }\n  }, \"Back\"))))), !props.porject.live && /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => {\n      setshowlive(true);\n      props.removechatAction();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"122\",\n    height: \"50\",\n    viewBox: \"0 0 122 50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Button\",\n    transform: \"translate(-1427 -914)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_1549\",\n    \"data-name\": \"Rectangle 1549\",\n    width: \"122\",\n    height: \"50\",\n    rx: \"4\",\n    transform: \"translate(1427 914)\",\n    fill: \"#e5007d\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 49\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    id: \"Next\",\n    transform: \"translate(1467 946)\",\n    fill: \"#fff\",\n    \"font-size\": \"20\",\n    \"font-family\": \"Roboto-Bold, Roboto\",\n    \"font-weight\": \"700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"tspan\", {\n    x: \"0\",\n    y: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 176\n    }\n  }, \"Finish\"))))), props.porject.live && /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => props.removechatAction(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => {\n      props.history.push(`/dachboard/agent/?page=${props.match.params.id}`);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"122\",\n    height: \"50\",\n    viewBox: \"0 0 122 50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Button\",\n    transform: \"translate(-1427 -914)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_1549\",\n    \"data-name\": \"Rectangle 1549\",\n    width: \"122\",\n    height: \"50\",\n    rx: \"4\",\n    transform: \"translate(1427 914)\",\n    fill: \"#e5007d\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 53\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    id: \"Next\",\n    transform: \"translate(1460 946)\",\n    fill: \"#fff\",\n    \"font-size\": \"20\",\n    \"font-family\": \"Roboto-Bold, Roboto\",\n    \"font-weight\": \"700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"tspan\", {\n    x: \"0\",\n    y: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 180\n    }\n  }, \"Update\")))))))) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    type: \"Puff\",\n    color: \"#E5007D\",\n    height: 100,\n    width: 100,\n    visible: !props.trained,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 29\n    }\n  })))));\n}\n\nconst mapStateToProps = (state, owenProps) => {\n  const porject = state.allProjects.find(el => el.post.idPost == owenProps.match.params.idpost);\n  const post = state.allPosts.find(el => el.idPost == owenProps.match.params.idpost) ? state.allPosts.find(el => el.idPost == owenProps.match.params.idpost) : state.allpages.find(el => el.idPage == owenProps.match.params.idpost);\n  console.log(\"posssst\", post);\n  return {\n    porject,\n    messages: state.messages,\n    getPost: post,\n    trained: state.trainagent,\n    submited: state.submited\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    train: (projet, id) => dispatch(nlptest(projet, id)),\n    trainAgent: data => dispatch(trainagent(data)),\n    chat: message => dispatch(chatAction(message)),\n    unTrainedAgent: () => dispatch(unTrained()),\n    removechatAction: () => dispatch(removechatAction()),\n    setsubmited: sub => dispatch(setsubmited(sub))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(TestAgent));","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/dachboard/TestAgent.js"],"names":["React","useEffect","Fragment","useState","TopMenu","withRouter","Link","connect","nlptest","trainagent","unTrained","removechatAction","setsubmited","sendMessage","chatAction","Chat","Loader","ActivateAgent","Keyboard","layout","v4","uuidv4","store","TestAgent","props","showKeyBoard","setshowKeyBoard","showlive","setshowlive","answerCommentMsg","setanswerCommentMsg","onChange","input","console","log","onKeyPress","button","toString","unTrainedAgent","porject","trained","train","post","page","idPage","idPost","data","idProject","_id","intents","map","el","name","entiti","entities","filter","default","trainAgent","handelSubmit","e","preventDefault","target","message","value","obj","text","dateSend","Date","now","currentTarget","reset","getUnique","arr","b","item","pos","position","getPost","hasOwnProperty","top","left","background","padding","display","justifyContent","alignItems","boxShadow","full_picture","marginRight","width","fontSize","color","length","slice","paddingLeft","paddingRight","paddingTop","textAlign","marginTop","marginBottom","marginLeft","paddingBottom","margin","height","border","overflowY","submited","messages","response","send","bottom","transform","zIndex","cursor","boxSizing","history","goBack","live","push","match","params","id","mapStateToProps","state","owenProps","allProjects","find","idpost","allPosts","allpages","mapDispatchToProps","dispatch","projet","chat","sub"],"mappings":"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","sourcesContent":["import React, { useEffect, Fragment, useState } from 'react'\r\nimport TopMenu from '../components/TopMenu'\r\nimport { withRouter, Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { nlptest, trainagent, unTrained, removechatAction, setsubmited } from '../actions'\r\nimport { sendMessage, } from '../sockets/chat'\r\nimport { chatAction } from '../actions/index'\r\nimport Chat from '../components/Chat'\r\nimport Loader from 'react-loader-spinner'\r\nimport ActivateAgent from '../components/ActivateAgent'\r\nimport Keyboard from 'react-simple-keyboard';\r\nimport 'react-simple-keyboard/build/css/index.css';\r\nimport layout from \"simple-keyboard-layouts/build/layouts/arabic\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { store } from '..'\r\n\r\nfunction TestAgent(props) {\r\n    const [showKeyBoard, setshowKeyBoard] = useState(false)\r\n\r\n    const [showlive, setshowlive] = useState(false)\r\n    const [answerCommentMsg, setanswerCommentMsg] = useState('')\r\n\r\n    const onChange = (input) => {\r\n        console.log(\"Input changed\", input);\r\n        setanswerCommentMsg(input)\r\n    }\r\n\r\n    const onKeyPress = (button) => {\r\n        console.log(\"Button pressed\", button);\r\n        if (button.toString() == \"{enter}\") {\r\n            setshowKeyBoard(false)\r\n        }\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        props.unTrainedAgent()\r\n        if (!props.porject.trained) {\r\n            props.train(props.porject)\r\n        }\r\n        console.log(\"test Agent\", props.porject.post.page.idPage, props.porject.post.idPost)\r\n        const data = {\r\n            idProject: props.porject._id,\r\n            intents: props.porject.intents.map(el => el.name),\r\n            entiti: props.porject.entities.filter(el => el.default == false).map(el => el.name),\r\n            idPost: props.porject.post.idPost,\r\n            idPage: props.porject.post.page.idPage\r\n        }\r\n        console.log(\"datafiltred \", data)\r\n        props.trainAgent(data)\r\n        // .then(() => getMessage(props.chat, setsubmited))\r\n\r\n    }, [])\r\n    const handelSubmit = (e) => {\r\n        e.preventDefault()\r\n        if (!e.target.message.value) return;\r\n        let obj = {\r\n            message: { text: e.target.message.value, dateSend: Date.now().toString() },\r\n            idPost: props.porject.post.idPost\r\n\r\n        }\r\n        props.setsubmited(true)\r\n        sendMessage(obj)\r\n        e.currentTarget.reset()\r\n    }\r\n    function getUnique(arr) {\r\n\r\n        // // store the comparison  values in array\r\n        // const unique = arr.map(e => e[\"send\"][\"text\"])\r\n\r\n        //     // store the indexes of the unique objects\r\n        //     .map((e, i, final) => final.indexOf(e) === i && i)\r\n\r\n        //     // eliminate the false indexes & return unique objects\r\n        //     .filter((e) => arr[e]).map(e => arr[e]);\r\n        // console.log(\"unique \", unique)\r\n        // return unique;\r\n\r\n\r\n        var b = arr.filter(function (item, pos, arr) {\r\n            // Always keep the 0th element as there is nothing before it\r\n            // Then check if each element is different than the one before it\r\n            return pos === 0 || item[\"response\"][\"text\"] !== arr[pos - 1][\"response\"][\"text\"];\r\n        });\r\n\r\n        return b\r\n    }\r\n    return (\r\n        <div style={{ position: 'relative' }}>\r\n            <TopMenu />\r\n            {\r\n                props.getPost.hasOwnProperty(\"idPost\") &&\r\n                <div style={{ position: 'absolute', top: 120, left: 20, background: \"#fff\", padding: 20, display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", boxShadow: \"0 0 10px lightgray\" }}>\r\n                    {props.getPost.full_picture && <img src={props.getPost.full_picture} alt=\"\" style={{ marginRight: 10, width: 51 }} />}\r\n                    <span style={{ fontSize: 17, color: \"#3B5998\" }}>{props.getPost.hasOwnProperty(\"message\") ? (props.getPost.message.length < 15 ? props.getPost.message : props.getPost.message.slice(0, 15) + \"...\") : \"Timeline Post\"}</span>\r\n                </div>\r\n            }\r\n            <div style={{ paddingLeft: 30, paddingRight: 30, paddingTop: 30 }}>\r\n                <h1 style={{ fontSize: 30, color: \"rgba(45, 47, 57, 1)\", textAlign: \"center\" }}>iModo Wizard</h1>\r\n                <svg style={{\r\n                    marginTop: 50,\r\n                    marginBottom: 50,\r\n                    marginLeft: \"auto\",\r\n                    marginRight: \"auto\",\r\n                    display: \"block\"\r\n                }} xmlns=\"http://www.w3.org/2000/svg\" width=\"828\" height=\"63\" viewBox=\"0 0 828 63\">\r\n                    <g id=\"Groupe_1164\" data-name=\"Groupe 1164\" transform=\"translate(-684 -251)\">\r\n                        <g id=\"step\" transform=\"translate(-509 -438)\">\r\n                            <text id=\"Page_Selection\" data-name=\"Page Selection\" transform=\"translate(1249 747)\" fill=\"#e5007d\" font-size=\"15\" font-family=\"Poppins-Medium, Poppins\" font-weight=\"500\"><tspan x=\"-55.898\" y=\"0\">Page Selection</tspan></text>\r\n                            <circle id=\"Ellipse\" cx=\"19\" cy=\"19\" r=\"19\" transform=\"translate(1230 689)\" fill=\"#e5007d\" opacity=\"0.25\" />\r\n                            <path id=\"Line\" d=\"M0,0H1V180H0Z\" transform=\"translate(1457.702 708.5) rotate(90)\" fill=\"#e5007d\" />\r\n                            <path id=\"Icon_awesome-check\" data-name=\"Icon awesome-check\" d=\"M4.94,15.21.213,10.483a.727.727,0,0,1,0-1.028L1.241,8.426a.727.727,0,0,1,1.028,0L5.454,11.61l6.82-6.82a.727.727,0,0,1,1.028,0l1.028,1.028a.727.727,0,0,1,0,1.028L5.968,15.21A.727.727,0,0,1,4.94,15.21Z\" transform=\"translate(1242.001 698.423)\" fill=\"#fff\" />\r\n                        </g>\r\n                        <g id=\"step-2\" data-name=\"step\" transform=\"translate(-273 -438)\">\r\n                            <text id=\"Post_Selection\" data-name=\"Post Selection\" transform=\"translate(1249 747)\" fill=\"#e5007d\" font-size=\"15\" font-family=\"Poppins-Medium, Poppins\" font-weight=\"500\"><tspan x=\"-52.68\" y=\"0\">Post Selection</tspan></text>\r\n                            <circle id=\"Ellipse-2\" data-name=\"Ellipse\" cx=\"19\" cy=\"19\" r=\"19\" transform=\"translate(1230 689)\" fill=\"#e5007d\" opacity=\"0.25\" />\r\n                            <path id=\"Line-2\" data-name=\"Line\" d=\"M0,0H1V180H0Z\" transform=\"translate(1457.702 708.5) rotate(90)\" fill=\"#e5007d\" />\r\n                            <path id=\"Icon_awesome-check-2\" data-name=\"Icon awesome-check\" d=\"M4.94,15.21.213,10.483a.727.727,0,0,1,0-1.028L1.241,8.426a.727.727,0,0,1,1.028,0L5.454,11.61l6.82-6.82a.727.727,0,0,1,1.028,0l1.028,1.028a.727.727,0,0,1,0,1.028L5.968,15.21A.727.727,0,0,1,4.94,15.21Z\" transform=\"translate(1242.001 698.423)\" fill=\"#fff\" />\r\n                        </g>\r\n                        <g id=\"step-3\" data-name=\"step\" transform=\"translate(-37 -438)\">\r\n                            <text id=\"Automation_config\" data-name=\"Automation config\" transform=\"translate(1249 747)\" fill=\"#e5007d\" font-size=\"15\" font-family=\"Poppins-Medium, Poppins\" font-weight=\"500\"><tspan x=\"-70.628\" y=\"0\">Automation config</tspan></text>\r\n                            <circle id=\"Ellipse-3\" data-name=\"Ellipse\" cx=\"19\" cy=\"19\" r=\"19\" transform=\"translate(1230 689)\" fill=\"#e5007d\" opacity=\"0.25\" />\r\n                            <path id=\"Line-3\" data-name=\"Line\" d=\"M0,0H1V180H0Z\" transform=\"translate(1457.702 708.5) rotate(90)\" fill=\"#e5007d\" />\r\n                            <path id=\"Icon_awesome-check-3\" data-name=\"Icon awesome-check\" d=\"M4.94,15.21.213,10.483a.727.727,0,0,1,0-1.028L1.241,8.426a.727.727,0,0,1,1.028,0L5.454,11.61l6.82-6.82a.727.727,0,0,1,1.028,0l1.028,1.028a.727.727,0,0,1,0,1.028L5.968,15.21A.727.727,0,0,1,4.94,15.21Z\" transform=\"translate(1242.001 698.423)\" fill=\"#fff\" />\r\n                        </g>\r\n                        <g id=\"step-4\" data-name=\"step\" transform=\"translate(199 -438)\">\r\n                            <text id=\"Test_validation\" data-name=\"Test &amp; validation\" transform=\"translate(1249 747)\" fill=\"#e5007d\" font-size=\"15\" font-family=\"Poppins-Medium, Poppins\" font-weight=\"500\"><tspan x=\"-63.217\" y=\"0\">Test &amp; validation</tspan></text>\r\n                            <circle id=\"Ellipse-4\" data-name=\"Ellipse\" cx=\"19\" cy=\"19\" r=\"19\" transform=\"translate(1230 689)\" fill=\"#e5007d\" opacity=\"0.25\" />\r\n                            <text id=\"_4\" data-name=\"4\" transform=\"translate(1249 714)\" fill=\"#e5007d\" font-size=\"16\" font-family=\"Poppins-SemiBold, Poppins\" font-weight=\"600\"><tspan x=\"-5.288\" y=\"0\">4</tspan></text>\r\n                        </g>\r\n                    </g>\r\n                </svg>\r\n                {/* <Chat response={\"el.response\"} send={\"el.send\"} /> */}\r\n                <div style={{ background: '#fff', paddingTop: 40, paddingLeft: 70, paddingRight: 70, paddingBottom: 40, width: \"70%\", margin: \"auto\" }}>\r\n                    <h3>Test Interaction</h3>\r\n                    {\r\n                        showlive &&\r\n                        <ActivateAgent porject={props.porject} setshowlive={() => setshowlive(false)} />\r\n                    }\r\n                    {props.trained ?\r\n                        <Fragment>\r\n                            <div style={{\r\n                                height: \"400px\",\r\n                                border: \"1px solid lightgray\",\r\n                                margin: \"30px auto\",\r\n                                padding: \"30px\",\r\n                                position: \"relative\",\r\n                                overflowY: \"scroll\",\r\n                                width: \"60%\"\r\n\r\n                            }}>\r\n                                {\r\n                                    props.submited &&\r\n                                    <div className=\"loaderStyle\">\r\n                                        <Loader\r\n                                            type=\"Puff\"\r\n                                            color=\"#E5007D\"\r\n                                            height={100}\r\n                                            width={100}\r\n                                            visible={props.submited}\r\n                                        />\r\n                                    </div>\r\n                                }\r\n                                {props.messages.map(el => <Chat key={uuidv4()} response={el.response} send={el.send} />)}\r\n                            </div>\r\n                            <form onSubmit={handelSubmit} style={{\r\n                                width: \"68%\",\r\n                                margin: \"auto\"\r\n                            }}>\r\n                                {showKeyBoard &&\r\n                                    <div style={{\r\n                                        position: \"absolute\",\r\n                                        bottom: \"25%\",\r\n\r\n                                    }}>\r\n                                        <Keyboard\r\n                                            onChange={onChange}\r\n                                            onKeyPress={onKeyPress}\r\n                                            layout={layout}\r\n                                        />\r\n                                    </div>\r\n                                }\r\n                                <span style={{\r\n                                    transform: \"translateY(5px)\",\r\n                                    zIndex: 1000,\r\n                                    position: \"absolute\",\r\n                                    margin: \"10px 5px\",\r\n                                    width: 41,\r\n                                    background: \"rgb(249, 249, 249)\",\r\n                                    display: \"flex\",\r\n                                    justifyContent: \"center\",\r\n                                    alignItems: \"center\",\r\n                                    height: 40,\r\n                                    border: \"1px solid lightgray\",\r\n                                    cursor: 'pointer'\r\n                                }} onClick={() => setshowKeyBoard(!showKeyBoard)}></span>\r\n                                <input type=\"text\" style={{\r\n                                    height: \"75px\",\r\n                                    width: \"100%\",\r\n                                    border: \"1px solid lightgray\",\r\n                                    padding: \"0 20px 0 60px\",\r\n                                    display: \"block\",\r\n                                    boxSizing: \"border-box\"\r\n                                }} placeholder=\"Your Message...\" name=\"message\" disabled={props.submited} value={answerCommentMsg} onChange={(e) => setanswerCommentMsg(e.target.value)} />\r\n                                <div style={{ textAlign: \"center\" }}>\r\n                                    <button type=\"submit\" style={{\r\n                                        border: \"none\",\r\n                                        background: \"transparent\",\r\n                                        padding: 0,\r\n                                        margin: 0,\r\n                                        marginTop: \"30px\",\r\n                                        cursor: \"pointer\"\r\n                                    }}>\r\n                                        <svg style={{\r\n                                            marginLeft: \"auto\",\r\n                                            marginRight: \"auto\",\r\n                                            display: \"block\",\r\n                                        }} xmlns=\"http://www.w3.org/2000/svg\" width=\"153\" height=\"40\" viewBox=\"0 0 153 40\">\r\n                                            <g id=\"Button\" transform=\"translate(-675 -531)\">\r\n                                                <rect id=\"Rectangle_1551\" data-name=\"Rectangle 1551\" width=\"153\" height=\"40\" rx=\"4\" transform=\"translate(675 531)\" fill=\"#4080ff\" />\r\n                                                <text id=\"Test_interaction\" data-name=\"Test interaction\" transform=\"translate(688 557)\" fill=\"#fff\" font-size=\"16\" font-family=\"Poppins-SemiBold, Poppins\" font-weight=\"600\"><tspan x=\"0\" y=\"0\">Test interaction</tspan></text>\r\n                                            </g>\r\n                                        </svg>\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                            <div style={{\r\n                                display: \"flex\",\r\n                                justifyContent: \"space-between\",\r\n                                marginTop: \"50px\"\r\n                            }}>\r\n                                <div onClick={() => { props.history.goBack(); props.removechatAction() }}>\r\n\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"125\" height=\"50\" viewBox=\"0 0 125 50\">\r\n                                        <g id=\"Button\" transform=\"translate(-1376 -914)\">\r\n                                            <rect id=\"Rectangle_1549\" data-name=\"Rectangle 1549\" width=\"125\" height=\"50\" rx=\"4\" transform=\"translate(1376 914)\" fill=\"#e4e6eb\" />\r\n                                            <text id=\"Back\" transform=\"translate(1416 946)\" fill=\"#818e94\" font-size=\"20\" font-family=\"Roboto-Bold, Roboto\" font-weight=\"700\"><tspan x=\"0\" y=\"0\">Back</tspan></text>\r\n                                        </g>\r\n                                    </svg>\r\n\r\n                                </div>\r\n                                {\r\n                                    !props.porject.live &&\r\n                                    <div onClick={() => { setshowlive(true); props.removechatAction() }}>\r\n\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"122\" height=\"50\" viewBox=\"0 0 122 50\">\r\n                                            <g id=\"Button\" transform=\"translate(-1427 -914)\">\r\n                                                <rect id=\"Rectangle_1549\" data-name=\"Rectangle 1549\" width=\"122\" height=\"50\" rx=\"4\" transform=\"translate(1427 914)\" fill=\"#e5007d\" />\r\n                                                <text id=\"Next\" transform=\"translate(1467 946)\" fill=\"#fff\" font-size=\"20\" font-family=\"Roboto-Bold, Roboto\" font-weight=\"700\"><tspan x=\"0\" y=\"0\">Finish</tspan></text>\r\n                                            </g>\r\n                                        </svg>\r\n\r\n                                    </div>\r\n                                }\r\n                                {\r\n                                    props.porject.live &&\r\n                                    <div onClick={() => props.removechatAction()}>\r\n                                        <div onClick={() => { props.history.push(`/dachboard/agent/?page=${props.match.params.id}`) }}>\r\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"122\" height=\"50\" viewBox=\"0 0 122 50\">\r\n                                                <g id=\"Button\" transform=\"translate(-1427 -914)\">\r\n                                                    <rect id=\"Rectangle_1549\" data-name=\"Rectangle 1549\" width=\"122\" height=\"50\" rx=\"4\" transform=\"translate(1427 914)\" fill=\"#e5007d\" />\r\n                                                    <text id=\"Next\" transform=\"translate(1460 946)\" fill=\"#fff\" font-size=\"20\" font-family=\"Roboto-Bold, Roboto\" font-weight=\"700\"><tspan x=\"0\" y=\"0\">Update</tspan></text>\r\n                                                </g>\r\n                                            </svg>\r\n                                        </div>\r\n                                    </div>\r\n                                }\r\n                            </div>\r\n                        </Fragment> :\r\n                        <div style={{ textAlign: \"center\" }}>\r\n                            <Loader\r\n                                type=\"Puff\"\r\n                                color=\"#E5007D\"\r\n                                height={100}\r\n                                width={100}\r\n                                visible={!props.trained}\r\n                            />\r\n                        </div>\r\n                    }\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state, owenProps) => {\r\n    const porject = state.allProjects.find(el => el.post.idPost == owenProps.match.params.idpost)\r\n    const post = state.allPosts.find(el => el.idPost == owenProps.match.params.idpost) ? state.allPosts.find(el => el.idPost == owenProps.match.params.idpost) : state.allpages.find(el => el.idPage == owenProps.match.params.idpost)\r\n    console.log(\"posssst\", post)\r\n    return {\r\n        porject,\r\n        messages: state.messages,\r\n        getPost: post,\r\n        trained: state.trainagent,\r\n        submited: state.submited\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        train: (projet, id) => dispatch(nlptest(projet, id)),\r\n        trainAgent: (data) => dispatch(trainagent(data)),\r\n        chat: (message) => dispatch(chatAction(message)),\r\n        unTrainedAgent: () => dispatch(unTrained()),\r\n        removechatAction: () => dispatch(removechatAction()),\r\n        setsubmited: (sub) => dispatch(setsubmited(sub))\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(TestAgent))\r\n"]},"metadata":{},"sourceType":"module"}