{"ast":null,"code":"import _toConsumableArray from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useEffect}from'react';import{Row,Col,Image,OverlayTrigger,Overlay,Popover,Form}from'react-bootstrap';import Picker from'emoji-picker-react';import OutsideClickHandler from'react-outside-click-handler';import Keyboard from'react-simple-keyboard';import layout from\"simple-keyboard-layouts/build/layouts/arabic\";import ReactTooltip from'react-tooltip';import Swal from'sweetalert2/dist/sweetalert2.js';// Translations\nimport{trans}from'../../../Translations';import{IoIosCall}from'react-icons/io';import{AiOutlineCloseCircle}from'react-icons/ai';import{BsLink45Deg}from'react-icons/bs';import{IoIosClose}from'react-icons/io';import{ReactComponent as Arabic}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/images/home/Arabic.svg\";import{ReactComponent as ArabicInverse}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/images/home/arabic01.svg\";import{ReactComponent as Emoticon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/images/home/emoticon.svg\";import{ReactComponent as EmoticonInverse}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/images/home/emoticon01.svg\";var Tag=require('../../../assets/images/home/Tag.svg');var TagInverse=require('../../../assets/images/home/tag01.svg');export default function WizardMiracleInput(props){var lang=props.lang,label=props.label,response=props.response,handleResponse=props.handleResponse,showTags=props.showTags,handleTags=props.handleTags,showEmojis=props.showEmojis,handleEmojis=props.handleEmojis,showKeyboard=props.showKeyboard,handleKeyboard=props.handleKeyboard,BtnType=props.BtnType,handleBtnType=props.handleBtnType,BtnTitle=props.BtnTitle,handleBtnTitle=props.handleBtnTitle,BtnValue=props.BtnValue,handleBtnValue=props.handleBtnValue,Btns=props.Btns,handleBtns=props.handleBtns,platform=props.platform,changeBtnColor=props.changeBtnColor;var keyboard=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),BtnPop=_useState2[0],setBtnPop=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),BtnUpdatePop=_useState4[0],setBtnUpdatePop=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),BtnUpdatePopTarget=_useState6[0],setBtnUpdatePopTarget=_useState6[1];var BtnUpdateRef=useRef(null);var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),BtnUpdateIndex=_useState8[0],setBtnUpdateIndex=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),BtnUpdateType=_useState10[0],setBtnUpdateType=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),BtnUpdateTitle=_useState12[0],setBtnUpdateTitle=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),BtnUpdateValue=_useState14[0],setBtnUpdateValue=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),cursorPos=_useState16[0],setCursorPos=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),cursorDone=_useState18[0],setCursorDone=_useState18[1];// Popup Config :\nvar swalWithBootstrapButtons=Swal.mixin({customClass:{confirmButton:'wizard-pages-active-btn py-3 px-3'},buttonsStyling:false});// render Functions :\nvar Tags=function Tags(){return/*#__PURE__*/React.createElement(\"div\",{className:\"popover-tags\"},/*#__PURE__*/React.createElement(Col,{lg:12},/*#__PURE__*/React.createElement(Row,{className:\"pl-1 my-2\"},platform===\"facebook\"&&/*#__PURE__*/ // Update the cursor position =>>>\nReact.createElement(Col,{xs:12,className:\"d-flex mb-1 mt-2\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto mr-auto wizard-config-tag\",onClick:function onClick(){handleResponse(function(resp){return resp.substring(0,cursorPos)+'##FIRST_NAME##'+resp.substring(cursorPos);});handleTags(!showTags);}},trans[lang].wizardMiracleInput.firstName)),platform===\"facebook\"&&/*#__PURE__*/React.createElement(Col,{xs:12,className:\"d-flex mb-1\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto mr-auto wizard-config-tag\",onClick:function onClick(){handleResponse(function(resp){return resp.substring(0,cursorPos)+'##LAST_NAME##'+resp.substring(cursorPos);});handleTags(!showTags);}},trans[lang].wizardMiracleInput.lastName)),/*#__PURE__*/React.createElement(Col,{xs:12,className:\"d-flex mb-1\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto mr-auto wizard-config-tag\",onClick:function onClick(){handleResponse(function(resp){return resp.substring(0,cursorPos)+'##FULL_NAME##'+resp.substring(cursorPos);});handleTags(!showTags);}},trans[lang].wizardMiracleInput.fullName)),/*#__PURE__*/React.createElement(Col,{xs:12,className:\"m-auto d-flex mb-2\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto mr-auto wizard-config-tag\",onClick:function onClick(){handleResponse(function(resp){return resp.substring(0,cursorPos)+'##PAGE_NAME##'+resp.substring(cursorPos);});handleTags(!showTags);}},trans[lang].wizardMiracleInput.pageName)))));};var BtnsPopover=/*#__PURE__*/React.createElement(Popover,{id:\"popover-quick-replies\"},/*#__PURE__*/React.createElement(Popover.Content,{style:{boxShadow:'0px 6px 10px #00000014'}},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12,className:\"d-flex p-0\"},/*#__PURE__*/React.createElement(IoIosClose,{className:\"ml-auto mr-1\",color:'#9F9F9F',size:'25',style:{cursor:'pointer'},onClick:function onClick(){return setBtnPop(false);}})),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mt-2 mb-3\"},/*#__PURE__*/React.createElement(Form.Control,{id:\"liste-Btn-miracle\",as:\"select\",onChange:function onChange(e){return handleBtnType(e.target.value);},defaultValue:BtnType,style:{backgroundColor:'#E4E6EB'}},/*#__PURE__*/React.createElement(\"option\",{value:\"web_url\"},trans[lang].wizardMiracleInput.url),/*#__PURE__*/React.createElement(\"option\",{value:\"phone_number\"},trans[lang].wizardMiracleInput.call))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mt-2\"},/*#__PURE__*/React.createElement(Row,{className:\"d-flex\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Form.Control,{id:\"liste-Btn-miracle\",type:\"text\",onChange:function onChange(e){return handleBtnTitle(e.target.value);},value:BtnTitle,placeholder:trans[lang].wizardMiracleInput.btnTitle,maxLength:\"20\"})),/*#__PURE__*/React.createElement(Col,{md:12,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"ml-auto wizard-config-input-feedback\"},trans[lang].wizardMiracleInput.remainingChars,20-BtnTitle.length)))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mb-2\"},/*#__PURE__*/React.createElement(Form.Control,{id:\"liste-Btn-miracle\",type:BtnType===\"web_url\"?\"text\":\"number\",onChange:function onChange(e){return handleBtnValue(e.target.value);},value:BtnValue,placeholder:BtnType===\"web_url\"?trans[lang].wizardMiracleInput.urlPlaceholder:trans[lang].wizardMiracleInput.phonePlaceholder})))),/*#__PURE__*/React.createElement(Col,{md:11,className:\"d-flex pl-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-pages-active-btn py-1 px-4\",onClick:function onClick(){return addNewBtn();}},trans[lang].wizardMiracleInput.ok)))));var BtnsUpdatePopover=function BtnsUpdatePopover(){return/*#__PURE__*/React.createElement(Popover,{id:\"popover-quick-replies\"},/*#__PURE__*/React.createElement(Popover.Content,{style:{boxShadow:'0px 6px 10px #00000014'}},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12,className:\"d-flex p-0\"},/*#__PURE__*/React.createElement(IoIosClose,{className:\"ml-auto mr-1\",color:'#9F9F9F',size:'25',style:{cursor:'pointer'},onClick:function onClick(){return setBtnUpdatePop(false);}})),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mt-2 mb-3\"},/*#__PURE__*/React.createElement(Form.Control,{id:\"liste-Btn-miracle\",as:\"select\",onChange:function onChange(e){return setBtnUpdateType(e.target.value);},defaultValue:BtnUpdateType,style:{backgroundColor:'#E4E6EB'}},/*#__PURE__*/React.createElement(\"option\",{value:\"web_url\"},trans[lang].wizardMiracleInput.url),/*#__PURE__*/React.createElement(\"option\",{value:\"phone_number\"},trans[lang].wizardMiracleInput.call))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mt-2\"},/*#__PURE__*/React.createElement(Row,{className:\"d-flex\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Form.Control,{id:\"liste-Btn-miracle\",type:\"text\",onChange:function onChange(e){return setBtnUpdateTitle(e.target.value);},value:BtnUpdateTitle,placeholder:trans[lang].wizardMiracleInput.btnTitle,maxLength:\"20\"})),/*#__PURE__*/React.createElement(Col,{md:12,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"ml-auto wizard-config-input-feedback\"},trans[lang].wizardMiracleInput.remainingChars,20-BtnUpdateTitle.length)))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mb-2\"},/*#__PURE__*/React.createElement(Form.Control,{id:\"liste-Btn-miracle\",type:BtnType===\"web_url\"?\"text\":\"number\",onChange:function onChange(e){return setBtnUpdateValue(e.target.value);},value:BtnUpdateValue,placeholder:BtnUpdateType===\"web_url\"?trans[lang].wizardMiracleInput.urlPlaceholder:trans[lang].wizardMiracleInput.phonePlaceholder})))),/*#__PURE__*/React.createElement(Col,{md:11,className:\"d-flex pl-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-pages-active-btn py-2 px-4\",onClick:function onClick(){return updateBtn();}},trans[lang].wizardMiracleInput.ok)))));};var popup=function popup(message){return swalWithBootstrapButtons.fire({title:\"\".concat(message),confirmButtonText:trans[lang].wizardMiracleInput.retry});};// Functions :\nvar addNewBtn=function addNewBtn(){var newBtns=_toConsumableArray(Btns);if(BtnType===\"web_url\"){var objectFb={type:\"web_url\",url:BtnValue,title:BtnTitle,webview_height_ratio:\"tall\"};if(BtnTitle===\"\"){popup(trans[lang].wizardMiracleInput.errBtnTitle);}else if(BtnValue===\"\"){popup(trans[lang].wizardMiracleInput.errBtnUrl);}else{newBtns.push(objectFb);// update new Btns :\nhandleBtns(newBtns);// reset\nresetBtns();}}else{var _objectFb={type:\"phone_number\",title:BtnTitle,payload:BtnValue};if(BtnTitle===\"\"){popup(trans[lang].wizardMiracleInput.errBtnTitle);}else if(BtnValue===\"\"){popup(trans[lang].wizardMiracleInput.errBtnPhone);}else{newBtns.push(_objectFb);// update new Btns :\nhandleBtns(newBtns);// reset\nresetBtns();}}};var updateBtn=function updateBtn(){var newBtns=_toConsumableArray(Btns);var newType=_toConsumableArray(BtnUpdateType).join('');var newTitle=_toConsumableArray(BtnUpdateTitle).join('');var newValue=_toConsumableArray(BtnUpdateValue).join('');if(newType===\"web_url\"){newBtns[BtnUpdateIndex].type=BtnUpdateType;newBtns[BtnUpdateIndex].title=newTitle;newBtns[BtnUpdateIndex].url=newValue;handleBtns(newBtns);setBtnUpdatePop(false);}else{newBtns[BtnUpdateIndex].type=BtnUpdateType;newBtns[BtnUpdateIndex].title=newTitle;newBtns[BtnUpdateIndex].payload=newValue;handleBtns(newBtns);setBtnUpdatePop(false);};};var deleteBtn=function deleteBtn(index){var newBtns=_toConsumableArray(Btns);newBtns.splice(index,1);handleBtns(newBtns);};var resetBtns=function resetBtns(){handleBtnType('web_url');handleBtnTitle('');handleBtnValue('');setBtnPop(false);// setBtnUpdatePop(false);\n};var handleUpdatePopover=function handleUpdatePopover(e,btn,indexBtn){setBtnUpdatePopTarget(e.target);setBtnPop(false);setBtnUpdatePop(false);if(btn.type===\"web_url\"){setBtnUpdateType(\"web_url\");setBtnUpdateIndex(indexBtn);setBtnUpdateTitle(btn.title);setBtnUpdateValue(btn.url);setBtnUpdatePop(true);}else{setBtnUpdateType(\"phone_number\");setBtnUpdateIndex(indexBtn);setBtnUpdateTitle(btn.title);setBtnUpdateValue(btn.payload);setBtnUpdatePop(true);}};// Set cursor to the last position\nuseEffect(function(){if(props.response.length&&!cursorDone){setCursorPos(props.response.length);setCursorDone(true);}if(props.response.length&&cursorDone){setCursorPos(props.response.length+1);}},[props.response]);return/*#__PURE__*/React.createElement(Row,{className:\"mx-0 px-2\"},/*#__PURE__*/React.createElement(Col,{lg:12,className:\"mx-0 px-2 d-flex\"},/*#__PURE__*/React.createElement(\"label\",{className:\"wizard-config-textarea-label my-2\"},label)),/*#__PURE__*/React.createElement(Col,{lg:12,className:\"px-2 mx-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-intent-miracle-box\"},showTags&&Tags(),/*#__PURE__*/React.createElement(Row,{className:\"mb-1 mx-0 pt-1 px-2\"},/*#__PURE__*/React.createElement(Col,{lg:12}),/*#__PURE__*/React.createElement(Col,{lg:1,className:\"d-flex p-0\"},/*#__PURE__*/React.createElement(Image,{src:showTags?TagInverse:Tag,onClick:function onClick(){return handleTags(!showTags);},className:\"my-auto mr-auto my-agents-msgs-tiny-icon\",style:{width:'19px',cursor:'pointer'}})),/*#__PURE__*/React.createElement(Col,{lg:1,className:\"d-flex p-0\"},showEmojis?/*#__PURE__*/React.createElement(EmoticonInverse,{width:20,height:20,style:{cursor:'pointer'},onClick:function onClick(){return handleEmojis(!showEmojis);},className:\"my-auto mr-auto my-agents-msgs-tiny-icon\"}):/*#__PURE__*/React.createElement(Emoticon,{width:20,height:20,style:{cursor:'pointer'},onClick:function onClick(){return handleEmojis(!showEmojis);},className:\"my-auto mr-auto my-agents-msgs-tiny-icon\"})),/*#__PURE__*/React.createElement(Col,{lg:1,className:\"d-flex p-0\"},showKeyboard?/*#__PURE__*/React.createElement(ArabicInverse,{width:20,height:20,style:{cursor:'pointer'},onClick:function onClick(){return handleKeyboard(!showKeyboard);},className:\"my-auto mr-auto my-agents-msgs-tiny-icon\"}):/*#__PURE__*/React.createElement(Arabic,{width:20,height:20,style:{cursor:'pointer'},onClick:function onClick(){return handleKeyboard(!showKeyboard);},className:\"my-auto mr-auto my-agents-msgs-tiny-icon\"})),/*#__PURE__*/React.createElement(Col,{lg:8},showKeyboard&&/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-config-keyboard-container\"},/*#__PURE__*/React.createElement(Keyboard,{keyboardRef:function keyboardRef(r){keyboard.current=r;keyboard.current.setInput(response);},onChange:function onChange(input){return handleResponse(input);},onKeyPress:function onKeyPress(key){return key===\"{enter}\"&&handleKeyboard(false);},layout:layout})),showEmojis&&/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-config-emoji-container\"},/*#__PURE__*/React.createElement(OutsideClickHandler,{onOutsideClick:function onOutsideClick(){return handleEmojis(false);}},/*#__PURE__*/React.createElement(Picker,{onEmojiClick:function onEmojiClick(e,obj){handleResponse(function(resp){return resp.substring(0,cursorPos)+obj.emoji+resp.substring(cursorPos);});setCursorPos(cursorPos+2);}}))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:12,className:\"mx-0 pt-2\"},/*#__PURE__*/React.createElement(\"textarea\",{onChange:function onChange(e){handleResponse(e.target.value);if(keyboard.current){keyboard.current.setInput(e.target.value);}},placeholder:trans[lang].wizardMiracleInput.textAreaPlaceholder,onKeyPress:function onKeyPress(e){setCursorPos(e.target.selectionStart+1);changeBtnColor&&changeBtnColor(true);},onClick:function onClick(e){setCursorPos(e.target.selectionStart);},value:response,className:\"wizard-config-textarea w-100 py-0\",rows:\"5\",maxLength:\"640\"}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:12,className:\"my-0 py-0\"},/*#__PURE__*/React.createElement(\"hr\",{style:{height:'2px',borderColor:'#B4B4B4',margin:'1px'}}))),platform===\"facebook\"&&/*#__PURE__*/React.createElement(Row,{className:\"mx-0\"},/*#__PURE__*/React.createElement(Col,{lg:12},/*#__PURE__*/React.createElement(Row,null,Btns.map(function(btn,indexBtn){return/*#__PURE__*/React.createElement(Col,{key:indexBtn,lg:3,className:\"mx-1\"},/*#__PURE__*/React.createElement(Row,{className:\"wizard-config-quick-replies-btn my-1 py-1 d-flex\"},btn.type===\"web_url\"?/*#__PURE__*/React.createElement(BsLink45Deg,{color:'#fff',size:15,className:\"ml-1 mr-auto my-auto\",onClick:function onClick(e){return handleUpdatePopover(e,btn,indexBtn);}}):/*#__PURE__*/React.createElement(IoIosCall,{color:'#fff',size:15,className:\"ml-1 mr-auto my-auto\",onClick:function onClick(e){return handleUpdatePopover(e,btn,indexBtn);}}),/*#__PURE__*/React.createElement(\"p\",{className:btn.type===\"web_url\"?\"mr-auto my-auto\":\"ml-1 mr-auto my-auto\",\"data-for\":\"quickReplyTip\",\"data-tip\":btn.title,onClick:function onClick(e){handleUpdatePopover(e,btn,indexBtn);}},btn.type===\"web_url\"?\"url\":\"call\"),/*#__PURE__*/React.createElement(AiOutlineCloseCircle,{className:\"ml-auto my-auto mr-1\",color:\"white\",size:\"15\",style:{cursor:'pointer'},onClick:function onClick(){return deleteBtn(indexBtn);}})),/*#__PURE__*/React.createElement(ReactTooltip,{id:\"quickReplyTip\",textColor:\"#fff\",backgroundColor:\"#009EE3\"}));}),Btns.length<3&&/*#__PURE__*/React.createElement(OverlayTrigger,{trigger:\"click\",placement:\"right\",show:BtnPop,overlay:BtnsPopover},/*#__PURE__*/React.createElement(Col,{lg:3,className:\"wizard-config-quick-replies-btn m-1 py-1 d-flex px-0\",onClick:function onClick(){setBtnUpdatePop(false);setBtnPop(function(prevState){return prevState?false:true;});}},/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto\"},trans[lang].wizardMiracleInput.addBtn))),/*#__PURE__*/React.createElement(\"div\",{ref:BtnUpdateRef},/*#__PURE__*/React.createElement(Overlay,{show:BtnUpdatePop,target:BtnUpdatePopTarget,placement:\"right\",container:BtnUpdateRef.current},BtnsUpdatePopover()))))))));}","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/app/Home/AutoWizard/WizardMiracleInput.js"],"names":["React","useState","useRef","useEffect","Row","Col","Image","OverlayTrigger","Overlay","Popover","Form","Picker","OutsideClickHandler","Keyboard","layout","ReactTooltip","Swal","trans","IoIosCall","AiOutlineCloseCircle","BsLink45Deg","IoIosClose","Tag","require","TagInverse","WizardMiracleInput","props","lang","label","response","handleResponse","showTags","handleTags","showEmojis","handleEmojis","showKeyboard","handleKeyboard","BtnType","handleBtnType","BtnTitle","handleBtnTitle","BtnValue","handleBtnValue","Btns","handleBtns","platform","changeBtnColor","keyboard","BtnPop","setBtnPop","BtnUpdatePop","setBtnUpdatePop","BtnUpdatePopTarget","setBtnUpdatePopTarget","BtnUpdateRef","BtnUpdateIndex","setBtnUpdateIndex","BtnUpdateType","setBtnUpdateType","BtnUpdateTitle","setBtnUpdateTitle","BtnUpdateValue","setBtnUpdateValue","cursorPos","setCursorPos","cursorDone","setCursorDone","swalWithBootstrapButtons","mixin","customClass","confirmButton","buttonsStyling","Tags","resp","substring","wizardMiracleInput","firstName","lastName","fullName","pageName","BtnsPopover","boxShadow","cursor","e","target","value","backgroundColor","url","call","btnTitle","remainingChars","length","urlPlaceholder","phonePlaceholder","addNewBtn","ok","BtnsUpdatePopover","updateBtn","popup","message","fire","title","confirmButtonText","retry","newBtns","objectFb","type","webview_height_ratio","errBtnTitle","errBtnUrl","push","resetBtns","payload","errBtnPhone","newType","join","newTitle","newValue","deleteBtn","index","splice","handleUpdatePopover","btn","indexBtn","width","r","current","setInput","input","key","obj","emoji","textAreaPlaceholder","selectionStart","height","borderColor","margin","map","prevState","addBtn"],"mappings":"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","sourcesContent":["import React, {useState, useRef, useEffect} from 'react';\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Image,\r\n    OverlayTrigger,\r\n    Overlay,\r\n    Popover,\r\n    Form,\r\n} from 'react-bootstrap';\r\nimport Picker from 'emoji-picker-react';\r\nimport OutsideClickHandler from 'react-outside-click-handler';\r\n\r\nimport Keyboard from 'react-simple-keyboard';\r\nimport layout from \"simple-keyboard-layouts/build/layouts/arabic\";\r\nimport ReactTooltip from 'react-tooltip';\r\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\r\n\r\n// Translations\r\nimport { trans } from '../../../Translations';\r\n\r\nimport { IoIosCall } from 'react-icons/io';\r\nimport { AiOutlineCloseCircle } from 'react-icons/ai';\r\nimport { BsLink45Deg } from 'react-icons/bs';\r\nimport { IoIosClose } from 'react-icons/io';\r\nimport {ReactComponent as Arabic} from '../../../assets/images/home/Arabic.svg';\r\nimport {ReactComponent as ArabicInverse} from '../../../assets/images/home/arabic01.svg';\r\nimport {ReactComponent as Emoticon} from '../../../assets/images/home/emoticon.svg';\r\nimport {ReactComponent as EmoticonInverse} from '../../../assets/images/home/emoticon01.svg';\r\n\r\nconst Tag = require('../../../assets/images/home/Tag.svg');\r\nconst TagInverse = require('../../../assets/images/home/tag01.svg');\r\n\r\nexport default function WizardMiracleInput(props) {\r\n\r\n    let {\r\n        lang,\r\n        label,\r\n        response,\r\n        handleResponse,\r\n        showTags,\r\n        handleTags,\r\n        showEmojis,\r\n        handleEmojis,\r\n        showKeyboard,\r\n        handleKeyboard,\r\n        BtnType,\r\n        handleBtnType,\r\n        BtnTitle,\r\n        handleBtnTitle,\r\n        BtnValue,\r\n        handleBtnValue,\r\n        Btns,\r\n        handleBtns,\r\n        platform,\r\n        changeBtnColor,\r\n    } = props;\r\n\r\n    \r\n    const keyboard = useRef(null);\r\n\r\n    const [BtnPop, setBtnPop] = useState(false);\r\n    const [BtnUpdatePop, setBtnUpdatePop] = useState(false);\r\n    const [BtnUpdatePopTarget, setBtnUpdatePopTarget] = useState(null);\r\n    const BtnUpdateRef = useRef(null);\r\n    const [BtnUpdateIndex, setBtnUpdateIndex] = useState(null);\r\n    const [BtnUpdateType, setBtnUpdateType] = useState('');\r\n    const [BtnUpdateTitle, setBtnUpdateTitle] = useState('');\r\n    const [BtnUpdateValue, setBtnUpdateValue] = useState('');\r\n    const [cursorPos, setCursorPos] = useState(0);\r\n    const [cursorDone, setCursorDone] = useState(null);\r\n\r\n    \r\n    // Popup Config :\r\n    const swalWithBootstrapButtons = Swal.mixin({\r\n        customClass: {\r\n          confirmButton: 'wizard-pages-active-btn py-3 px-3',\r\n        },\r\n        buttonsStyling: false\r\n    });\r\n\r\n    // render Functions :\r\n    const Tags = () => (\r\n        <div className=\"popover-tags\" >\r\n            <Col lg={12}>\r\n                <Row className=\"pl-1 my-2\">\r\n                    {platform === \"facebook\"\r\n                    &&\r\n                    // Update the cursor position =>>>\r\n                    <Col xs={12} className=\"d-flex mb-1 mt-2\">\r\n                        <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { handleResponse(resp => resp.substring(0, cursorPos) + '##FIRST_NAME##' + resp.substring(cursorPos)); handleTags(!showTags); }}>{trans[lang].wizardMiracleInput.firstName}</p>\r\n                    </Col>\r\n                    }\r\n\r\n                    {platform === \"facebook\"\r\n                    &&\r\n                    <Col xs={12} className=\"d-flex mb-1\">\r\n                        <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { handleResponse(resp => resp.substring(0, cursorPos) + '##LAST_NAME##' + resp.substring(cursorPos)); handleTags(!showTags); }}>{trans[lang].wizardMiracleInput.lastName}</p>\r\n                    </Col>\r\n                    }\r\n                    \r\n                    <Col xs={12} className=\"d-flex mb-1\">\r\n                        <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { handleResponse(resp => resp.substring(0, cursorPos) + '##FULL_NAME##' + resp.substring(cursorPos)); handleTags(!showTags); }}  >{trans[lang].wizardMiracleInput.fullName}</p>\r\n                    </Col>\r\n\r\n                    <Col xs={12} className=\"m-auto d-flex mb-2\">\r\n                        <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { handleResponse(resp => resp.substring(0, cursorPos) + '##PAGE_NAME##' + resp.substring(cursorPos)); handleTags(!showTags);  }}>{trans[lang].wizardMiracleInput.pageName}</p>\r\n                    </Col> \r\n                </Row>\r\n            </Col>\r\n        </div>\r\n    );\r\n\r\n    const BtnsPopover = (\r\n        <Popover id=\"popover-quick-replies\">\r\n          <Popover.Content style={{boxShadow: '0px 6px 10px #00000014'}}>\r\n            <Row className=\"justify-content-center\">\r\n                <Col md={12}>\r\n                    <Row>\r\n                        <Col md={12} className=\"d-flex p-0\" ><IoIosClose className=\"ml-auto mr-1\" color={'#9F9F9F'} size={'25'} style={{cursor: 'pointer'}} onClick={() => setBtnPop(false)} /></Col>\r\n                        <Col md={12} className=\"mt-2 mb-3\">\r\n                            <Form.Control id=\"liste-Btn-miracle\" as=\"select\" onChange={(e) => handleBtnType(e.target.value)} defaultValue={BtnType} style={{backgroundColor:'#E4E6EB'}}>\r\n                                <option value=\"web_url\">{trans[lang].wizardMiracleInput.url}</option>\r\n                                <option value=\"phone_number\">{trans[lang].wizardMiracleInput.call}</option>\r\n                            </Form.Control>\r\n                        </Col>\r\n                        \r\n                        <Col md={12} className=\"mt-2\">\r\n                            <Row className=\"d-flex\">\r\n                                <Col md={12}>\r\n                                    <Form.Control \r\n                                        id=\"liste-Btn-miracle\"\r\n                                        type={\"text\"} \r\n                                        onChange={(e) => handleBtnTitle(e.target.value)} \r\n                                        value={BtnTitle}  \r\n                                        placeholder={trans[lang].wizardMiracleInput.btnTitle}\r\n                                        maxLength=\"20\"\r\n                                    />\r\n                                </Col>\r\n\r\n                                <Col md={12} className=\"d-flex\">\r\n                                    <p className=\"ml-auto wizard-config-input-feedback\">{trans[lang].wizardMiracleInput.remainingChars}{20 - BtnTitle.length}</p>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n\r\n                        <Col md={12} className=\"mb-2\">\r\n                            <Form.Control \r\n                                id=\"liste-Btn-miracle\"\r\n                                type={BtnType === \"web_url\" ? \"text\" : \"number\"} \r\n                                onChange={(e) => handleBtnValue(e.target.value)} \r\n                                value={BtnValue} \r\n                                placeholder={BtnType === \"web_url\" ? trans[lang].wizardMiracleInput.urlPlaceholder : trans[lang].wizardMiracleInput.phonePlaceholder} \r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n\r\n                <Col md={11} className=\"d-flex pl-1\">\r\n                    <div className=\"wizard-pages-active-btn py-1 px-4\" onClick={() => addNewBtn()}>\r\n                        {trans[lang].wizardMiracleInput.ok}\r\n                    </div>\r\n                </Col>   \r\n            </Row>\r\n          </Popover.Content>\r\n        </Popover>\r\n    );\r\n\r\n    const BtnsUpdatePopover = () => (\r\n        <Popover id=\"popover-quick-replies\">\r\n          <Popover.Content style={{boxShadow: '0px 6px 10px #00000014'}}>\r\n            <Row className=\"justify-content-center\">\r\n                <Col md={12}>\r\n                    <Row>\r\n                    <Col md={12} className=\"d-flex p-0\" ><IoIosClose className=\"ml-auto mr-1\" color={'#9F9F9F'}   size={'25'} style={{cursor: 'pointer'}} onClick={() => setBtnUpdatePop(false)} /></Col>\r\n                        <Col md={12} className=\"mt-2 mb-3\">\r\n                            <Form.Control id=\"liste-Btn-miracle\" as=\"select\" onChange={(e) => setBtnUpdateType(e.target.value)} defaultValue={BtnUpdateType} style={{backgroundColor:'#E4E6EB'}}>\r\n                                <option value=\"web_url\">{trans[lang].wizardMiracleInput.url}</option>\r\n                                <option value=\"phone_number\">{trans[lang].wizardMiracleInput.call}</option>\r\n                            </Form.Control>\r\n                        </Col>\r\n                        \r\n                        <Col md={12} className=\"mt-2\">\r\n                            <Row className=\"d-flex\">\r\n                                <Col md={12}>\r\n                                    <Form.Control\r\n                                        id=\"liste-Btn-miracle\" \r\n                                        type={\"text\"} \r\n                                        onChange={(e) => setBtnUpdateTitle(e.target.value)} \r\n                                        value={BtnUpdateTitle}  \r\n                                        placeholder={trans[lang].wizardMiracleInput.btnTitle}\r\n                                        maxLength=\"20\" \r\n                                    />\r\n                                </Col>\r\n\r\n                                <Col md={12} className=\"d-flex\">\r\n                                    <p className=\"ml-auto wizard-config-input-feedback\">{trans[lang].wizardMiracleInput.remainingChars}{20 - BtnUpdateTitle.length}</p>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n\r\n                        <Col md={12} className=\"mb-2\">\r\n                            <Form.Control \r\n                                id=\"liste-Btn-miracle\"\r\n                                type={BtnType === \"web_url\" ? \"text\" : \"number\"} \r\n                                onChange={(e) => setBtnUpdateValue(e.target.value)} \r\n                                value={BtnUpdateValue} \r\n                                placeholder={BtnUpdateType === \"web_url\" ? trans[lang].wizardMiracleInput.urlPlaceholder : trans[lang].wizardMiracleInput.phonePlaceholder} \r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n\r\n                <Col md={11} className=\"d-flex pl-1\">\r\n                    <div className=\"wizard-pages-active-btn py-2 px-4\" onClick={() => updateBtn()}>\r\n                       {trans[lang].wizardMiracleInput.ok}\r\n                    </div>\r\n                </Col>   \r\n            </Row>\r\n                \r\n          </Popover.Content>\r\n        </Popover>\r\n    );\r\n\r\n    const popup = (message) => ( swalWithBootstrapButtons.fire({ title: `${message}`,confirmButtonText: trans[lang].wizardMiracleInput.retry }) );\r\n\r\n    // Functions :\r\n    const addNewBtn = () => {\r\n        let newBtns = [...Btns];\r\n    \r\n        if(BtnType === \"web_url\") {\r\n            let objectFb = {\r\n                type: \"web_url\",\r\n                url: BtnValue,\r\n                title: BtnTitle,\r\n                webview_height_ratio: \"tall\",\r\n            } \r\n\r\n            if(BtnTitle === \"\") {\r\n                popup(trans[lang].wizardMiracleInput.errBtnTitle);\r\n            } else if (BtnValue === \"\") {\r\n                popup(trans[lang].wizardMiracleInput.errBtnUrl);\r\n            } else {\r\n                newBtns.push(objectFb);\r\n                // update new Btns :\r\n                handleBtns(newBtns);\r\n                // reset\r\n                resetBtns();\r\n            }\r\n        } else {\r\n            let objectFb = {\r\n                type: \"phone_number\",\r\n                title: BtnTitle,\r\n                payload: BtnValue,\r\n            };\r\n\r\n            if(BtnTitle === \"\") {\r\n                popup(trans[lang].wizardMiracleInput.errBtnTitle);\r\n            } else if (BtnValue === \"\") {\r\n                popup(trans[lang].wizardMiracleInput.errBtnPhone);\r\n            } else {\r\n                newBtns.push(objectFb);\r\n                // update new Btns :\r\n                handleBtns(newBtns);\r\n                // reset\r\n                resetBtns();\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    const updateBtn = () => {\r\n        let newBtns = [...Btns];\r\n        let newType = [...BtnUpdateType].join('');\r\n        let newTitle = [...BtnUpdateTitle].join('');\r\n        let newValue = [...BtnUpdateValue].join('');\r\n\r\n        if(newType === \"web_url\") {\r\n            newBtns[BtnUpdateIndex].type = BtnUpdateType;\r\n            newBtns[BtnUpdateIndex].title = newTitle;\r\n            newBtns[BtnUpdateIndex].url = newValue;\r\n            handleBtns(newBtns);\r\n            setBtnUpdatePop(false);\r\n        } else {\r\n            newBtns[BtnUpdateIndex].type = BtnUpdateType;\r\n            newBtns[BtnUpdateIndex].title = newTitle;\r\n            newBtns[BtnUpdateIndex].payload = newValue;\r\n            handleBtns(newBtns);\r\n            setBtnUpdatePop(false);\r\n        };\r\n    };\r\n\r\n    const deleteBtn = (index) => {\r\n        let newBtns = [...Btns];\r\n        newBtns.splice(index,1);\r\n        handleBtns(newBtns);\r\n    };\r\n\r\n    const resetBtns = () => {\r\n        handleBtnType('web_url');\r\n        handleBtnTitle('');\r\n        handleBtnValue('');\r\n        setBtnPop(false);\r\n        // setBtnUpdatePop(false);\r\n    };\r\n\r\n    const handleUpdatePopover = (e,btn,indexBtn) => {\r\n        setBtnUpdatePopTarget(e.target);\r\n        setBtnPop(false);\r\n        setBtnUpdatePop(false);\r\n\r\n        if(btn.type === \"web_url\") {\r\n            setBtnUpdateType(\"web_url\");\r\n            setBtnUpdateIndex(indexBtn);\r\n            setBtnUpdateTitle(btn.title);\r\n            setBtnUpdateValue(btn.url);\r\n            setBtnUpdatePop(true);\r\n        } else {\r\n            setBtnUpdateType(\"phone_number\");\r\n            setBtnUpdateIndex(indexBtn);\r\n            setBtnUpdateTitle(btn.title);\r\n            setBtnUpdateValue(btn.payload);\r\n            setBtnUpdatePop(true);\r\n        }\r\n    };\r\n\r\n    // Set cursor to the last position\r\n    useEffect(() => {\r\n        if(props.response.length && !cursorDone) {\r\n            setCursorPos(props.response.length);\r\n            setCursorDone(true);\r\n        } \r\n        \r\n        if(props.response.length && cursorDone) {\r\n            setCursorPos(props.response.length + 1);\r\n        }\r\n    },[props.response]);\r\n\r\n\r\n    return (\r\n        <Row className=\"mx-0 px-2\">\r\n\r\n            <Col lg={12} className=\"mx-0 px-2 d-flex\">\r\n                <label className=\"wizard-config-textarea-label my-2\">{label}</label>\r\n            </Col>\r\n\r\n            <Col lg={12} className=\"px-2 mx-0\">\r\n            <div className=\"wizard-intent-miracle-box\">\r\n                {showTags && Tags()}\r\n                <Row className=\"mb-1 mx-0 pt-1 px-2\">\r\n                    <Col lg={12} />\r\n\r\n                    <Col lg={1} className=\"d-flex p-0\">\r\n                        <Image \r\n                            src={showTags ? TagInverse : Tag} \r\n                            onClick={() => handleTags(!showTags)} \r\n                            className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" \r\n                            style={{ width: '19px', cursor: 'pointer'}} \r\n                        />\r\n                    </Col>                                \r\n\r\n                    <Col lg={1} className=\"d-flex p-0\">\r\n                        {showEmojis ? \r\n                        <EmoticonInverse width={20} height={20} style={{cursor: 'pointer'}} onClick={() => handleEmojis(!showEmojis)} className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" />\r\n                        : \r\n                        <Emoticon width={20} height={20} style={{cursor: 'pointer'}} onClick={() => handleEmojis(!showEmojis)} className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" />\r\n                        }\r\n                    </Col>\r\n        \r\n                    <Col lg={1} className=\"d-flex p-0\">\r\n                        {showKeyboard ? \r\n                        <ArabicInverse width={20} height={20} style={{cursor: 'pointer'}} onClick={() => handleKeyboard(!showKeyboard)} className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" />\r\n                        : \r\n                        <Arabic width={20} height={20} style={{cursor: 'pointer'}} onClick={() => handleKeyboard(!showKeyboard)} className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" />\r\n                        }\r\n                    </Col>\r\n                \r\n                    <Col lg={8}>\r\n                        {showKeyboard &&\r\n                            <div className=\"wizard-config-keyboard-container\">\r\n                                <Keyboard \r\n                                    keyboardRef={r => {keyboard.current = r; keyboard.current.setInput(response);}}\r\n                                    onChange={(input) => handleResponse(input)}\r\n                                    onKeyPress={(key) => key === \"{enter}\" && handleKeyboard(false)}\r\n                                    layout={layout} \r\n                                />\r\n                            </div>\r\n                        }\r\n\r\n                        {showEmojis &&\r\n                            <div className=\"wizard-config-emoji-container\" >\r\n                                <OutsideClickHandler onOutsideClick={() => handleEmojis(false)}>\r\n                                    <Picker onEmojiClick={(e,obj) => { handleResponse(resp => resp.substring(0, cursorPos) + obj.emoji + resp.substring(cursorPos)); setCursorPos(cursorPos + 2) }} />\r\n                                </OutsideClickHandler>\r\n                            </div>\r\n                        } \r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                    <Col lg={12} className=\"mx-0 pt-2\">\r\n                        <textarea\r\n                            onChange={(e) => { handleResponse(e.target.value); if(keyboard.current) { keyboard.current.setInput(e.target.value); } }} \r\n                            placeholder={trans[lang].wizardMiracleInput.textAreaPlaceholder}\r\n                            onKeyPress={(e) => { setCursorPos(e.target.selectionStart + 1); changeBtnColor && changeBtnColor(true); }}\r\n                            onClick={(e) => { setCursorPos(e.target.selectionStart); }}\r\n                            value={response} \r\n                            className=\"wizard-config-textarea w-100 py-0\" \r\n                            rows=\"5\"\r\n                            maxLength=\"640\"\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row >\r\n                    <Col lg={12} className=\"my-0 py-0\">\r\n                        <hr style={{height: '2px', borderColor: '#B4B4B4', margin: '1px'}} />\r\n                    </Col>\r\n                </Row>\r\n\r\n                {platform === \"facebook\"\r\n                &&\r\n                <Row className=\"mx-0\">\r\n                    <Col lg={12}>\r\n                        <Row>\r\n                            {Btns.map((btn,indexBtn) => \r\n                                <Col key={indexBtn} lg={3} className=\"mx-1\">\r\n                                    <Row className=\"wizard-config-quick-replies-btn my-1 py-1 d-flex\">\r\n                                        {btn.type === \"web_url\" \r\n                                        ? \r\n                                        <BsLink45Deg color={'#fff'} size={15} className=\"ml-1 mr-auto my-auto\" onClick={(e) => handleUpdatePopover(e,btn,indexBtn)}/>\r\n                                        :\r\n                                        <IoIosCall color={'#fff'} size={15} className=\"ml-1 mr-auto my-auto\" onClick={(e) => handleUpdatePopover(e,btn,indexBtn) }/>\r\n                                        }\r\n                                        <p className={btn.type === \"web_url\" ? \"mr-auto my-auto\" : \"ml-1 mr-auto my-auto\" } data-for='quickReplyTip' data-tip={btn.title} onClick={(e) => {handleUpdatePopover(e,btn,indexBtn)}}>{btn.type === \"web_url\" ? \"url\" : \"call\"}</p>\r\n                                        <AiOutlineCloseCircle className=\"ml-auto my-auto mr-1\" color={\"white\"} size={\"15\"} style={{cursor: 'pointer'}} onClick={() => deleteBtn(indexBtn)} />\r\n                                    </Row>\r\n                                    <ReactTooltip id='quickReplyTip' textColor='#fff' backgroundColor='#009EE3' />\r\n                                </Col>\r\n                            )}\r\n                            {Btns.length < 3\r\n                            && \r\n                            <OverlayTrigger trigger=\"click\" placement=\"right\" show={BtnPop} overlay={BtnsPopover} >\r\n                                <Col lg={3} className=\"wizard-config-quick-replies-btn m-1 py-1 d-flex px-0\" onClick={() => {setBtnUpdatePop(false); setBtnPop(prevState => prevState ? false : true);}}>\r\n                                    <p className=\"m-auto\">{trans[lang].wizardMiracleInput.addBtn}</p>\r\n                                </Col>\r\n                            </OverlayTrigger>\r\n                            }\r\n\r\n                            <div ref={BtnUpdateRef}>\r\n                                <Overlay show={BtnUpdatePop} target={BtnUpdatePopTarget} placement=\"right\" container={BtnUpdateRef.current}>\r\n                                   {BtnsUpdatePopover()}\r\n                                </Overlay>\r\n                            </div>\r\n\r\n                        </Row>\r\n                    </Col>\r\n                </Row> \r\n                }\r\n               </div>\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}