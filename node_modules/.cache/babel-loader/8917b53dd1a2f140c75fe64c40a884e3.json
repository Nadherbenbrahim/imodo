{"ast":null,"code":"var _jsxFileName = \"/usr/work/smart_front_oussema/src/app/Home/AutoWizard/WizardIntentDetails.js\";\nimport React, { useState, useRef } from 'react';\nimport { Row, Col, Popover, Overlay, Modal, Button, Form } from 'react-bootstrap';\nimport Popup from 'reactjs-popup';\nimport axios from 'axios';\nimport ReactTooltip from 'react-tooltip';\nimport { connect } from 'react-redux';\nimport { addGenericResponse, updateGenericResponse } from '../../../redux/actions/wizardActions';\nimport { getAllProductCategories } from '../../../redux/actions/socialMediaActions';\nimport { host } from '../../../config';\nimport { FaTrashAlt } from 'react-icons/fa';\nimport { IoIosArrowDown, IoIosClose } from 'react-icons/io';\nimport { AiOutlineCloseCircle } from 'react-icons/ai';\nimport { MdAddCircleOutline } from 'react-icons/md';\n\nfunction WizardIntentDetails(props) {\n  const [intentState, setIntentState] = useState('save');\n  const [products, setProducts] = useState([]);\n  const [genericResponse, setGenericResponse] = useState('');\n  const [specificResponse, SetSpecificResponse] = useState('');\n  const [productName, setProductName] = useState('');\n  const [newCategory, setNewCategory] = useState('');\n  const [productToAddViaModal, setProductToAddViaModal] = useState('');\n  const [show, setShow] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [showModalInput, setShowModalInput] = useState(false);\n  const [target, setTarget] = useState(null);\n  const ref = useRef(null);\n\n  const handleModal = () => {\n    setShow(false);\n    setShowModal(!showModal);\n  };\n\n  const handleClick = event => {\n    setShow(!show);\n    setTarget(event.target);\n  };\n\n  const handleSaveGenericResponse = (intent, wizardIdProject) => {\n    let project = {\n      genericAnswer: genericResponse,\n      intent: intent\n    };\n\n    if (intentState === 'save') {\n      props.addGenericResponse(project, wizardIdProject);\n      setIntentState('update');\n    } else {\n      props.updateGenericResponse(project, wizardIdProject);\n    }\n  };\n\n  const addNewProduct = idProjet => {\n    // First update api : entity === categorie :\n    let productToSend = {\n      idPage: props.wizardSelectedPage.id,\n      typePage: props.wizardSelectedPage.platform,\n      entity: productName,\n      intent: props.intent,\n      genericAnswer: genericResponse,\n      specificAnswer: specificResponse,\n      categorie: productName\n    }; // setProducts(products => [...products, productToSend ]);\n    // // Reset\n    // setShow(!show);\n    // setProductName('');\n    // SetSpecificResponse('');\n\n    axios.put(host + `/api/v1/secure/project/firstupdate/${idProjet}`, productToSend, {\n      headers: {\n        'authorization': 'Bearer ' + localStorage.getItem('authtoken')\n      }\n    }).then(res => {\n      // console.log('first update response redux =>', res.data)   \n      if (res.data.data === \"not exist\") {\n        setShow(!show); // Call the categories api :\n\n        setShowModal(true);\n      } else {\n        setProducts(products => [...products, productToSend]); // Reset\n\n        setShow(!show);\n        setProductName('');\n        SetSpecificResponse('');\n      }\n\n      ;\n    }).catch(err => console.log(\"Wizard Intent Detail addNewProduct err\", err));\n  };\n\n  const addNewProductViaModal = idProjet => {\n    // Send the update with the new category name :) :\n    setProducts(products => [...products, productToAddViaModal]); // // Reset\n\n    setProductName('');\n    SetSpecificResponse('');\n    setShowModal(false);\n  };\n\n  const deleteProduct = index => {\n    let oldProducts = [...products];\n    oldProducts.splice(index, 1);\n    setProducts(oldProducts);\n  };\n\n  return /*#__PURE__*/React.createElement(Col, {\n    lg: 5,\n    className: \"mb-3 mr-3\",\n    key: props.intent.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex flex-column wizard-config-intents-container\",\n    style: {\n      borderRadius: '0.5rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"justify-content-between d-flex flex-row mx-0 p-0  wizard-config-intents-top-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto wizard-config-intent-title p-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, props.intent), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-auto d-flex p-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FaTrashAlt, {\n    color: \"#818E94\",\n    size: \"20\",\n    className: \"m-auto\",\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => props.stateManagment(props.selectedIntents.filter(intent => intent !== props.intent)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(IoIosArrowDown, {\n    color: \"#818E94\",\n    size: \"20\",\n    className: \"my-auto ml-2\",\n    style: {\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mr-2 ml-2 mt-2 mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"wizard-config-textarea-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }, \"Generic Response\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    onChange: e => setGenericResponse(e.target.value),\n    value: genericResponse,\n    className: \"wizard-config-textarea\",\n    rows: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }, intentState === 'save' ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-auto mr-2 mb-2 wizard-config-update-btn\",\n    onClick: () => handleSaveGenericResponse(props.intent, props.wizardIdProject),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 34\n    }\n  }, \"Save\") : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-auto mr-2 mb-2 wizard-config-update-btn\",\n    onClick: () => handleSaveGenericResponse(props.intent, props.wizardIdProject),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 34\n    }\n  }, \"Update\")), intentState === 'update' && /*#__PURE__*/React.createElement(Col, {\n    lg: 11,\n    className: \"mx-auto mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 29\n    }\n  }, products.length > 0 && products.map((product, index) => /*#__PURE__*/React.createElement(Col, {\n    key: index,\n    lg: 5,\n    className: \"d-flex flex-row mb-3 pt-2 pb-2 wizard-config-product-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 41\n    }\n  }, product.entity.length > 8 ? /*#__PURE__*/React.createElement(\"p\", {\n    \"data-for\": \"entityTip\",\n    \"data-tip\": product.entity,\n    className: \"m-auto wizard-config-product-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 49\n    }\n  }, product.entity.substring(0, 7), \"...\") : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"m-auto wizard-config-product-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 49\n    }\n  }, product.entity), /*#__PURE__*/React.createElement(AiOutlineCloseCircle, {\n    className: \"my-auto ml-1\",\n    color: \"#F49BCC\",\n    size: \"20\",\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => deleteProduct(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(ReactTooltip, {\n    id: \"entityTip\",\n    textColor: \"#fff\",\n    backgroundColor: \"#E5007D\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    lg: 5,\n    onClick: handleClick,\n    className: \"d-flex flex-row mb-3 pt-2 pb-2 wizard-config-add-product-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(MdAddCircleOutline, {\n    className: \"my-auto mr-2\",\n    color: \"#4080FC\",\n    size: \"20\",\n    style: {\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"my-auto wizard-config-add-product-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 37\n    }\n  }, \"Add product\")), /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Overlay, {\n    show: show,\n    target: target,\n    placement: \"right\",\n    container: ref.current,\n    containerPadding: 50,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Popover, {\n    id: \"popover-contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Popover.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(IoIosClose, {\n    className: \"ml-auto\",\n    color: '#9F9F9F',\n    size: '25',\n    onClick: handleClick,\n    style: {\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 53\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mr-2 ml-2 mt-2 mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"wizard-config-textarea-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 53\n    }\n  }, \"Product name\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => setProductName(e.target.value),\n    value: productName,\n    className: \"wizard-config-textarea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 53\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mr-2 ml-2 mt-2 mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"wizard-config-textarea-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 53\n    }\n  }, \"Specific response\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    onChange: e => SetSpecificResponse(e.target.value),\n    value: specificResponse,\n    className: \"wizard-config-textarea\",\n    rows: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 53\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mr-2 ml-2 mt-2 mb-2 d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-auto mb-2 wizard-config-update-btn\",\n    onClick: () => addNewProduct(props.wizardIdProject),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 52\n    }\n  }, \"Add\")))))))))), /*#__PURE__*/React.createElement(Modal, {\n    show: showModal,\n    onHide: handleModal,\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"d-flex mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IoIosClose, {\n    className: \"ml-auto mr-3\",\n    color: '#9F9F9F',\n    size: '28',\n    onClick: handleModal,\n    style: {\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    className: \"d-flex mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"m-auto wizard-config-intent-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 25\n    }\n  }, \"Please specify the category\")), /*#__PURE__*/React.createElement(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Col, {\n    lg: 10,\n    className: \"d-flex justify-content-between p-0 mx-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 8,\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 29\n    }\n  }, showModalInput && /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"mr-auto w-100 my-auto add-new-category-input-container\",\n    onChange: e => setNewCategory(e.target.value),\n    value: newCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: 4,\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"ml-auto my-auto wizard-config-intent-name\",\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => setShowModalInput(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 33\n    }\n  }, \"create new\"))), /*#__PURE__*/React.createElement(Col, {\n    lg: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Col, {\n    lg: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"d-flex w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    disabled: showModalInput,\n    as: \"select\",\n    className: \"wizard-config-intent-title\",\n    custom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    className: \"wizard-config-intent-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 37\n    }\n  }, \"Choose Category...\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 37\n    }\n  }, \"1\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 37\n    }\n  }, \"2\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 37\n    }\n  }, \"3\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 37\n    }\n  }, \"4\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 37\n    }\n  }, \"5\")))), /*#__PURE__*/React.createElement(Col, {\n    lg: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-auto mb-2 wizard-config-update-btn\",\n    onClick: () => addNewProductViaModal(props.wizardIdProject),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 25\n    }\n  }, \"Add\")))));\n}\n\nconst mapStateToProps = state => ({\n  wizardIdProject: state.wizardR.wizardIdProject,\n  wizardIntentType: state.wizardR.wizardIntentType,\n  wizardSelectedPage: state.wizardR.wizardSelectedPage // wizardStep: state.wizardR.wizardStep,\n\n});\n\nexport default connect(mapStateToProps, {\n  addGenericResponse,\n  updateGenericResponse,\n  getAllProductCategories\n})(WizardIntentDetails);","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/app/Home/AutoWizard/WizardIntentDetails.js"],"names":["React","useState","useRef","Row","Col","Popover","Overlay","Modal","Button","Form","Popup","axios","ReactTooltip","connect","addGenericResponse","updateGenericResponse","getAllProductCategories","host","FaTrashAlt","IoIosArrowDown","IoIosClose","AiOutlineCloseCircle","MdAddCircleOutline","WizardIntentDetails","props","intentState","setIntentState","products","setProducts","genericResponse","setGenericResponse","specificResponse","SetSpecificResponse","productName","setProductName","newCategory","setNewCategory","productToAddViaModal","setProductToAddViaModal","show","setShow","showModal","setShowModal","showModalInput","setShowModalInput","target","setTarget","ref","handleModal","handleClick","event","handleSaveGenericResponse","intent","wizardIdProject","project","genericAnswer","addNewProduct","idProjet","productToSend","idPage","wizardSelectedPage","id","typePage","platform","entity","specificAnswer","categorie","put","headers","localStorage","getItem","then","res","data","catch","err","console","log","addNewProductViaModal","deleteProduct","index","oldProducts","splice","borderRadius","cursor","stateManagment","selectedIntents","filter","e","value","length","map","product","substring","current","mapStateToProps","state","wizardR","wizardIntentType"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Popover,\r\n    Overlay,\r\n    Modal,\r\n    Button,\r\n    Form,\r\n} from 'react-bootstrap';\r\nimport Popup from 'reactjs-popup';\r\nimport axios from 'axios';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\n\r\nimport { connect } from 'react-redux';\r\nimport { addGenericResponse, updateGenericResponse } from '../../../redux/actions/wizardActions';\r\nimport { getAllProductCategories } from '../../../redux/actions/socialMediaActions';\r\nimport { host } from '../../../config';\r\n\r\nimport { FaTrashAlt } from 'react-icons/fa';\r\nimport { IoIosArrowDown,IoIosClose } from 'react-icons/io';\r\nimport { AiOutlineCloseCircle } from 'react-icons/ai';\r\nimport { MdAddCircleOutline } from 'react-icons/md';\r\n\r\n\r\nfunction WizardIntentDetails(props) {\r\n\r\n    const [intentState, setIntentState] = useState('save');\r\n    const [products, setProducts] = useState([]);\r\n\r\n    const [genericResponse, setGenericResponse] = useState('');\r\n    const [specificResponse, SetSpecificResponse] = useState('');\r\n    const [productName, setProductName] = useState('');\r\n    const [newCategory, setNewCategory] = useState('');\r\n    const [productToAddViaModal, setProductToAddViaModal] = useState('');\r\n\r\n    const [show, setShow] = useState(false);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [showModalInput, setShowModalInput] = useState(false);\r\n    const [target, setTarget] = useState(null);\r\n    const ref = useRef(null);\r\n\r\n    const handleModal = () => {\r\n        setShow(false);\r\n        setShowModal(!showModal);\r\n    };\r\n\r\n    const handleClick = (event) => {\r\n        setShow(!show);\r\n        setTarget(event.target);\r\n    };\r\n\r\n    const handleSaveGenericResponse = (intent,wizardIdProject) => {\r\n        let project = {\r\n            genericAnswer : genericResponse,\r\n            intent: intent,\r\n        };\r\n        \r\n        if(intentState === 'save') {\r\n            props.addGenericResponse(project,wizardIdProject);\r\n            setIntentState('update');\r\n        } else {\r\n            props.updateGenericResponse(project,wizardIdProject);\r\n        }\r\n    };\r\n    \r\n    const addNewProduct = (idProjet) => {\r\n        \r\n        // First update api : entity === categorie :\r\n        let productToSend = {\r\n            idPage: props.wizardSelectedPage.id,\r\n            typePage : props.wizardSelectedPage.platform,\r\n            entity: productName,\r\n            intent: props.intent,\r\n            genericAnswer: genericResponse,\r\n            specificAnswer: specificResponse,\r\n            categorie: productName,\r\n        };\r\n\r\n        // setProducts(products => [...products, productToSend ]);\r\n        // // Reset\r\n        // setShow(!show);\r\n        // setProductName('');\r\n        // SetSpecificResponse('');\r\n\r\n        axios.put(host + `/api/v1/secure/project/firstupdate/${idProjet}`, productToSend, {\r\n            headers: {\r\n                'authorization': 'Bearer ' + localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then( res => {\r\n            // console.log('first update response redux =>', res.data)   \r\n            if (res.data.data === \"not exist\") {\r\n                setShow(!show);\r\n                // Call the categories api :\r\n\r\n                setShowModal(true);\r\n            } else {\r\n                setProducts(products => [...products, productToSend ]);\r\n                // Reset\r\n                setShow(!show);\r\n                setProductName('');\r\n                SetSpecificResponse('');\r\n            };\r\n        })\r\n        .catch( err => console.log(\"Wizard Intent Detail addNewProduct err\", err))\r\n    };\r\n\r\n    const addNewProductViaModal = (idProjet) => {\r\n        \r\n        // Send the update with the new category name :) :\r\n        \r\n        setProducts(products => [...products, productToAddViaModal ]);\r\n        // // Reset\r\n        setProductName('');\r\n        SetSpecificResponse('');\r\n        setShowModal(false);\r\n    };\r\n\r\n    const deleteProduct = (index) => {\r\n        let oldProducts = [...products];\r\n\r\n        oldProducts.splice(index,1);\r\n        setProducts(oldProducts);    \r\n    };\r\n\r\n    return (\r\n                  \r\n        <Col lg={5} className=\"mb-3 mr-3\" key={props.intent.id}>\r\n            \r\n            <div className=\"d-flex flex-column wizard-config-intents-container\" style={{borderRadius: '0.5rem'}}>\r\n                \r\n                <div className=\"justify-content-between d-flex flex-row mx-0 p-0  wizard-config-intents-top-row\">\r\n                    <p className=\"my-auto wizard-config-intent-title p-2\">{props.intent}</p>\r\n\r\n                    <div className=\"my-auto d-flex p-2\">\r\n                        <FaTrashAlt  color={\"#818E94\"} size={\"20\"} className=\"m-auto\" style={{cursor: 'pointer'}} onClick={ () => props.stateManagment(props.selectedIntents.filter( intent =>(intent !== props.intent ))) } />\r\n                        <IoIosArrowDown color={\"#818E94\"} size={\"20\"} className=\"my-auto ml-2\" style={{cursor: 'pointer'}} />\r\n                    </div>\r\n                </div>\r\n                \r\n              \r\n                <div>\r\n                    <div className=\"mr-2 ml-2 mt-2 mb-2\">\r\n                        <label className=\"wizard-config-textarea-label\">Generic Response</label>\r\n                        <textarea onChange={(e) => setGenericResponse(e.target.value)} value={genericResponse} className=\"wizard-config-textarea\" rows=\"5\"/>\r\n                    </div>\r\n\r\n                    <div className=\"d-flex\">\r\n                        {\r\n                            intentState === 'save' \r\n                            ?\r\n                                (<div className=\"ml-auto mr-2 mb-2 wizard-config-update-btn\" onClick={() => handleSaveGenericResponse(props.intent,props.wizardIdProject)}>Save</div>)\r\n                            :\r\n                                (<div className=\"ml-auto mr-2 mb-2 wizard-config-update-btn\" onClick={() => handleSaveGenericResponse(props.intent,props.wizardIdProject)}>Update</div>)\r\n                        }\r\n                    </div>\r\n\r\n                    {/* PRODUCTS */}\r\n                    {\r\n                        intentState === 'update' &&\r\n                        <Col lg={11} className=\"mx-auto mt-4\">\r\n                            <Row className=\"justify-content-between\">\r\n                                {\r\n                                    products.length > 0 &&\r\n                                    products.map((product,index) => \r\n                                        <Col key={index} lg={5} className=\"d-flex flex-row mb-3 pt-2 pb-2 wizard-config-product-box\">\r\n                                            {\r\n                                                product.entity.length > 8\r\n                                                ?\r\n                                                <p data-for='entityTip' data-tip={product.entity} className=\"m-auto wizard-config-product-name\">{product.entity.substring(0,7)}...</p>\r\n                                                :\r\n                                                <p className=\"m-auto wizard-config-product-name\">{product.entity}</p>\r\n                                            }\r\n                                            <AiOutlineCloseCircle className=\"my-auto ml-1\" color={\"#F49BCC\"} size={\"20\"} style={{cursor: 'pointer'}} onClick={() => deleteProduct(index)} />\r\n                                            <ReactTooltip id='entityTip' textColor='#fff' backgroundColor='#E5007D' />\r\n                                        </Col> \r\n                                    )\r\n                                }    \r\n                                \r\n                                <Col lg={5} onClick={handleClick} className=\"d-flex flex-row mb-3 pt-2 pb-2 wizard-config-add-product-box\">\r\n                                    <MdAddCircleOutline className=\"my-auto mr-2\" color={\"#4080FC\"} size={\"20\"} style={{cursor: 'pointer'}} />\r\n                                    <p className=\"my-auto wizard-config-add-product-name\">Add product</p>\r\n                                </Col>\r\n\r\n                                <div ref={ref}>\r\n                                    <Overlay\r\n                                        show={show}\r\n                                        target={target}\r\n                                        placement=\"right\"\r\n                                        container={ref.current}\r\n                                        containerPadding={50}\r\n                                    >\r\n                                        <Popover id=\"popover-contained\">\r\n                                            <Popover.Content>\r\n                                                <div className=\"d-flex\">\r\n                                                    <IoIosClose className=\"ml-auto\" color={'#9F9F9F'} size={'25'} onClick={handleClick} style={{cursor: 'pointer'}} />\r\n                                                </div>\r\n                                                <div className=\"mr-2 ml-2 mt-2 mb-2\">\r\n                                                    <label className=\"wizard-config-textarea-label\">Product name</label>\r\n                                                    <input onChange={(e) => setProductName(e.target.value)} value={productName} className=\"wizard-config-textarea\" />\r\n                                                </div>\r\n                                                \r\n                                                <div className=\"mr-2 ml-2 mt-2 mb-2\">\r\n                                                    <label className=\"wizard-config-textarea-label\">Specific response</label>\r\n                                                    <textarea onChange={(e) => SetSpecificResponse(e.target.value)} value={specificResponse} className=\"wizard-config-textarea\" rows=\"3\"/>\r\n                                                </div>\r\n\r\n                                                <div className=\"mr-2 ml-2 mt-2 mb-2 d-flex\">\r\n                                                   <div className=\"ml-auto mb-2 wizard-config-update-btn\" onClick={() => addNewProduct(props.wizardIdProject)}>Add</div>\r\n                                                </div>\r\n                                            </Popover.Content>\r\n                                        </Popover>\r\n                                    </Overlay>\r\n                                </div>\r\n                            </Row>\r\n                        </Col>\r\n                    }\r\n                </div>\r\n               \r\n            \r\n            </div>\r\n\r\n            <Modal show={showModal} onHide={handleModal} centered>\r\n          \r\n                <Modal.Body>\r\n                    \r\n                    <Row className=\"d-flex mb-3\">\r\n                        <IoIosClose className=\"ml-auto mr-3\" color={'#9F9F9F'} size={'28'} onClick={handleModal} style={{cursor: 'pointer'}} />\r\n                    </Row>\r\n\r\n                    <Row className=\"d-flex mb-3\">\r\n                        <p className=\"m-auto wizard-config-intent-title\">Please specify the category</p>\r\n                    </Row>\r\n\r\n                    <Row className=\"mb-3\">\r\n                        <Col lg={1} />\r\n\r\n                        <Col lg={10} className=\"d-flex justify-content-between p-0 mx-0\">\r\n                            <Col lg={8} className=\"d-flex\">\r\n                                {showModalInput && \r\n                                    <input \r\n                                        type=\"text\" \r\n                                        className=\"mr-auto w-100 my-auto add-new-category-input-container\" \r\n                                        onChange={ (e) => setNewCategory(e.target.value)}\r\n                                        value={newCategory}\r\n                                    />\r\n                                }\r\n                            </Col>\r\n\r\n                            <Col lg={4} className=\"d-flex\">\r\n                                <p \r\n                                    className=\"ml-auto my-auto wizard-config-intent-name\" \r\n                                    style={{cursor: 'pointer'}} \r\n                                    onClick={() => setShowModalInput(true)}\r\n                                >\r\n                                create new\r\n                                </p>\r\n                            </Col>\r\n                        </Col>\r\n\r\n                        <Col lg={1} />\r\n                    </Row>\r\n\r\n                    <Row>\r\n                        <Col lg={1} />\r\n\r\n                        <Col lg={10}>\r\n                            <Form.Group className=\"d-flex w-100\">\r\n                                <Form.Control disabled={showModalInput} as=\"select\" className=\"wizard-config-intent-title\" custom>\r\n                                    <option className=\"wizard-config-intent-title\">Choose Category...</option>\r\n                                    <option>1</option>\r\n                                    <option>2</option>\r\n                                    <option>3</option>\r\n                                    <option>4</option>\r\n                                    <option>5</option>\r\n                                </Form.Control>\r\n                            </Form.Group>\r\n                        </Col>\r\n\r\n                        <Col lg={1} /> \r\n                    </Row>\r\n                    \r\n                    <Row className=\"mb-3\">\r\n                        <div className=\"m-auto mb-2 wizard-config-update-btn\" onClick={() => addNewProductViaModal(props.wizardIdProject)}>Add</div>\r\n                    </Row>\r\n                </Modal.Body>\r\n            </Modal>\r\n       \r\n        </Col>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    wizardIdProject: state.wizardR.wizardIdProject,\r\n    wizardIntentType: state.wizardR.wizardIntentType,\r\n    wizardSelectedPage: state.wizardR.wizardSelectedPage,\r\n    // wizardStep: state.wizardR.wizardStep,\r\n})\r\n\r\nexport default connect(mapStateToProps, { addGenericResponse, updateGenericResponse, getAllProductCategories })(WizardIntentDetails)\r\n"]},"metadata":{},"sourceType":"module"}