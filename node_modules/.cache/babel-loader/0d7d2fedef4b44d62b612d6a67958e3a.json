{"ast":null,"code":"import _toConsumableArray from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import{Row,Col,Image,OverlayTrigger,Overlay,Popover,Form}from'react-bootstrap';import Picker from'emoji-picker-react';import Keyboard from'react-simple-keyboard';import layout from\"simple-keyboard-layouts/build/layouts/arabic\";import ReactTooltip from'react-tooltip';import Swal from'sweetalert2/dist/sweetalert2.js';import{IoIosCall}from'react-icons/io';import{AiOutlineCloseCircle}from'react-icons/ai';import{BsLink45Deg}from'react-icons/bs';// Icons:\nvar BALISE_ICON=require('../../../assets/images/home/balise.png');var BALISE_ICON_ACTIVE=require('../../../assets/images/home/balise_active.png');var EMO_ICON=require('../../../assets/images/home/emo.png');var EMO_ICON_ACTIVE=require('../../../assets/images/home/emo_active.png');var LETTER_ICON=require('../../../assets/images/home/3a.png');var LETTER_ICON_ACTIVE=require('../../../assets/images/home/3a_active.png');export default function WizardMiracleInput(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),BtnPop=_useState2[0],setBtnPop=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),BtnUpdatePop=_useState4[0],setBtnUpdatePop=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),BtnUpdatePopTarget=_useState6[0],setBtnUpdatePopTarget=_useState6[1];var BtnUpdateRef=useRef(null);var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),BtnUpdateIndex=_useState8[0],setBtnUpdateIndex=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),BtnUpdateType=_useState10[0],setBtnUpdateType=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),BtnUpdateTitle=_useState12[0],setBtnUpdateTitle=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),BtnUpdateValue=_useState14[0],setBtnUpdateValue=_useState14[1];var label=props.label,response=props.response,handleResponse=props.handleResponse,showTags=props.showTags,handleTags=props.handleTags,showEmojis=props.showEmojis,handleEmojis=props.handleEmojis,showKeyboard=props.showKeyboard,handleKeyboard=props.handleKeyboard,BtnType=props.BtnType,handleBtnType=props.handleBtnType,BtnTitle=props.BtnTitle,handleBtnTitle=props.handleBtnTitle,BtnValue=props.BtnValue,handleBtnValue=props.handleBtnValue,Btns=props.Btns,handleBtns=props.handleBtns,platform=props.platform;// Popup Config :\nvar swalWithBootstrapButtons=Swal.mixin({customClass:{confirmButton:'wizard-pages-active-btn py-3 px-3'},buttonsStyling:false});// render Functions :\nvar Tags=/*#__PURE__*/React.createElement(Popover,{id:\"popover-tags\"},/*#__PURE__*/React.createElement(Popover.Content,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:12},/*#__PURE__*/React.createElement(Row,{className:\"pl-1 my-2\"},/*#__PURE__*/React.createElement(Col,{xs:12,className:\"d-flex mb-1 mt-2\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto mr-auto wizard-config-tag\",onClick:function onClick(){handleResponse(function(prevResponse){return prevResponse+'##FIRST_NAME##';});}},\"First Name\")),/*#__PURE__*/React.createElement(Col,{xs:12,className:\"d-flex mb-1\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto mr-auto wizard-config-tag\",onClick:function onClick(){handleResponse(function(prevResponse){return prevResponse+'##LAST_NAME##';});}},\"Last Name\")),/*#__PURE__*/React.createElement(Col,{xs:12,className:\"d-flex mb-1\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto mr-auto wizard-config-tag\",onClick:function onClick(){handleResponse(function(prevResponse){return prevResponse+'##FULL_NAME##';});}},\"Full Name\")),/*#__PURE__*/React.createElement(Col,{xs:12,className:\"m-auto d-flex mb-2\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto mr-auto wizard-config-tag\",onClick:function onClick(){handleResponse(function(prevResponse){return prevResponse+'##PAGE_NAME##';});}},\"Page Name\")))))));var BtnsPopover=/*#__PURE__*/React.createElement(Popover,{id:\"popover-quick-replies\"},/*#__PURE__*/React.createElement(Popover.Content,null,/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12,className:\"mt-2 mb-3\"},/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",onChange:function onChange(e){return handleBtnType(e.target.value);},defaultValue:BtnType},/*#__PURE__*/React.createElement(\"option\",{value:\"web_url\"},\"URL\"),/*#__PURE__*/React.createElement(\"option\",{value:\"phone_number\"},\"CALL\"))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mt-2\"},/*#__PURE__*/React.createElement(Row,{className:\"d-flex\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",onChange:function onChange(e){return handleBtnTitle(e.target.value);},value:BtnTitle,placeholder:\"Title\"})),/*#__PURE__*/React.createElement(Col,{md:12,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"ml-auto wizard-config-input-feedback\"},\"Remaining characters: 20\")))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mb-2\"},/*#__PURE__*/React.createElement(Form.Control,{type:BtnType===\"web_url\"?\"text\":\"number\",onChange:function onChange(e){return handleBtnValue(e.target.value);},value:BtnValue,placeholder:BtnType===\"web_url\"?\"www.example.com\":\"(+216) 99 999 999\"})))),/*#__PURE__*/React.createElement(Col,{md:11,className:\"d-flex pl-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-pages-active-btn py-2 px-4\",onClick:function onClick(){return addNewBtn();}},\"OK\")))));var BtnsUpdatePopover=function BtnsUpdatePopover(){return/*#__PURE__*/React.createElement(Popover,{id:\"popover-quick-replies\"},/*#__PURE__*/React.createElement(Popover.Content,null,/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12,className:\"mt-2 mb-3\"},/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",onChange:function onChange(e){return setBtnUpdateType(e.target.value);},defaultValue:BtnUpdateType},/*#__PURE__*/React.createElement(\"option\",{value:\"web_url\"},\"URL\"),/*#__PURE__*/React.createElement(\"option\",{value:\"phone_number\"},\"CALL\"))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mt-2\"},/*#__PURE__*/React.createElement(Row,{className:\"d-flex\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",onChange:function onChange(e){return setBtnUpdateTitle(e.target.value);},value:BtnUpdateTitle,placeholder:\"Title\"})),/*#__PURE__*/React.createElement(Col,{md:12,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"ml-auto wizard-config-input-feedback\"},\"Remaining characters: 20\")))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mb-2\"},/*#__PURE__*/React.createElement(Form.Control,{type:BtnType===\"web_url\"?\"text\":\"number\",onChange:function onChange(e){return setBtnUpdateValue(e.target.value);},value:BtnUpdateValue,placeholder:BtnUpdateType===\"web_url\"?\"www.example.com\":\"(+216) 99 999 999\"})))),/*#__PURE__*/React.createElement(Col,{md:11,className:\"d-flex pl-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-pages-active-btn py-2 px-4\",onClick:function onClick(){return updateBtn();}},\"OK\")))));};var popup=function popup(message){return swalWithBootstrapButtons.fire({title:\"\".concat(message),confirmButtonText:'Okay'});};// Functions :\nvar addNewBtn=function addNewBtn(){var newBtns=_toConsumableArray(Btns);if(BtnType===\"web_url\"){var objectFb={type:\"web_url\",url:BtnValue,title:BtnTitle,webview_height_ratio:\"full\"};if(BtnTitle===\"\"){popup(\"Button title is empty !\");}else if(BtnValue===\"\"){popup(\"Button url is empty!\");}else{newBtns.push(objectFb);// update new Btns :\nhandleBtns(newBtns);// reset\nresetBtns();}}else{var _objectFb={type:\"phone_number\",title:BtnTitle,payload:BtnValue};if(BtnTitle===\"\"){popup(\"Button title is empty !\");}else if(BtnValue===\"\"){popup(\"Button phone number is empty!\");}else{newBtns.push(_objectFb);// update new Btns :\nhandleBtns(newBtns);// reset\nresetBtns();}}};var updateBtn=function updateBtn(){var newBtns=_toConsumableArray(Btns);var newType=_toConsumableArray(BtnUpdateType).join('');var newTitle=_toConsumableArray(BtnUpdateTitle).join('');var newValue=_toConsumableArray(BtnUpdateValue).join('');if(newType===\"web_url\"){newBtns[BtnUpdateIndex].type=BtnUpdateType;newBtns[BtnUpdateIndex].title=newTitle;newBtns[BtnUpdateIndex].url=newValue;handleBtns(newBtns);setBtnUpdatePop(false);}else{newBtns[BtnUpdateIndex].type=BtnUpdateType;newBtns[BtnUpdateIndex].title=newTitle;newBtns[BtnUpdateIndex].payload=newValue;handleBtns(newBtns);setBtnUpdatePop(false);};};var deleteBtn=function deleteBtn(index){var newBtns=_toConsumableArray(Btns);newBtns.splice(index,1);handleBtns(newBtns);};var resetBtns=function resetBtns(){handleBtnType('web_url');handleBtnTitle('');handleBtnValue('');setBtnPop(false);// setBtnUpdatePop(false);\n};var handleUpdatePopover=function handleUpdatePopover(e,btn,indexBtn){setBtnUpdatePopTarget(e.target);setBtnPop(false);setBtnUpdatePop(false);if(btn.type===\"web_url\"){setBtnUpdateType(\"web_url\");setBtnUpdateIndex(indexBtn);setBtnUpdateTitle(btn.title);setBtnUpdateValue(btn.url);setBtnUpdatePop(true);}else{setBtnUpdateType(\"phone_number\");setBtnUpdateIndex(indexBtn);setBtnUpdateTitle(btn.title);setBtnUpdateValue(btn.payload);setBtnUpdatePop(true);}};return/*#__PURE__*/React.createElement(Row,{className:\"mx-0 px-2\"},/*#__PURE__*/React.createElement(Col,{lg:12,className:\"mx-0 px-0\"},/*#__PURE__*/React.createElement(\"label\",{className:\"wizard-config-textarea-label\"},label)),/*#__PURE__*/React.createElement(Col,{lg:12,className:\"wizard-intent-miracle-box px-1\"},/*#__PURE__*/React.createElement(Row,{className:\"mb-1 mx-0 pt-1 px-2\"},/*#__PURE__*/React.createElement(Col,{lg:1,className:\"d-flex p-0\"},/*#__PURE__*/React.createElement(OverlayTrigger,{trigger:\"click\",placement:\"top\",overlay:Tags},/*#__PURE__*/React.createElement(Image,{src:showTags?BALISE_ICON_ACTIVE:BALISE_ICON,onClick:function onClick(){return handleTags(!showTags);},className:\"my-auto mr-auto my-agents-msgs-tiny-icon\",style:{width:'19px',cursor:'pointer'}}))),/*#__PURE__*/React.createElement(Col,{lg:1,className:\"d-flex p-0\"},/*#__PURE__*/React.createElement(Image,{src:showEmojis?EMO_ICON_ACTIVE:EMO_ICON,onClick:function onClick(){return handleEmojis(!showEmojis);},className:\"my-auto mr-auto my-agents-msgs-tiny-icon\",style:{width:'18px',cursor:'pointer'}})),/*#__PURE__*/React.createElement(Col,{lg:1,className:\"d-flex p-0\"},/*#__PURE__*/React.createElement(Image,{src:showKeyboard?LETTER_ICON_ACTIVE:LETTER_ICON,onClick:function onClick(){return handleKeyboard(!showKeyboard);},className:\"my-auto mr-auto my-agents-msgs-tiny-icon\",style:{width:'21px',cursor:'pointer'}})),/*#__PURE__*/React.createElement(Col,{lg:8},showKeyboard&&/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-config-keyboard-container\"},/*#__PURE__*/React.createElement(Keyboard,{onChange:function onChange(input){return handleResponse(function(prevResponse){return prevResponse+input.charAt(input.length-1);});}// onKeyPress={(button) => onKeyPress(button,\"generic\")} \n,layout:layout})),showEmojis&&/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-config-emoji-container\"},/*#__PURE__*/React.createElement(Picker,{onEmojiClick:function onEmojiClick(e,obj){return handleResponse(function(prevResponse){return prevResponse+obj.emoji;});}})))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:12,className:\"mx-0\"},/*#__PURE__*/React.createElement(\"textarea\",{onChange:function onChange(e){return handleResponse(e.target.value);},placeholder:\"Your Message...\"// onFocus={() => console.log(\"Hey I'm Focused\")} \n,value:response,className:\"wizard-config-textarea w-100 py-0\",rows:\"5\"}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:12,className:\"my-0 py-0\"},/*#__PURE__*/React.createElement(\"hr\",{style:{height:'2px',borderColor:'#B4B4B4',margin:'1px'}}))),platform===\"facebook\"&&/*#__PURE__*/React.createElement(Row,{className:\"mx-0\"},/*#__PURE__*/React.createElement(Col,{lg:12},/*#__PURE__*/React.createElement(Row,null,Btns.map(function(btn,indexBtn){return/*#__PURE__*/React.createElement(Col,{key:indexBtn,lg:3,className:\"mr-2\"},/*#__PURE__*/React.createElement(Row,{className:\"wizard-config-quick-replies-btn my-1 py-1 d-flex\"},btn.type===\"web_url\"?/*#__PURE__*/React.createElement(BsLink45Deg,{color:'#fff',size:15,className:\"ml-1 mr-auto my-auto\",onClick:function onClick(e){return handleUpdatePopover(e,btn,indexBtn);}}):/*#__PURE__*/React.createElement(IoIosCall,{color:'#fff',size:15,className:\"ml-1 mr-auto my-auto\",onClick:function onClick(e){return handleUpdatePopover(e,btn,indexBtn);}}),/*#__PURE__*/React.createElement(\"p\",{className:btn.type===\"web_url\"?\"mr-auto my-auto\":\"ml-1 mr-auto my-auto\",\"data-for\":\"quickReplyTip\",\"data-tip\":btn.title,onClick:function onClick(e){handleUpdatePopover(e,btn,indexBtn);}},btn.type===\"web_url\"?\"url\":\"call\"),/*#__PURE__*/React.createElement(AiOutlineCloseCircle,{className:\"ml-auto my-auto mr-1\",color:\"white\",size:\"15\",style:{cursor:'pointer'},onClick:function onClick(){return deleteBtn(indexBtn);}})),/*#__PURE__*/React.createElement(ReactTooltip,{id:\"quickReplyTip\",textColor:\"#fff\",backgroundColor:\"#009EE3\"}));}),Btns.length<3&&/*#__PURE__*/React.createElement(OverlayTrigger,{trigger:\"click\",placement:\"top\",show:BtnPop,overlay:BtnsPopover},/*#__PURE__*/React.createElement(Col,{lg:3,className:\"wizard-config-quick-replies-btn my-1 py-1 d-flex\",onClick:function onClick(){setBtnUpdatePop(false);setBtnPop(function(prevState){return prevState?false:true;});}},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto\"},\"Add button\"))),/*#__PURE__*/React.createElement(\"div\",{ref:BtnUpdateRef},/*#__PURE__*/React.createElement(Overlay,{show:BtnUpdatePop,target:BtnUpdatePopTarget,placement:\"top\",container:BtnUpdateRef.current},BtnsUpdatePopover())))))));}","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/app/Home/AutoWizard/WizardMiracleInput.js"],"names":["React","useState","useRef","Row","Col","Image","OverlayTrigger","Overlay","Popover","Form","Picker","Keyboard","layout","ReactTooltip","Swal","IoIosCall","AiOutlineCloseCircle","BsLink45Deg","BALISE_ICON","require","BALISE_ICON_ACTIVE","EMO_ICON","EMO_ICON_ACTIVE","LETTER_ICON","LETTER_ICON_ACTIVE","WizardMiracleInput","props","BtnPop","setBtnPop","BtnUpdatePop","setBtnUpdatePop","BtnUpdatePopTarget","setBtnUpdatePopTarget","BtnUpdateRef","BtnUpdateIndex","setBtnUpdateIndex","BtnUpdateType","setBtnUpdateType","BtnUpdateTitle","setBtnUpdateTitle","BtnUpdateValue","setBtnUpdateValue","label","response","handleResponse","showTags","handleTags","showEmojis","handleEmojis","showKeyboard","handleKeyboard","BtnType","handleBtnType","BtnTitle","handleBtnTitle","BtnValue","handleBtnValue","Btns","handleBtns","platform","swalWithBootstrapButtons","mixin","customClass","confirmButton","buttonsStyling","Tags","prevResponse","BtnsPopover","e","target","value","addNewBtn","BtnsUpdatePopover","updateBtn","popup","message","fire","title","confirmButtonText","newBtns","objectFb","type","url","webview_height_ratio","push","resetBtns","payload","newType","join","newTitle","newValue","deleteBtn","index","splice","handleUpdatePopover","btn","indexBtn","width","cursor","input","charAt","length","obj","emoji","height","borderColor","margin","map","prevState","current"],"mappings":"gTAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,MAAzB,KAAsC,OAAtC,CAGA,OACIC,GADJ,CAEIC,GAFJ,CAGIC,KAHJ,CAIIC,cAJJ,CAKIC,OALJ,CAMIC,OANJ,CAOIC,IAPJ,KAQO,iBARP,CASA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,8CAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,eAAzB,CACA,MAAOC,CAAAA,IAAP,KAAiB,iCAAjB,CAGA,OAASC,SAAT,KAA0B,gBAA1B,CACA,OAASC,oBAAT,KAAqC,gBAArC,CACA,OAASC,WAAT,KAA4B,gBAA5B,CAGA;AACA,GAAMC,CAAAA,WAAW,CAAGC,OAAO,CAAC,wCAAD,CAA3B,CACA,GAAMC,CAAAA,kBAAkB,CAAGD,OAAO,CAAC,+CAAD,CAAlC,CACA,GAAME,CAAAA,QAAQ,CAAGF,OAAO,CAAC,qCAAD,CAAxB,CACA,GAAMG,CAAAA,eAAe,CAAGH,OAAO,CAAC,4CAAD,CAA/B,CACA,GAAMI,CAAAA,WAAW,CAAGJ,OAAO,CAAC,oCAAD,CAA3B,CACA,GAAMK,CAAAA,kBAAkB,CAAGL,OAAO,CAAC,2CAAD,CAAlC,CAGA,cAAe,SAASM,CAAAA,kBAAT,CAA4BC,KAA5B,CAAmC,eAElBzB,QAAQ,CAAC,KAAD,CAFU,wCAEvC0B,MAFuC,eAE/BC,SAF+B,8BAIN3B,QAAQ,CAAC,KAAD,CAJF,yCAIvC4B,YAJuC,eAIzBC,eAJyB,8BAKM7B,QAAQ,CAAC,IAAD,CALd,yCAKvC8B,kBALuC,eAKnBC,qBALmB,eAM9C,GAAMC,CAAAA,YAAY,CAAG/B,MAAM,CAAC,IAAD,CAA3B,CAN8C,eAOFD,QAAQ,CAAC,IAAD,CAPN,yCAOvCiC,cAPuC,eAOvBC,iBAPuB,8BAQJlC,QAAQ,CAAC,EAAD,CARJ,0CAQvCmC,aARuC,gBAQxBC,gBARwB,gCASFpC,QAAQ,CAAC,EAAD,CATN,2CASvCqC,cATuC,gBASvBC,iBATuB,gCAUFtC,QAAQ,CAAC,EAAD,CAVN,2CAUvCuC,cAVuC,gBAUvBC,iBAVuB,mBAa1CC,CAAAA,KAb0C,CA+B1ChB,KA/B0C,CAa1CgB,KAb0C,CAc1CC,QAd0C,CA+B1CjB,KA/B0C,CAc1CiB,QAd0C,CAe1CC,cAf0C,CA+B1ClB,KA/B0C,CAe1CkB,cAf0C,CAgB1CC,QAhB0C,CA+B1CnB,KA/B0C,CAgB1CmB,QAhB0C,CAiB1CC,UAjB0C,CA+B1CpB,KA/B0C,CAiB1CoB,UAjB0C,CAkB1CC,UAlB0C,CA+B1CrB,KA/B0C,CAkB1CqB,UAlB0C,CAmB1CC,YAnB0C,CA+B1CtB,KA/B0C,CAmB1CsB,YAnB0C,CAoB1CC,YApB0C,CA+B1CvB,KA/B0C,CAoB1CuB,YApB0C,CAqB1CC,cArB0C,CA+B1CxB,KA/B0C,CAqB1CwB,cArB0C,CAsB1CC,OAtB0C,CA+B1CzB,KA/B0C,CAsB1CyB,OAtB0C,CAuB1CC,aAvB0C,CA+B1C1B,KA/B0C,CAuB1C0B,aAvB0C,CAwB1CC,QAxB0C,CA+B1C3B,KA/B0C,CAwB1C2B,QAxB0C,CAyB1CC,cAzB0C,CA+B1C5B,KA/B0C,CAyB1C4B,cAzB0C,CA0B1CC,QA1B0C,CA+B1C7B,KA/B0C,CA0B1C6B,QA1B0C,CA2B1CC,cA3B0C,CA+B1C9B,KA/B0C,CA2B1C8B,cA3B0C,CA4B1CC,IA5B0C,CA+B1C/B,KA/B0C,CA4B1C+B,IA5B0C,CA6B1CC,UA7B0C,CA+B1ChC,KA/B0C,CA6B1CgC,UA7B0C,CA8B1CC,QA9B0C,CA+B1CjC,KA/B0C,CA8B1CiC,QA9B0C,CAiC9C;AACA,GAAMC,CAAAA,wBAAwB,CAAG9C,IAAI,CAAC+C,KAAL,CAAW,CACxCC,WAAW,CAAE,CACXC,aAAa,CAAE,mCADJ,CAD2B,CAIxCC,cAAc,CAAE,KAJwB,CAAX,CAAjC,CAOA;AACA,GAAMC,CAAAA,IAAI,cACN,oBAAC,OAAD,EAAS,EAAE,CAAC,cAAZ,eACE,oBAAC,OAAD,CAAS,OAAT,mBACE,oBAAC,GAAD,mBACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eAKI,oBAAC,GAAD,EAAK,SAAS,CAAC,WAAf,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,kBAAvB,eACI,yBAAG,SAAS,CAAC,mCAAb,CAAiD,OAAO,CAAE,kBAAM,CAAErB,cAAc,CAAC,SAAAsB,YAAY,QAAIA,CAAAA,YAAY,CAAG,gBAAnB,EAAb,CAAd,CAAkE,CAApI,eADJ,CADJ,cAKI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,aAAvB,eACI,yBAAG,SAAS,CAAC,mCAAb,CAAiD,OAAO,CAAE,kBAAM,CAAEtB,cAAc,CAAC,SAAAsB,YAAY,QAAIA,CAAAA,YAAY,CAAG,eAAnB,EAAb,CAAd,CAAiE,CAAnI,cADJ,CALJ,cASI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,aAAvB,eACI,yBAAG,SAAS,CAAC,mCAAb,CAAiD,OAAO,CAAE,kBAAM,CAAEtB,cAAc,CAAC,SAAAsB,YAAY,QAAIA,CAAAA,YAAY,CAAG,eAAnB,EAAb,CAAd,CAAiE,CAAnI,cADJ,CATJ,cAaI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,oBAAvB,eACI,yBAAG,SAAS,CAAC,mCAAb,CAAiD,OAAO,CAAE,kBAAM,CAAEtB,cAAc,CAAC,SAAAsB,YAAY,QAAIA,CAAAA,YAAY,CAAG,eAAnB,EAAb,CAAd,CAAiE,CAAnI,cADJ,CAbJ,CALJ,CADJ,CADF,CADF,CADJ,CAgCA,GAAMC,CAAAA,WAAW,cACb,oBAAC,OAAD,EAAS,EAAE,CAAC,uBAAZ,eACE,oBAAC,OAAD,CAAS,OAAT,mBACE,oBAAC,GAAD,EAAK,SAAS,CAAC,wBAAf,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eACI,oBAAC,GAAD,mBACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,WAAvB,eACI,oBAAC,IAAD,CAAM,OAAN,EAAc,EAAE,CAAC,QAAjB,CAA0B,QAAQ,CAAE,kBAACC,CAAD,QAAOhB,CAAAA,aAAa,CAACgB,CAAC,CAACC,MAAF,CAASC,KAAV,CAApB,EAApC,CAA0E,YAAY,CAAEnB,OAAxF,eACI,8BAAQ,KAAK,CAAC,SAAd,QADJ,cAEI,8BAAQ,KAAK,CAAC,cAAd,SAFJ,CADJ,CADJ,cAQI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,MAAvB,eACI,oBAAC,GAAD,EAAK,SAAS,CAAC,QAAf,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eACI,oBAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAE,MADV,CAEI,QAAQ,CAAE,kBAACiB,CAAD,QAAOd,CAAAA,cAAc,CAACc,CAAC,CAACC,MAAF,CAASC,KAAV,CAArB,EAFd,CAGI,KAAK,CAAEjB,QAHX,CAII,WAAW,CAAC,OAJhB,EADJ,CADJ,cAUI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,QAAvB,eACI,yBAAG,SAAS,CAAC,sCAAb,6BADJ,CAVJ,CADJ,CARJ,cAyBI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,MAAvB,eACI,oBAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAEF,OAAO,GAAK,SAAZ,CAAwB,MAAxB,CAAiC,QAD3C,CAEI,QAAQ,CAAE,kBAACiB,CAAD,QAAOZ,CAAAA,cAAc,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAArB,EAFd,CAGI,KAAK,CAAEf,QAHX,CAII,WAAW,CAAEJ,OAAO,GAAK,SAAZ,CAAwB,iBAAxB,CAA4C,mBAJ7D,EADJ,CAzBJ,CADJ,CADJ,cAsCI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,aAAvB,eACI,2BAAK,SAAS,CAAC,mCAAf,CAAmD,OAAO,CAAE,yBAAMoB,CAAAA,SAAS,EAAf,EAA5D,OADJ,CAtCJ,CADF,CADF,CADJ,CAoDA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,sBACtB,oBAAC,OAAD,EAAS,EAAE,CAAC,uBAAZ,eACE,oBAAC,OAAD,CAAS,OAAT,mBACE,oBAAC,GAAD,EAAK,SAAS,CAAC,wBAAf,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eACI,oBAAC,GAAD,mBACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,WAAvB,eACI,oBAAC,IAAD,CAAM,OAAN,EAAc,EAAE,CAAC,QAAjB,CAA0B,QAAQ,CAAE,kBAACJ,CAAD,QAAO/B,CAAAA,gBAAgB,CAAC+B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAvB,EAApC,CAA6E,YAAY,CAAElC,aAA3F,eACI,8BAAQ,KAAK,CAAC,SAAd,QADJ,cAEI,8BAAQ,KAAK,CAAC,cAAd,SAFJ,CADJ,CADJ,cAQI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,MAAvB,eACI,oBAAC,GAAD,EAAK,SAAS,CAAC,QAAf,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eACI,oBAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAE,MADV,CAEI,QAAQ,CAAE,kBAACgC,CAAD,QAAO7B,CAAAA,iBAAiB,CAAC6B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAxB,EAFd,CAGI,KAAK,CAAEhC,cAHX,CAII,WAAW,CAAC,OAJhB,EADJ,CADJ,cAUI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,QAAvB,eACI,yBAAG,SAAS,CAAC,sCAAb,6BADJ,CAVJ,CADJ,CARJ,cAyBI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,MAAvB,eACI,oBAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAEa,OAAO,GAAK,SAAZ,CAAwB,MAAxB,CAAiC,QAD3C,CAEI,QAAQ,CAAE,kBAACiB,CAAD,QAAO3B,CAAAA,iBAAiB,CAAC2B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAxB,EAFd,CAGI,KAAK,CAAE9B,cAHX,CAII,WAAW,CAAEJ,aAAa,GAAK,SAAlB,CAA8B,iBAA9B,CAAkD,mBAJnE,EADJ,CAzBJ,CADJ,CADJ,cAsCI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,aAAvB,eACI,2BAAK,SAAS,CAAC,mCAAf,CAAmD,OAAO,CAAE,yBAAMqC,CAAAA,SAAS,EAAf,EAA5D,OADJ,CAtCJ,CADF,CADF,CADsB,EAA1B,CAoDA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,OAAD,QAAef,CAAAA,wBAAwB,CAACgB,IAAzB,CAA8B,CAAEC,KAAK,WAAKF,OAAL,CAAP,CAAsBG,iBAAiB,CAAE,MAAzC,CAA9B,CAAf,EAAd,CAEA;AACA,GAAMP,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpB,GAAIQ,CAAAA,OAAO,oBAAOtB,IAAP,CAAX,CAEA,GAAGN,OAAO,GAAK,SAAf,CAA0B,CACtB,GAAI6B,CAAAA,QAAQ,CAAG,CACXC,IAAI,CAAE,SADK,CAEXC,GAAG,CAAE3B,QAFM,CAGXsB,KAAK,CAAExB,QAHI,CAIX8B,oBAAoB,CAAE,MAJX,CAAf,CAOA,GAAG9B,QAAQ,GAAK,EAAhB,CAAoB,CAChBqB,KAAK,CAAC,yBAAD,CAAL,CACH,CAFD,IAEO,IAAInB,QAAQ,GAAK,EAAjB,CAAqB,CACxBmB,KAAK,CAAC,sBAAD,CAAL,CACH,CAFM,IAEA,CACHK,OAAO,CAACK,IAAR,CAAaJ,QAAb,EACA;AACAtB,UAAU,CAACqB,OAAD,CAAV,CACA;AACAM,SAAS,GACZ,CACJ,CAnBD,IAmBO,CACH,GAAIL,CAAAA,SAAQ,CAAG,CACXC,IAAI,CAAE,cADK,CAEXJ,KAAK,CAAExB,QAFI,CAGXiC,OAAO,CAAE/B,QAHE,CAAf,CAMA,GAAGF,QAAQ,GAAK,EAAhB,CAAoB,CAChBqB,KAAK,CAAC,yBAAD,CAAL,CACH,CAFD,IAEO,IAAInB,QAAQ,GAAK,EAAjB,CAAqB,CACxBmB,KAAK,CAAC,+BAAD,CAAL,CACH,CAFM,IAEA,CACHK,OAAO,CAACK,IAAR,CAAaJ,SAAb,EACA;AACAtB,UAAU,CAACqB,OAAD,CAAV,CACA;AACAM,SAAS,GACZ,CACJ,CAEJ,CA1CD,CA4CA,GAAMZ,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpB,GAAIM,CAAAA,OAAO,oBAAOtB,IAAP,CAAX,CACA,GAAI8B,CAAAA,OAAO,CAAG,mBAAInD,aAAJ,EAAmBoD,IAAnB,CAAwB,EAAxB,CAAd,CACA,GAAIC,CAAAA,QAAQ,CAAG,mBAAInD,cAAJ,EAAoBkD,IAApB,CAAyB,EAAzB,CAAf,CACA,GAAIE,CAAAA,QAAQ,CAAG,mBAAIlD,cAAJ,EAAoBgD,IAApB,CAAyB,EAAzB,CAAf,CAEA,GAAGD,OAAO,GAAK,SAAf,CAA0B,CACtBR,OAAO,CAAC7C,cAAD,CAAP,CAAwB+C,IAAxB,CAA+B7C,aAA/B,CACA2C,OAAO,CAAC7C,cAAD,CAAP,CAAwB2C,KAAxB,CAAgCY,QAAhC,CACAV,OAAO,CAAC7C,cAAD,CAAP,CAAwBgD,GAAxB,CAA8BQ,QAA9B,CACAhC,UAAU,CAACqB,OAAD,CAAV,CACAjD,eAAe,CAAC,KAAD,CAAf,CACH,CAND,IAMO,CACHiD,OAAO,CAAC7C,cAAD,CAAP,CAAwB+C,IAAxB,CAA+B7C,aAA/B,CACA2C,OAAO,CAAC7C,cAAD,CAAP,CAAwB2C,KAAxB,CAAgCY,QAAhC,CACAV,OAAO,CAAC7C,cAAD,CAAP,CAAwBoD,OAAxB,CAAkCI,QAAlC,CACAhC,UAAU,CAACqB,OAAD,CAAV,CACAjD,eAAe,CAAC,KAAD,CAAf,CACH,EACJ,CAnBD,CAqBA,GAAM6D,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,CACzB,GAAIb,CAAAA,OAAO,oBAAOtB,IAAP,CAAX,CACAsB,OAAO,CAACc,MAAR,CAAeD,KAAf,CAAqB,CAArB,EACAlC,UAAU,CAACqB,OAAD,CAAV,CACH,CAJD,CAMA,GAAMM,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpBjC,aAAa,CAAC,SAAD,CAAb,CACAE,cAAc,CAAC,EAAD,CAAd,CACAE,cAAc,CAAC,EAAD,CAAd,CACA5B,SAAS,CAAC,KAAD,CAAT,CACA;AACH,CAND,CAQA,GAAMkE,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAAC1B,CAAD,CAAG2B,GAAH,CAAOC,QAAP,CAAoB,CAC5ChE,qBAAqB,CAACoC,CAAC,CAACC,MAAH,CAArB,CACAzC,SAAS,CAAC,KAAD,CAAT,CACAE,eAAe,CAAC,KAAD,CAAf,CAEA,GAAGiE,GAAG,CAACd,IAAJ,GAAa,SAAhB,CAA2B,CACvB5C,gBAAgB,CAAC,SAAD,CAAhB,CACAF,iBAAiB,CAAC6D,QAAD,CAAjB,CACAzD,iBAAiB,CAACwD,GAAG,CAAClB,KAAL,CAAjB,CACApC,iBAAiB,CAACsD,GAAG,CAACb,GAAL,CAAjB,CACApD,eAAe,CAAC,IAAD,CAAf,CACH,CAND,IAMO,CACHO,gBAAgB,CAAC,cAAD,CAAhB,CACAF,iBAAiB,CAAC6D,QAAD,CAAjB,CACAzD,iBAAiB,CAACwD,GAAG,CAAClB,KAAL,CAAjB,CACApC,iBAAiB,CAACsD,GAAG,CAACT,OAAL,CAAjB,CACAxD,eAAe,CAAC,IAAD,CAAf,CACH,CACJ,CAlBD,CAoBA,mBACI,oBAAC,GAAD,EAAK,SAAS,CAAC,WAAf,eAEI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,WAAvB,eACI,6BAAO,SAAS,CAAC,8BAAjB,EAAiDY,KAAjD,CADJ,CAFJ,cAMI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,gCAAvB,eACI,oBAAC,GAAD,EAAK,SAAS,CAAC,qBAAf,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,CAAY,SAAS,CAAC,YAAtB,eACI,oBAAC,cAAD,EAAgB,OAAO,CAAC,OAAxB,CAAgC,SAAS,CAAC,KAA1C,CAAgD,OAAO,CAAEuB,IAAzD,eACI,oBAAC,KAAD,EACI,GAAG,CAAEpB,QAAQ,CAAGzB,kBAAH,CAAwBF,WADzC,CAEI,OAAO,CAAE,yBAAM4B,CAAAA,UAAU,CAAC,CAACD,QAAF,CAAhB,EAFb,CAGI,SAAS,CAAC,0CAHd,CAII,KAAK,CAAE,CAAEoD,KAAK,CAAE,MAAT,CAAiBC,MAAM,CAAE,SAAzB,CAJX,EADJ,CADJ,CADJ,cAYI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,CAAY,SAAS,CAAC,YAAtB,eACI,oBAAC,KAAD,EACI,GAAG,CAAEnD,UAAU,CAAGzB,eAAH,CAAqBD,QADxC,CAEI,OAAO,CAAE,yBAAM2B,CAAAA,YAAY,CAAC,CAACD,UAAF,CAAlB,EAFb,CAGI,SAAS,CAAC,0CAHd,CAII,KAAK,CAAE,CAAEkD,KAAK,CAAE,MAAT,CAAiBC,MAAM,CAAE,SAAzB,CAJX,EADJ,CAZJ,cAqBI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,CAAY,SAAS,CAAC,YAAtB,eACI,oBAAC,KAAD,EACI,GAAG,CAAEjD,YAAY,CAAGzB,kBAAH,CAAwBD,WAD7C,CAEI,OAAO,CAAE,yBAAM2B,CAAAA,cAAc,CAAC,CAACD,YAAF,CAApB,EAFb,CAGI,SAAS,CAAC,0CAHd,CAII,KAAK,CAAE,CAAEgD,KAAK,CAAE,MAAT,CAAiBC,MAAM,CAAE,SAAzB,CAJX,EADJ,CArBJ,cA8BI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,EACKjD,YAAY,eACT,2BAAK,SAAS,CAAC,kCAAf,eACI,oBAAC,QAAD,EACI,QAAQ,CAAE,kBAACkD,KAAD,QAAWvD,CAAAA,cAAc,CAAC,SAAAsB,YAAY,QAAIA,CAAAA,YAAY,CAAGiC,KAAK,CAACC,MAAN,CAAaD,KAAK,CAACE,MAAN,CAAe,CAA5B,CAAnB,EAAb,CAAzB,EACV;AAFJ,CAGI,MAAM,CAAEzF,MAHZ,EADJ,CAFR,CAWKmC,UAAU,eACP,2BAAK,SAAS,CAAC,+BAAf,eACI,oBAAC,MAAD,EAAQ,YAAY,CAAE,sBAACqB,CAAD,CAAGkC,GAAH,QAAW1D,CAAAA,cAAc,CAAC,SAAAsB,YAAY,QAAGA,CAAAA,YAAY,CAAGoC,GAAG,CAACC,KAAtB,EAAb,CAAzB,EAAtB,EADJ,CAZR,CA9BJ,CADJ,cAkDI,oBAAC,GAAD,mBACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,MAAvB,eACI,gCACI,QAAQ,CAAE,kBAACnC,CAAD,QAAOxB,CAAAA,cAAc,CAACwB,CAAC,CAACC,MAAF,CAASC,KAAV,CAArB,EADd,CAEI,WAAW,CAAE,iBACb;AAHJ,CAII,KAAK,CAAE3B,QAJX,CAKI,SAAS,CAAC,mCALd,CAMI,IAAI,CAAC,GANT,EADJ,CADJ,CAlDJ,cA+DI,oBAAC,GAAD,mBACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,WAAvB,eACI,0BAAI,KAAK,CAAE,CAAC6D,MAAM,CAAE,KAAT,CAAgBC,WAAW,CAAE,SAA7B,CAAwCC,MAAM,CAAE,KAAhD,CAAX,EADJ,CADJ,CA/DJ,CAqEK/C,QAAQ,GAAK,UAAb,eAED,oBAAC,GAAD,EAAK,SAAS,CAAC,MAAf,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eACI,oBAAC,GAAD,MACKF,IAAI,CAACkD,GAAL,CAAS,SAACZ,GAAD,CAAKC,QAAL,qBACN,oBAAC,GAAD,EAAK,GAAG,CAAEA,QAAV,CAAoB,EAAE,CAAE,CAAxB,CAA2B,SAAS,CAAC,MAArC,eACI,oBAAC,GAAD,EAAK,SAAS,CAAC,kDAAf,EACKD,GAAG,CAACd,IAAJ,GAAa,SAAb,cAED,oBAAC,WAAD,EAAa,KAAK,CAAE,MAApB,CAA4B,IAAI,CAAE,EAAlC,CAAsC,SAAS,CAAC,sBAAhD,CAAuE,OAAO,CAAE,iBAACb,CAAD,QAAO0B,CAAAA,mBAAmB,CAAC1B,CAAD,CAAG2B,GAAH,CAAOC,QAAP,CAA1B,EAAhF,EAFC,cAID,oBAAC,SAAD,EAAW,KAAK,CAAE,MAAlB,CAA0B,IAAI,CAAE,EAAhC,CAAoC,SAAS,CAAC,sBAA9C,CAAqE,OAAO,CAAE,iBAAC5B,CAAD,QAAO0B,CAAAA,mBAAmB,CAAC1B,CAAD,CAAG2B,GAAH,CAAOC,QAAP,CAA1B,EAA9E,EALJ,cAOI,yBAAG,SAAS,CAAED,GAAG,CAACd,IAAJ,GAAa,SAAb,CAAyB,iBAAzB,CAA6C,sBAA3D,CAAoF,WAAS,eAA7F,CAA6G,WAAUc,GAAG,CAAClB,KAA3H,CAAkI,OAAO,CAAE,iBAACT,CAAD,CAAO,CAAC0B,mBAAmB,CAAC1B,CAAD,CAAG2B,GAAH,CAAOC,QAAP,CAAnB,CAAoC,CAAvL,EAA0LD,GAAG,CAACd,IAAJ,GAAa,SAAb,CAAyB,KAAzB,CAAiC,MAA3N,CAPJ,cAQI,oBAAC,oBAAD,EAAsB,SAAS,CAAC,sBAAhC,CAAuD,KAAK,CAAE,OAA9D,CAAuE,IAAI,CAAE,IAA7E,CAAmF,KAAK,CAAE,CAACiB,MAAM,CAAE,SAAT,CAA1F,CAA+G,OAAO,CAAE,yBAAMP,CAAAA,SAAS,CAACK,QAAD,CAAf,EAAxH,EARJ,CADJ,cAWI,oBAAC,YAAD,EAAc,EAAE,CAAC,eAAjB,CAAiC,SAAS,CAAC,MAA3C,CAAkD,eAAe,CAAC,SAAlE,EAXJ,CADM,EAAT,CADL,CAgBKvC,IAAI,CAAC4C,MAAL,CAAc,CAAd,eAED,oBAAC,cAAD,EAAgB,OAAO,CAAC,OAAxB,CAAgC,SAAS,CAAC,KAA1C,CAAgD,IAAI,CAAE1E,MAAtD,CAA8D,OAAO,CAAEwC,WAAvE,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,CAAY,SAAS,CAAC,kDAAtB,CAAyE,OAAO,CAAE,kBAAM,CAACrC,eAAe,CAAC,KAAD,CAAf,CAAwBF,SAAS,CAAC,SAAAgF,SAAS,QAAIA,CAAAA,SAAS,CAAG,KAAH,CAAW,IAAxB,EAAV,CAAT,CAAkD,CAAnK,eACI,yBAAG,SAAS,CAAC,SAAb,eADJ,CADJ,CAlBJ,cAyBI,2BAAK,GAAG,CAAE3E,YAAV,eACI,oBAAC,OAAD,EACI,IAAI,CAAEJ,YADV,CAEI,MAAM,CAAEE,kBAFZ,CAGI,SAAS,CAAC,KAHd,CAII,SAAS,CAAEE,YAAY,CAAC4E,OAJ5B,EAMIrC,iBAAiB,EANrB,CADJ,CAzBJ,CADJ,CADJ,CAvEJ,CANJ,CADJ,CA4HH","sourcesContent":["import React, {useState, useRef} from 'react';\r\n\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Image,\r\n    OverlayTrigger,\r\n    Overlay,\r\n    Popover,\r\n    Form,\r\n} from 'react-bootstrap';\r\nimport Picker from 'emoji-picker-react';\r\nimport Keyboard from 'react-simple-keyboard';\r\nimport layout from \"simple-keyboard-layouts/build/layouts/arabic\";\r\nimport ReactTooltip from 'react-tooltip';\r\nimport Swal from 'sweetalert2/dist/sweetalert2.js';\r\n\r\n\r\nimport { IoIosCall } from 'react-icons/io';\r\nimport { AiOutlineCloseCircle } from 'react-icons/ai';\r\nimport { BsLink45Deg } from 'react-icons/bs';\r\n\r\n\r\n// Icons:\r\nconst BALISE_ICON = require('../../../assets/images/home/balise.png');\r\nconst BALISE_ICON_ACTIVE = require('../../../assets/images/home/balise_active.png');\r\nconst EMO_ICON = require('../../../assets/images/home/emo.png');\r\nconst EMO_ICON_ACTIVE = require('../../../assets/images/home/emo_active.png');\r\nconst LETTER_ICON = require('../../../assets/images/home/3a.png');\r\nconst LETTER_ICON_ACTIVE = require('../../../assets/images/home/3a_active.png');\r\n\r\n\r\nexport default function WizardMiracleInput(props) {\r\n\r\n    const [BtnPop, setBtnPop] = useState(false);\r\n\r\n    const [BtnUpdatePop, setBtnUpdatePop] = useState(false);\r\n    const [BtnUpdatePopTarget, setBtnUpdatePopTarget] = useState(null);\r\n    const BtnUpdateRef = useRef(null);\r\n    const [BtnUpdateIndex, setBtnUpdateIndex] = useState(null);\r\n    const [BtnUpdateType, setBtnUpdateType] = useState('');\r\n    const [BtnUpdateTitle, setBtnUpdateTitle] = useState('');\r\n    const [BtnUpdateValue, setBtnUpdateValue] = useState('');\r\n   \r\n    let {\r\n        label,\r\n        response,\r\n        handleResponse,\r\n        showTags,\r\n        handleTags,\r\n        showEmojis,\r\n        handleEmojis,\r\n        showKeyboard,\r\n        handleKeyboard,\r\n        BtnType,\r\n        handleBtnType,\r\n        BtnTitle,\r\n        handleBtnTitle,\r\n        BtnValue,\r\n        handleBtnValue,\r\n        Btns,\r\n        handleBtns,\r\n        platform,\r\n    } = props;\r\n\r\n    // Popup Config :\r\n    const swalWithBootstrapButtons = Swal.mixin({\r\n        customClass: {\r\n          confirmButton: 'wizard-pages-active-btn py-3 px-3',\r\n        },\r\n        buttonsStyling: false\r\n    });\r\n\r\n    // render Functions :\r\n    const Tags = (\r\n        <Popover id=\"popover-tags\">\r\n          <Popover.Content>\r\n            <Row>\r\n                <Col lg={12}>\r\n                    {/* <Row className=\"d-flex w-100\">\r\n                        <IoIosClose className=\"ml-auto my-auto pt-1\" color={'#9F9F9F'} size={30} onClick={() => { handleTags(false) }} style={{cursor: 'pointer'}} />\r\n                    </Row> */}\r\n\r\n                    <Row className=\"pl-1 my-2\">\r\n                        <Col xs={12} className=\"d-flex mb-1 mt-2\">\r\n                            <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { handleResponse(prevResponse => prevResponse + '##FIRST_NAME##'); }}>First Name</p>\r\n                        </Col>\r\n                         \r\n                        <Col xs={12} className=\"d-flex mb-1\">\r\n                            <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { handleResponse(prevResponse => prevResponse + '##LAST_NAME##'); }}>Last Name</p>\r\n                        </Col>\r\n\r\n                        <Col xs={12} className=\"d-flex mb-1\">\r\n                            <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { handleResponse(prevResponse => prevResponse + '##FULL_NAME##'); }}  >Full Name</p>\r\n                        </Col>\r\n\r\n                        <Col xs={12} className=\"m-auto d-flex mb-2\">\r\n                            <p className=\"my-auto mr-auto wizard-config-tag\" onClick={() => { handleResponse(prevResponse => prevResponse + '##PAGE_NAME##'); }}  >Page Name</p>\r\n                        </Col> \r\n                    </Row>\r\n                </Col>\r\n            </Row>\r\n          </Popover.Content>\r\n        </Popover>\r\n    );\r\n\r\n    const BtnsPopover = (\r\n        <Popover id=\"popover-quick-replies\">\r\n          <Popover.Content>\r\n            <Row className=\"justify-content-center\">\r\n                <Col md={12}>\r\n                    <Row>\r\n                        <Col md={12} className=\"mt-2 mb-3\">\r\n                            <Form.Control as=\"select\" onChange={(e) => handleBtnType(e.target.value)} defaultValue={BtnType}>\r\n                                <option value=\"web_url\">URL</option>\r\n                                <option value=\"phone_number\">CALL</option>\r\n                            </Form.Control>\r\n                        </Col>\r\n                        \r\n                        <Col md={12} className=\"mt-2\">\r\n                            <Row className=\"d-flex\">\r\n                                <Col md={12}>\r\n                                    <Form.Control \r\n                                        type={\"text\"} \r\n                                        onChange={(e) => handleBtnTitle(e.target.value)} \r\n                                        value={BtnTitle}  \r\n                                        placeholder=\"Title\" \r\n                                    />\r\n                                </Col>\r\n\r\n                                <Col md={12} className=\"d-flex\">\r\n                                    <p className=\"ml-auto wizard-config-input-feedback\">Remaining characters: 20</p>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n\r\n                        <Col md={12} className=\"mb-2\">\r\n                            <Form.Control \r\n                                type={BtnType === \"web_url\" ? \"text\" : \"number\"} \r\n                                onChange={(e) => handleBtnValue(e.target.value)} \r\n                                value={BtnValue} \r\n                                placeholder={BtnType === \"web_url\" ? \"www.example.com\" : \"(+216) 99 999 999\"} \r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n\r\n                <Col md={11} className=\"d-flex pl-1\">\r\n                    <div className=\"wizard-pages-active-btn py-2 px-4\" onClick={() => addNewBtn()}>\r\n                        OK\r\n                    </div>\r\n                </Col>   \r\n            </Row>\r\n                \r\n          </Popover.Content>\r\n        </Popover>\r\n    );\r\n\r\n    const BtnsUpdatePopover = () => (\r\n        <Popover id=\"popover-quick-replies\">\r\n          <Popover.Content>\r\n            <Row className=\"justify-content-center\">\r\n                <Col md={12}>\r\n                    <Row>\r\n                        <Col md={12} className=\"mt-2 mb-3\">\r\n                            <Form.Control as=\"select\" onChange={(e) => setBtnUpdateType(e.target.value)} defaultValue={BtnUpdateType}>\r\n                                <option value=\"web_url\">URL</option>\r\n                                <option value=\"phone_number\">CALL</option>\r\n                            </Form.Control>\r\n                        </Col>\r\n                        \r\n                        <Col md={12} className=\"mt-2\">\r\n                            <Row className=\"d-flex\">\r\n                                <Col md={12}>\r\n                                    <Form.Control \r\n                                        type={\"text\"} \r\n                                        onChange={(e) => setBtnUpdateTitle(e.target.value)} \r\n                                        value={BtnUpdateTitle}  \r\n                                        placeholder=\"Title\" \r\n                                    />\r\n                                </Col>\r\n\r\n                                <Col md={12} className=\"d-flex\">\r\n                                    <p className=\"ml-auto wizard-config-input-feedback\">Remaining characters: 20</p>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n\r\n                        <Col md={12} className=\"mb-2\">\r\n                            <Form.Control \r\n                                type={BtnType === \"web_url\" ? \"text\" : \"number\"} \r\n                                onChange={(e) => setBtnUpdateValue(e.target.value)} \r\n                                value={BtnUpdateValue} \r\n                                placeholder={BtnUpdateType === \"web_url\" ? \"www.example.com\" : \"(+216) 99 999 999\"} \r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n\r\n                <Col md={11} className=\"d-flex pl-1\">\r\n                    <div className=\"wizard-pages-active-btn py-2 px-4\" onClick={() => updateBtn()}>\r\n                       OK\r\n                    </div>\r\n                </Col>   \r\n            </Row>\r\n                \r\n          </Popover.Content>\r\n        </Popover>\r\n    );\r\n\r\n    const popup = (message) => ( swalWithBootstrapButtons.fire({ title: `${message}`,confirmButtonText: 'Okay' }) );\r\n\r\n    // Functions :\r\n    const addNewBtn = () => {\r\n        let newBtns = [...Btns];\r\n    \r\n        if(BtnType === \"web_url\") {\r\n            let objectFb = {\r\n                type: \"web_url\",\r\n                url: BtnValue,\r\n                title: BtnTitle,\r\n                webview_height_ratio: \"full\",\r\n            } \r\n\r\n            if(BtnTitle === \"\") {\r\n                popup(\"Button title is empty !\");\r\n            } else if (BtnValue === \"\") {\r\n                popup(\"Button url is empty!\");\r\n            } else {\r\n                newBtns.push(objectFb);\r\n                // update new Btns :\r\n                handleBtns(newBtns);\r\n                // reset\r\n                resetBtns();\r\n            }\r\n        } else {\r\n            let objectFb = {\r\n                type: \"phone_number\",\r\n                title: BtnTitle,\r\n                payload: BtnValue,\r\n            };\r\n\r\n            if(BtnTitle === \"\") {\r\n                popup(\"Button title is empty !\");\r\n            } else if (BtnValue === \"\") {\r\n                popup(\"Button phone number is empty!\");\r\n            } else {\r\n                newBtns.push(objectFb);\r\n                // update new Btns :\r\n                handleBtns(newBtns);\r\n                // reset\r\n                resetBtns();\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    const updateBtn = () => {\r\n        let newBtns = [...Btns];\r\n        let newType = [...BtnUpdateType].join('');\r\n        let newTitle = [...BtnUpdateTitle].join('');\r\n        let newValue = [...BtnUpdateValue].join('');\r\n\r\n        if(newType === \"web_url\") {\r\n            newBtns[BtnUpdateIndex].type = BtnUpdateType;\r\n            newBtns[BtnUpdateIndex].title = newTitle;\r\n            newBtns[BtnUpdateIndex].url = newValue;\r\n            handleBtns(newBtns);\r\n            setBtnUpdatePop(false);\r\n        } else {\r\n            newBtns[BtnUpdateIndex].type = BtnUpdateType;\r\n            newBtns[BtnUpdateIndex].title = newTitle;\r\n            newBtns[BtnUpdateIndex].payload = newValue;\r\n            handleBtns(newBtns);\r\n            setBtnUpdatePop(false);\r\n        };\r\n    };\r\n\r\n    const deleteBtn = (index) => {\r\n        let newBtns = [...Btns];\r\n        newBtns.splice(index,1);\r\n        handleBtns(newBtns);\r\n    };\r\n\r\n    const resetBtns = () => {\r\n        handleBtnType('web_url');\r\n        handleBtnTitle('');\r\n        handleBtnValue('');\r\n        setBtnPop(false);\r\n        // setBtnUpdatePop(false);\r\n    };\r\n\r\n    const handleUpdatePopover = (e,btn,indexBtn) => {\r\n        setBtnUpdatePopTarget(e.target);\r\n        setBtnPop(false);\r\n        setBtnUpdatePop(false);\r\n\r\n        if(btn.type === \"web_url\") {\r\n            setBtnUpdateType(\"web_url\");\r\n            setBtnUpdateIndex(indexBtn);\r\n            setBtnUpdateTitle(btn.title);\r\n            setBtnUpdateValue(btn.url);\r\n            setBtnUpdatePop(true);\r\n        } else {\r\n            setBtnUpdateType(\"phone_number\");\r\n            setBtnUpdateIndex(indexBtn);\r\n            setBtnUpdateTitle(btn.title);\r\n            setBtnUpdateValue(btn.payload);\r\n            setBtnUpdatePop(true);\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <Row className=\"mx-0 px-2\">\r\n\r\n            <Col lg={12} className=\"mx-0 px-0\">\r\n                <label className=\"wizard-config-textarea-label\">{label}</label>\r\n            </Col>\r\n\r\n            <Col lg={12} className=\"wizard-intent-miracle-box px-1\">\r\n                <Row className=\"mb-1 mx-0 pt-1 px-2\">\r\n                    <Col lg={1} className=\"d-flex p-0\">\r\n                        <OverlayTrigger trigger=\"click\" placement=\"top\" overlay={Tags}>\r\n                            <Image \r\n                                src={showTags ? BALISE_ICON_ACTIVE : BALISE_ICON} \r\n                                onClick={() => handleTags(!showTags)} \r\n                                className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" \r\n                                style={{ width: '19px', cursor: 'pointer'}} \r\n                            />   \r\n                        </OverlayTrigger> \r\n                    </Col>                                \r\n\r\n                    <Col lg={1} className=\"d-flex p-0\">\r\n                        <Image \r\n                            src={showEmojis ? EMO_ICON_ACTIVE : EMO_ICON} \r\n                            onClick={() => handleEmojis(!showEmojis)} \r\n                            className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" \r\n                            style={{ width: '18px', cursor: 'pointer'}} \r\n                        />\r\n                    </Col>\r\n        \r\n                    <Col lg={1} className=\"d-flex p-0\">\r\n                        <Image \r\n                            src={showKeyboard ? LETTER_ICON_ACTIVE : LETTER_ICON} \r\n                            onClick={() => handleKeyboard(!showKeyboard)} \r\n                            className=\"my-auto mr-auto my-agents-msgs-tiny-icon\" \r\n                            style={{ width: '21px', cursor: 'pointer'}} \r\n                        />\r\n                    </Col>\r\n                \r\n                    <Col lg={8}>\r\n                        {showKeyboard &&\r\n                            <div className=\"wizard-config-keyboard-container\">\r\n                                <Keyboard \r\n                                    onChange={(input) => handleResponse(prevResponse => prevResponse + input.charAt(input.length - 1))} \r\n                                    // onKeyPress={(button) => onKeyPress(button,\"generic\")} \r\n                                    layout={layout} \r\n                                />\r\n                            </div>\r\n                        }\r\n\r\n                        {showEmojis &&\r\n                            <div className=\"wizard-config-emoji-container\" >\r\n                                <Picker onEmojiClick={(e,obj) => handleResponse(prevResponse=> prevResponse + obj.emoji) } />\r\n                            </div>\r\n                        } \r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                    <Col lg={12} className=\"mx-0\">\r\n                        <textarea \r\n                            onChange={(e) => handleResponse(e.target.value)} \r\n                            placeholder={\"Your Message...\"}\r\n                            // onFocus={() => console.log(\"Hey I'm Focused\")} \r\n                            value={response} \r\n                            className=\"wizard-config-textarea w-100 py-0\" \r\n                            rows=\"5\"\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row >\r\n                    <Col lg={12} className=\"my-0 py-0\">\r\n                        <hr style={{height: '2px', borderColor: '#B4B4B4', margin: '1px'}} />\r\n                    </Col>\r\n                </Row>\r\n\r\n                {platform === \"facebook\"\r\n                &&\r\n                <Row className=\"mx-0\">\r\n                    <Col lg={12}>\r\n                        <Row>\r\n                            {Btns.map((btn,indexBtn) => \r\n                                <Col key={indexBtn} lg={3} className=\"mr-2\">\r\n                                    <Row className=\"wizard-config-quick-replies-btn my-1 py-1 d-flex\">\r\n                                        {btn.type === \"web_url\" \r\n                                        ? \r\n                                        <BsLink45Deg color={'#fff'} size={15} className=\"ml-1 mr-auto my-auto\" onClick={(e) => handleUpdatePopover(e,btn,indexBtn)}/>\r\n                                        :\r\n                                        <IoIosCall color={'#fff'} size={15} className=\"ml-1 mr-auto my-auto\" onClick={(e) => handleUpdatePopover(e,btn,indexBtn) }/>\r\n                                        }\r\n                                        <p className={btn.type === \"web_url\" ? \"mr-auto my-auto\" : \"ml-1 mr-auto my-auto\" } data-for='quickReplyTip' data-tip={btn.title} onClick={(e) => {handleUpdatePopover(e,btn,indexBtn)}}>{btn.type === \"web_url\" ? \"url\" : \"call\"}</p>\r\n                                        <AiOutlineCloseCircle className=\"ml-auto my-auto mr-1\" color={\"white\"} size={\"15\"} style={{cursor: 'pointer'}} onClick={() => deleteBtn(indexBtn)} />\r\n                                    </Row>\r\n                                    <ReactTooltip id='quickReplyTip' textColor='#fff' backgroundColor='#009EE3' />\r\n                                </Col>\r\n                            )}\r\n                            {Btns.length < 3\r\n                            &&\r\n                            <OverlayTrigger trigger=\"click\" placement=\"top\" show={BtnPop} overlay={BtnsPopover}>\r\n                                <Col lg={3} className=\"wizard-config-quick-replies-btn my-1 py-1 d-flex\" onClick={() => {setBtnUpdatePop(false); setBtnPop(prevState => prevState ? false : true);}}>\r\n                                    <p className=\"my-auto\">Add button</p>\r\n                                </Col>\r\n                            </OverlayTrigger>\r\n                            }\r\n\r\n                            <div ref={BtnUpdateRef}>\r\n                                <Overlay\r\n                                    show={BtnUpdatePop}\r\n                                    target={BtnUpdatePopTarget}\r\n                                    placement=\"top\"\r\n                                    container={BtnUpdateRef.current}\r\n                                >\r\n                                   {BtnsUpdatePopover()}\r\n                                </Overlay>\r\n                            </div>\r\n\r\n                        </Row>\r\n                    </Col>\r\n                </Row> \r\n                }\r\n               \r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}