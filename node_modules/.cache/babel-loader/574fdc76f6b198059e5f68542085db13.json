{"ast":null,"code":"import _toConsumableArray from\"/usr/work/smart_front_oussema/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/usr/work/smart_front_oussema/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import TopMenu from'../components/TopMenu';import{connect}from'react-redux';import{getAllConnectedPages,getConnectedPagesProject,getConnectedPagesPosts,removeProject as _removeProject,selectedPage}from'../actions';import PageCart from'../components/PageCart';import ButtonActiveted from'../components/ButtonActiveted';import{Link,useLocation}from'react-router-dom';function useQuery(){return new URLSearchParams(useLocation().search);}function Agent(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),seletedPage=_useState2[0],setSelectedPage=_useState2[1];var query=useQuery();useEffect(function(){// console.log(query.get(\"page\"))\nprops.getallConnectedPage().then(function(){return props.getPagePostProject();}).then(function(){return query.get(\"page\")?handelClick(query.get(\"page\")):console.log('noparams');});},[]);var handelClick=function handelClick(idPage){console.log(idPage);props.getPagePosts(idPage).then(function(){var selectedPage=props.allConnectedPages.find(function(el){return el.idPage==idPage;});console.log('selectedpafe**** ',seletedPage);setSelectedPage(selectedPage);});};var removePorjuctHandler=function removePorjuctHandler(idPost){var project=props.allProjects.find(function(el){return el.post.idPost==idPost;});props.removeProject(project).then(function(){return props.getPagePostProject();});};return React.createElement(\"div\",null,React.createElement(TopMenu,null),React.createElement(\"div\",{style:{paddingLeft:30,paddingRight:30,paddingTop:30}},React.createElement(\"h2\",{style:{fontSize:30,color:\"rgba(45, 47, 57, 1)\"}},\"Pages connected\"),React.createElement(\"div\",{className:\"pagecarts\"},_toConsumableArray(props.allConnectedPages).sort(function(a,b){var x=a.name.toLowerCase();var y=b.name.toLowerCase();if(x<y){return-1;}if(x>y){return 1;}return 0;}).map(function(el){return React.createElement(\"div\",{key:el._id,onClick:function onClick(){handelClick(el.idPage);console.log('shadow ',selectedPage);},style:{cursor:\"pointer\",border:\"2px solid \".concat(seletedPage&&seletedPage.idPage===el.idPage?\"#E5007D\":\"transparent\")}},React.createElement(PageCart,{key:el._id,name:el.name,connected:el.isConnected,page:el,show:false}),\" \");})),React.createElement(\"br\",null),React.createElement(\"br\",null),seletedPage&&React.createElement(React.Fragment,null,React.createElement(\"h2\",null,\"Projets liste\"),React.createElement(\"div\",{style:{background:'#fff',paddingTop:40,paddingLeft:70,paddingRight:70,paddingBottom:40}},React.createElement(\"table\",{style:{width:\"100%\"}},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Picture\"),React.createElement(\"th\",null,\"Message\"),React.createElement(\"th\",null,\"Type\"),React.createElement(\"th\",null,\"Status\"),React.createElement(\"th\",null,\"Edit project\"))),React.createElement(\"tbody\",null,props.allProjects.filter(function(el){return el.post.page.idPage==seletedPage.idPage;}).sort(function(a,b){return new Date(b.createDate)-new Date(a.createDate);}).map(function(el){return React.createElement(\"tr\",{key:el._id},React.createElement(\"td\",{style:{display:\"flex\",alignItems:\"center\"}},el.post.hasOwnProperty('full_picture')?React.createElement(\"img\",{src:el.post.full_picture,alt:\"page thumbnail\",style:{width:40,height:40}}):React.createElement(\"img\",{src:'https://graph.facebook.com/v3.0/'+seletedPage.idPage+'/picture?access_token='+seletedPage.access_token,alt:\"page thumbnail\",style:{width:40,height:40}}),\" \"),React.createElement(\"td\",null,el.post.hasOwnProperty('message')?el.post.message.slice(0,el.post.message.length<=15?el.post.message.length:15)+'...':el.post.idPost!==el.post.page.idPage?'Timeline Post':el.post.page.name),React.createElement(\"td\",null,el.post.idPost!==el.post.page.idPage?React.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"20\",height:\"20\",viewBox:\"0 0 20 20\"},React.createElement(\"g\",{transform:\"translate(-3 -3)\"},React.createElement(\"path\",{fill:\"#b4b4b4\",d:\"M23 20.778V5.222A2.229 2.229 0 0020.778 3H5.222A2.229 2.229 0 003 5.222v15.556A2.229 2.229 0 005.222 23h15.556A2.229 2.229 0 0023 20.778zM9.111 14.667l2.778 3.344L15.778 13l5 6.667H5.222z\",\"data-name\":\"Trac\\xE9 208\"}))):React.createElement(\"svg\",{viewBox:\"0 0 496.26 496.26\",width:20,height:20},React.createElement(\"path\",{d:\"M302.765 20.395H45.458C20.536 20.395.26 40.67.26 65.592c0 329.751-1.925 309.456 4.692 316.073 96.335 96.334 90.227 90.74 93.596 92.406 4.818 2.418-8.366 1.692 204.216 1.692 24.922 0 45.198-20.275 45.198-45.197V65.592c.001-24.922-20.275-45.197-45.197-45.197zM89.679 421.137l-34.791-34.791h34.791zm226.284 9.429c0 7.277-5.92 13.197-13.198 13.197H121.679v-73.418c0-8.837-7.164-16-16-16H32.26V65.592c0-7.277 5.92-13.197 13.198-13.197h257.307c7.277 0 13.198 5.92 13.198 13.197zM422.112 65.592v364.975c0 24.922-20.276 45.197-45.198 45.197-8.836 0-16-7.163-16-16s7.164-16 16-16c7.277 0 13.198-5.92 13.198-13.197V65.592c0-7.277-5.92-13.197-13.198-13.197-8.836 0-16-7.163-16-16s7.164-16 16-16c24.922 0 45.198 20.275 45.198 45.197zm74.148 0v364.975c0 24.922-20.275 45.197-45.198 45.197-8.836 0-16-7.163-16-16s7.164-16 16-16c7.277 0 13.198-5.92 13.198-13.197V65.592c0-7.277-5.92-13.197-13.198-13.197-8.836 0-16-7.163-16-16s7.164-16 16-16c24.923 0 45.198 20.275 45.198 45.197z\",\"data-original\":\"#000000\",className:\"prefix__active-path\",\"data-old_color\":\"#000000\",fill:\"#818E94\"}))),React.createElement(\"td\",null,\" \",el.trained?React.createElement(ButtonActiveted,{project:el,seletedPage:seletedPage,agentPage:true}):React.createElement(\"svg\",{style:{cursor:'auto'},xmlns:\"http://www.w3.org/2000/svg\",width:\"120\",height:\"38\",\"data-name\":\"Composant 17 \\u2013 8\",viewBox:\"0 0 120 38\"},React.createElement(\"rect\",{width:\"120\",height:\"38\",fill:\"#818e94\",\"data-name\":\"Rectangle 1550\",opacity:\"0.4\",rx:\"4\"}),React.createElement(\"text\",{fill:\"#818e94\",\"data-name\":\"Draft\",fontFamily:\"Poppins-SemiBold, Poppins\",fontSize:\"15\",fontWeight:\"600\",transform:\"translate(60 24)\"},React.createElement(\"tspan\",{x:\"-20.707\",y:\"0\"},\"Draft\")))),React.createElement(\"td\",null,el.trained&&React.createElement(Link,{to:\"/dachboard/agent/\".concat(el.post.idPost),title:\"Check comments\"},React.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"27\",height:\"27\",viewBox:\"0 0 27 27\"},React.createElement(\"path\",{fill:\"none\",stroke:\"#e5137d\",strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M26 17.667a2.778 2.778 0 01-2.778 2.778H6.556L1 26V3.778A2.778 2.778 0 013.778 1h19.444A2.778 2.778 0 0126 3.778z\",\"data-name\":\"Icon feather-message-square\"}))),React.createElement(Link,{style:{cursor:'pointer'},title:\"Update Agent\",to:\"/dachboard/wizard/\".concat(el.post.idPost!==el.post.page.idPage?'monitorPost':'monitorPage',\"/\").concat(seletedPage.idPage,\"/project/\").concat(el.post.idPost,\"?project=\").concat(el.post.idPost)},React.createElement(\"svg\",{style:{cursor:'pointer',margin:\"0 15px\"},xmlns:\"http://www.w3.org/2000/svg\",width:\"27.241\",height:\"27\",viewBox:\"0 0 27.241 27\"},React.createElement(\"g\",{fill:\"none\",stroke:\"#e5137d\",strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",\"data-name\":\"Icon feather-edit\",transform:\"translate(-2 -1.818)\"},React.createElement(\"path\",{d:\"M14.01 5.797H5.447A2.447 2.447 0 003 8.244v17.127a2.447 2.447 0 002.447 2.447h17.127a2.447 2.447 0 002.447-2.447v-8.564\",\"data-name\":\"Trac\\xE9 420\"}),React.createElement(\"path\",{d:\"M22.913 3.691A2.979 2.979 0 0127.127 7.9L13.784 21.247l-5.618 1.405 1.4-5.618z\",\"data-name\":\"Trac\\xE9 421\"})))),React.createElement(\"svg\",{style:{cursor:'pointer'},onClick:function onClick(){return removePorjuctHandler(el.post.idPost);},xmlns:\"http://www.w3.org/2000/svg\",width:\"27\",height:\"28.786\",viewBox:\"0 0 27 28.786\"},React.createElement(\"g\",{fill:\"none\",stroke:\"#e5137d\",strokeLinecap:\"square\",strokeMiterlimit:\"10\",strokeWidth:\"2\",transform:\"translate(-3 -1)\"},React.createElement(\"path\",{d:\"M26.322 9.143V27a1.786 1.786 0 01-1.786 1.786H8.465A1.786 1.786 0 016.679 27V9.143\",\"data-name\":\"Trac\\xE9 429\"}),React.createElement(\"path\",{d:\"M0 0L0 10\",\"data-name\":\"Ligne 25\",transform:\"translate(17 13.786)\"}),React.createElement(\"path\",{d:\"M0 0L0 10\",\"data-name\":\"Ligne 26\",transform:\"translate(12 13.786)\"}),React.createElement(\"path\",{d:\"M0 0L0 10\",\"data-name\":\"Ligne 27\",transform:\"translate(21 13.786)\"}),React.createElement(\"path\",{d:\"M12.036 6.464V2h8.929v4.464\",\"data-name\":\"Trac\\xE9 430\"}),React.createElement(\"path\",{d:\"M25 0L0 0\",\"data-name\":\"Ligne 28\",transform:\"translate(4 6.786)\"})))));})))))));}var mapStateToProps=function mapStateToProps(state){// let posts = []\n// state.allPosts.forEach(el => {\n//     state.allProjects.forEach(Element => {\n//         if (Element.post.idPost == el.idPost) {\n//             posts.push(el)\n//         }\n//     })\n// })\n// console.log('posts has project ', posts)\nreturn{allConnectedPages:state.allConnectedPages,// allposts: posts,\nallProjects:state.allProjects};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getallConnectedPage:function getallConnectedPage(){return dispatch(getAllConnectedPages());},getPagePostProject:function getPagePostProject(){return dispatch(getConnectedPagesProject());},getPagePosts:function getPagePosts(pageid){return dispatch(getConnectedPagesPosts(pageid));},removeProject:function removeProject(project){return dispatch(_removeProject(project));}};};export default connect(mapStateToProps,mapDispatchToProps)(Agent);","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/dachboard/Agent.js"],"names":["React","useEffect","useState","TopMenu","connect","getAllConnectedPages","getConnectedPagesProject","getConnectedPagesPosts","removeProject","selectedPage","PageCart","ButtonActiveted","Link","useLocation","useQuery","URLSearchParams","search","Agent","props","seletedPage","setSelectedPage","query","getallConnectedPage","then","getPagePostProject","get","handelClick","console","log","idPage","getPagePosts","allConnectedPages","find","el","removePorjuctHandler","idPost","project","allProjects","post","paddingLeft","paddingRight","paddingTop","fontSize","color","sort","a","b","x","name","toLowerCase","y","map","_id","cursor","border","isConnected","background","paddingBottom","width","filter","page","Date","createDate","display","alignItems","hasOwnProperty","full_picture","height","access_token","message","slice","length","trained","margin","mapStateToProps","state","mapDispatchToProps","dispatch","pageid"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport TopMenu from '../components/TopMenu'\r\nimport { connect } from 'react-redux'\r\nimport { getAllConnectedPages, getConnectedPagesProject, getConnectedPagesPosts, removeProject, selectedPage } from '../actions'\r\nimport PageCart from '../components/PageCart'\r\nimport ButtonActiveted from '../components/ButtonActiveted'\r\nimport { Link, useLocation } from 'react-router-dom'\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nfunction Agent(props) {\r\n    const [seletedPage, setSelectedPage] = useState(null)\r\n    let query = useQuery()\r\n\r\n    useEffect(() => {\r\n        // console.log(query.get(\"page\"))\r\n        props.getallConnectedPage()\r\n            .then(() => props.getPagePostProject())\r\n            .then(() => query.get(\"page\") ? handelClick(query.get(\"page\")) : console.log('noparams'))\r\n    }, [])\r\n\r\n    const handelClick = (idPage) => {\r\n        console.log(idPage)\r\n        props.getPagePosts(idPage)\r\n            .then(() => {\r\n                const selectedPage = props.allConnectedPages.find(el => el.idPage == idPage)\r\n                console.log('selectedpafe**** ', seletedPage)\r\n                setSelectedPage(selectedPage)\r\n            })\r\n    }\r\n\r\n    const removePorjuctHandler = (idPost) => {\r\n        const project = props.allProjects.find(el => el.post.idPost == idPost)\r\n        props.removeProject(project)\r\n            .then(() => props.getPagePostProject())\r\n    }\r\n    return (\r\n        <div>\r\n            <TopMenu />\r\n            <div style={{ paddingLeft: 30, paddingRight: 30, paddingTop: 30 }}>\r\n                <h2 style={{ fontSize: 30, color: \"rgba(45, 47, 57, 1)\" }}>Pages connected</h2>\r\n                <div className=\"pagecarts\">\r\n                    {[...props.allConnectedPages].sort((a, b) => {\r\n                        var x = a.name.toLowerCase();\r\n                        var y = b.name.toLowerCase();\r\n                        if (x < y) { return -1; }\r\n                        if (x > y) { return 1; }\r\n                        return 0;\r\n                    }).map(el => <div key={el._id} onClick={() => { handelClick(el.idPage); console.log('shadow ', selectedPage) }} style={{ cursor: \"pointer\", border: `2px solid ${seletedPage && seletedPage.idPage === el.idPage ? \"#E5007D\" : \"transparent\"}` }}><PageCart key={el._id} name={el.name} connected={el.isConnected} page={el} show={false} /> </div>)}\r\n                </div>\r\n                <br /><br />\r\n                {/* {!selectedPage && <div style={{ background: '#fff', paddingTop: 40, paddingLeft: 70, paddingRight: 70, paddingBottom: 40, textAlign: \"center\" }}><h2>Select a Page...</h2></div>} */}\r\n                {seletedPage &&\r\n                    <><h2>Projets liste</h2>\r\n                        <div style={{ background: '#fff', paddingTop: 40, paddingLeft: 70, paddingRight: 70, paddingBottom: 40 }}>\r\n                            <table style={{ width: \"100%\", }}>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>Picture</th>\r\n                                        <th>Message</th>\r\n                                        <th>Type</th>\r\n                                        {/* <th>Published</th> */}\r\n                                        <th>Status</th>\r\n                                        <th>Edit project</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {\r\n                                        props.allProjects.filter(el => el.post.page.idPage == seletedPage.idPage).sort((a, b) => new Date(b.createDate) - new Date(a.createDate)).map(el => <tr key={el._id}>\r\n                                            {/* <td style={{ display: \"flex\", alignItems: \"center\" }}><img src={'https://graph.facebook.com/v3.2/' + seletedPage.idPage + '/picture?access_token=' + seletedPage.access_token} alt=\"page thumbnail\" style={{ width: 40 }} /> <Link style={{ marginLeft: 20, fontSize: 14, color: \"#3B5998\", textDecoration: \"none\" }}>Timeline {el.hasOwnProperty('picture') ? 'Photo' : 'Post'}</Link></td> */}\r\n                                            <td style={{ display: \"flex\", alignItems: \"center\" }}>{el.post.hasOwnProperty('full_picture') ? <img src={el.post.full_picture} alt=\"page thumbnail\" style={{ width: 40, height: 40 }} /> : <img src={'https://graph.facebook.com/v3.0/' + seletedPage.idPage + '/picture?access_token=' + seletedPage.access_token} alt=\"page thumbnail\" style={{ width: 40, height: 40 }} />} </td>\r\n                                            <td>{el.post.hasOwnProperty('message') ? el.post.message.slice(0, el.post.message.length <= 15 ? el.post.message.length : 15) + '...' : el.post.idPost !== el.post.page.idPage ? 'Timeline Post' : el.post.page.name}</td>\r\n                                            <td>{el.post.idPost !== el.post.page.idPage ? <svg\r\n                                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                width=\"20\"\r\n                                                height=\"20\"\r\n                                                viewBox=\"0 0 20 20\"\r\n                                            >\r\n                                                <g transform=\"translate(-3 -3)\">\r\n                                                    <path\r\n                                                        fill=\"#b4b4b4\"\r\n                                                        d=\"M23 20.778V5.222A2.229 2.229 0 0020.778 3H5.222A2.229 2.229 0 003 5.222v15.556A2.229 2.229 0 005.222 23h15.556A2.229 2.229 0 0023 20.778zM9.111 14.667l2.778 3.344L15.778 13l5 6.667H5.222z\"\r\n                                                        data-name=\"Tracé 208\"\r\n                                                    ></path>\r\n                                                </g>\r\n                                            </svg> :\r\n                                                <svg viewBox=\"0 0 496.26 496.26\" width={20} height={20}>\r\n                                                    <path\r\n                                                        d=\"M302.765 20.395H45.458C20.536 20.395.26 40.67.26 65.592c0 329.751-1.925 309.456 4.692 316.073 96.335 96.334 90.227 90.74 93.596 92.406 4.818 2.418-8.366 1.692 204.216 1.692 24.922 0 45.198-20.275 45.198-45.197V65.592c.001-24.922-20.275-45.197-45.197-45.197zM89.679 421.137l-34.791-34.791h34.791zm226.284 9.429c0 7.277-5.92 13.197-13.198 13.197H121.679v-73.418c0-8.837-7.164-16-16-16H32.26V65.592c0-7.277 5.92-13.197 13.198-13.197h257.307c7.277 0 13.198 5.92 13.198 13.197zM422.112 65.592v364.975c0 24.922-20.276 45.197-45.198 45.197-8.836 0-16-7.163-16-16s7.164-16 16-16c7.277 0 13.198-5.92 13.198-13.197V65.592c0-7.277-5.92-13.197-13.198-13.197-8.836 0-16-7.163-16-16s7.164-16 16-16c24.922 0 45.198 20.275 45.198 45.197zm74.148 0v364.975c0 24.922-20.275 45.197-45.198 45.197-8.836 0-16-7.163-16-16s7.164-16 16-16c7.277 0 13.198-5.92 13.198-13.197V65.592c0-7.277-5.92-13.197-13.198-13.197-8.836 0-16-7.163-16-16s7.164-16 16-16c24.923 0 45.198 20.275 45.198 45.197z\"\r\n                                                        data-original=\"#000000\"\r\n                                                        className=\"prefix__active-path\"\r\n                                                        data-old_color=\"#000000\"\r\n                                                        fill=\"#818E94\"\r\n                                                    />\r\n                                                </svg>\r\n                                            }</td>\r\n                                            {/* <td><span>{new Date(el.created_time).toLocaleDateString()}</span><br />\r\n                                                <span style={{ fontSize: 12, color: \"#B4B4B4\" }}>{new Date(el.created_time).toLocaleTimeString()}</span></td> */}\r\n                                            <td> {el.trained ? <ButtonActiveted project={el} seletedPage={seletedPage} agentPage={true} /> :\r\n                                                <svg style={{ cursor: 'auto' }}\r\n                                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                    width=\"120\"\r\n                                                    height=\"38\"\r\n                                                    data-name=\"Composant 17 – 8\"\r\n                                                    viewBox=\"0 0 120 38\"\r\n                                                >\r\n                                                    <rect\r\n                                                        width=\"120\"\r\n                                                        height=\"38\"\r\n                                                        fill=\"#818e94\"\r\n                                                        data-name=\"Rectangle 1550\"\r\n                                                        opacity=\"0.4\"\r\n                                                        rx=\"4\"\r\n                                                    ></rect>\r\n                                                    <text\r\n                                                        fill=\"#818e94\"\r\n                                                        data-name=\"Draft\"\r\n                                                        fontFamily=\"Poppins-SemiBold, Poppins\"\r\n                                                        fontSize=\"15\"\r\n                                                        fontWeight=\"600\"\r\n                                                        transform=\"translate(60 24)\"\r\n                                                    >\r\n                                                        <tspan x=\"-20.707\" y=\"0\">\r\n                                                            Draft\r\n        </tspan>\r\n                                                    </text>\r\n                                                </svg>\r\n                                            }</td>\r\n                                            <td>\r\n                                                {\r\n                                                    el.trained &&\r\n\r\n                                                    <Link to={`/dachboard/agent/${el.post.idPost}`} title=\"Check comments\">\r\n                                                        <svg\r\n                                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                            width=\"27\"\r\n                                                            height=\"27\"\r\n                                                            viewBox=\"0 0 27 27\"\r\n                                                        >\r\n                                                            <path\r\n                                                                fill=\"none\"\r\n                                                                stroke=\"#e5137d\"\r\n                                                                strokeLinecap=\"round\"\r\n                                                                strokeLinejoin=\"round\"\r\n                                                                strokeWidth=\"2\"\r\n                                                                d=\"M26 17.667a2.778 2.778 0 01-2.778 2.778H6.556L1 26V3.778A2.778 2.778 0 013.778 1h19.444A2.778 2.778 0 0126 3.778z\"\r\n                                                                data-name=\"Icon feather-message-square\"\r\n                                                            ></path>\r\n                                                        </svg>\r\n                                                    </Link>\r\n                                                }\r\n                                                <Link style={{ cursor: 'pointer' }} title=\"Update Agent\" to={`/dachboard/wizard/${el.post.idPost !== el.post.page.idPage ? 'monitorPost' : 'monitorPage'}/${seletedPage.idPage}/project/${el.post.idPost}?project=${el.post.idPost}`}>\r\n\r\n                                                    <svg style={{ cursor: 'pointer', margin: \"0 15px\" }}\r\n                                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                        width=\"27.241\"\r\n                                                        height=\"27\"\r\n                                                        viewBox=\"0 0 27.241 27\"\r\n                                                    >\r\n                                                        <g\r\n                                                            fill=\"none\"\r\n                                                            stroke=\"#e5137d\"\r\n                                                            strokeLinecap=\"round\"\r\n                                                            strokeLinejoin=\"round\"\r\n                                                            strokeWidth=\"2\"\r\n                                                            data-name=\"Icon feather-edit\"\r\n                                                            transform=\"translate(-2 -1.818)\"\r\n                                                        >\r\n                                                            <path\r\n                                                                d=\"M14.01 5.797H5.447A2.447 2.447 0 003 8.244v17.127a2.447 2.447 0 002.447 2.447h17.127a2.447 2.447 0 002.447-2.447v-8.564\"\r\n                                                                data-name=\"Tracé 420\"\r\n                                                            ></path>\r\n                                                            <path\r\n                                                                d=\"M22.913 3.691A2.979 2.979 0 0127.127 7.9L13.784 21.247l-5.618 1.405 1.4-5.618z\"\r\n                                                                data-name=\"Tracé 421\"\r\n                                                            ></path>\r\n                                                        </g>\r\n                                                    </svg>\r\n                                                </Link>\r\n                                                <svg style={{ cursor: 'pointer' }} onClick={() => removePorjuctHandler(el.post.idPost)}\r\n                                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                                    width=\"27\"\r\n                                                    height=\"28.786\"\r\n                                                    viewBox=\"0 0 27 28.786\"\r\n                                                >\r\n                                                    <g\r\n                                                        fill=\"none\"\r\n                                                        stroke=\"#e5137d\"\r\n                                                        strokeLinecap=\"square\"\r\n                                                        strokeMiterlimit=\"10\"\r\n                                                        strokeWidth=\"2\"\r\n                                                        transform=\"translate(-3 -1)\"\r\n                                                    >\r\n                                                        <path\r\n                                                            d=\"M26.322 9.143V27a1.786 1.786 0 01-1.786 1.786H8.465A1.786 1.786 0 016.679 27V9.143\"\r\n                                                            data-name=\"Tracé 429\"\r\n                                                        ></path>\r\n                                                        <path\r\n                                                            d=\"M0 0L0 10\"\r\n                                                            data-name=\"Ligne 25\"\r\n                                                            transform=\"translate(17 13.786)\"\r\n                                                        ></path>\r\n                                                        <path\r\n                                                            d=\"M0 0L0 10\"\r\n                                                            data-name=\"Ligne 26\"\r\n                                                            transform=\"translate(12 13.786)\"\r\n                                                        ></path>\r\n                                                        <path\r\n                                                            d=\"M0 0L0 10\"\r\n                                                            data-name=\"Ligne 27\"\r\n                                                            transform=\"translate(21 13.786)\"\r\n                                                        ></path>\r\n                                                        <path d=\"M12.036 6.464V2h8.929v4.464\" data-name=\"Tracé 430\"></path>\r\n                                                        <path\r\n                                                            d=\"M25 0L0 0\"\r\n                                                            data-name=\"Ligne 28\"\r\n                                                            transform=\"translate(4 6.786)\"\r\n                                                        ></path>\r\n                                                    </g>\r\n                                                </svg>\r\n                                            </td>\r\n                                        </tr>\r\n                                        )\r\n                                    }\r\n\r\n                                </tbody>\r\n                            </table>\r\n                        </div></>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    // let posts = []\r\n    // state.allPosts.forEach(el => {\r\n    //     state.allProjects.forEach(Element => {\r\n    //         if (Element.post.idPost == el.idPost) {\r\n    //             posts.push(el)\r\n    //         }\r\n    //     })\r\n    // })\r\n    // console.log('posts has project ', posts)\r\n    return {\r\n        allConnectedPages: state.allConnectedPages,\r\n        // allposts: posts,\r\n        allProjects: state.allProjects\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        getallConnectedPage: () => dispatch(getAllConnectedPages()),\r\n        getPagePostProject: () => dispatch(getConnectedPagesProject()),\r\n        getPagePosts: (pageid) => dispatch(getConnectedPagesPosts(pageid)),\r\n        removeProject: (project) => dispatch(removeProject(project))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Agent)\r\n"]},"metadata":{},"sourceType":"module"}