{"ast":null,"code":"import _slicedToArray from\"/usr/work/smart_front_oussema/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{connect}from'react-redux';import{addProductInCategory,updateCategoryName}from'../../../redux/actions/myProductsActions';import ProductDetails from'./ProductDetails';import{Col,Row,Image,Spinner}from'react-bootstrap';import{withRouter}from'react-router-dom';import Swal from'sweetalert2/dist/sweetalert2.js';import{FaInfoCircle}from'react-icons/fa';import{MdModeEdit}from'react-icons/md';var INSTA_ICON=require('../../../assets/images/home/insta-icon.png');var FB_ICON=require('../../../assets/images/home/fb-icon.png');export var UpdateProducts=function UpdateProducts(props){var history=props.history,socialMediaPageSelected=props.socialMediaPageSelected,categorySelected=props.categorySelected,addProductInCategory=props.addProductInCategory,updateCategoryName=props.updateCategoryName;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPopover=_useState2[0],setShowPopover=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),categoryName=_useState4[0],setCategoryName=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),categoryDone=_useState6[0],setCategoryDone=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newProduct=_useState8[0],setNewProduct=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),btnLoading=_useState10[0],setBtnLoading=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),allProducts=_useState12[0],setAllProducts=_useState12[1];var handlePopover=function handlePopover(delay){setTimeout(function(){setShowPopover(!showPopover);},delay);};var renderPopover=function renderPopover(){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex manage-products-popover\"},/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto\"},\"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s\"));};var goToUpdateCategoryName=function goToUpdateCategoryName(e){if(e.key==='Enter'){updateCategoryName(categorySelected,categoryName,socialMediaPageSelected).then(function(){setCategoryDone(true);}).catch(function(){Swal.fire({position:'center',icon:'error',title:'Error while updating category name',showConfirmButton:false,timer:2000});});}};var prepareEntitiesAndSave=function prepareEntitiesAndSave(){setBtnLoading(true);setTimeout(function(){return setBtnLoading(false);},1500);var entity={name:categoryName,values:allProducts};console.log(\"U will send\",entity);};useEffect(function(){if(!socialMediaPageSelected){history.push('manage-products');}else{setCategoryName(categorySelected.name);};},[]);return/*#__PURE__*/React.createElement(\"div\",{style:{height:window.innerHeight*1.2},className:\"d-flex flex-column\"},/*#__PURE__*/React.createElement(Row,{className:\"mt-5 mr-auto\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-agents-table-label\",style:{fontSize:'30px',fontFamily:'Poppins SemiBold'}},\"Update category\"),\" )\",/*#__PURE__*/React.createElement(FaInfoCircle,{color:\"#4080FF\",size:'15',onMouseEnter:function onMouseEnter(){return handlePopover('20');},onMouseLeave:function onMouseLeave(){return handlePopover('300');}}),showPopover&&renderPopover()),socialMediaPageSelected&&/*#__PURE__*/React.createElement(Row,{className:\"mr-auto d-flex mb-3\"},/*#__PURE__*/React.createElement(Row,{className:\"wizard-selected-page-container m-auto\",style:{backgroundColor:'transparent'}},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column mr-3\"},/*#__PURE__*/React.createElement(Image,{src:socialMediaPageSelected.picture_url,className:\"m-auto\",style:{maxWidth:'40px'}}),/*#__PURE__*/React.createElement(Image,{src:socialMediaPageSelected.platform===\"instagram\"?INSTA_ICON:FB_ICON,className:\"ml-auto\",style:{zIndex:1,marginTop:'-10px'}})),/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto wizard-pages-page-title\"},socialMediaPageSelected.name))),/*#__PURE__*/React.createElement(Row,{className:\"d-flex\"},categoryName&&categoryDone?/*#__PURE__*/React.createElement(Col,{lg:5,className:\"p-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto wizard-pages-page-title\"},categoryName),/*#__PURE__*/React.createElement(MdModeEdit,{className:\"my-auto ml-3\",color:'#4B4F56',size:'20',onClick:function onClick(){return setCategoryDone(false);},style:{cursor:'pointer'}}))):/*#__PURE__*/React.createElement(Col,{lg:2,className:\"add-new-product-input-container\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"add-new-product-input w-100\",placeholder:\"Type category name\",value:categoryName,onChange:function onChange(e){return setCategoryName(e.target.value);},onKeyDown:function onKeyDown(e){return goToUpdateCategoryName(e);}})),/*#__PURE__*/React.createElement(Col,{lg:10})),/*#__PURE__*/React.createElement(Row,{className:\"d-flex mt-3\"},/*#__PURE__*/React.createElement(Col,{lg:3},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-between\"},/*#__PURE__*/React.createElement(Col,{lg:6,className:\"add-new-product-input-container\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"add-new-product-input w-100\",disabled:categoryDone?false:true,value:newProduct,onChange:function onChange(e){return setNewProduct(e.target.value);},onKeyDown:function onKeyDown(e){if(e.key==='Enter')setNewProduct(e.target.value);}})),/*#__PURE__*/React.createElement(Col,{lg:5},/*#__PURE__*/React.createElement(Row,{className:categoryDone?\"manage-products-add-btn d-flex\":\"manage-products-add-disabled-btn d-flex\"// OLD => onClick={ () => categoryDone ? createProducts() : null }\n,onClick:function onClick(){addProductInCategory(categorySelected,socialMediaPageSelected,newProduct);setNewProduct(\"\");}},/*#__PURE__*/React.createElement(\"p\",{className:\"m-auto\"},\"Add products\"))))),/*#__PURE__*/React.createElement(Col,{lg:7})),categorySelected&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"mt-5 mr-0\"},/*#__PURE__*/React.createElement(Col,{lg:10,className:\"p-3\",style:{backgroundColor:'white',borderRadius:'0.3rem'}},categorySelected.children.length>0&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"p-3\",style:{borderBottom:'1px solid #EBEDF0'}},/*#__PURE__*/React.createElement(Col,{lg:5,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mr-auto d-flex\"},/*#__PURE__*/React.createElement(\"p\",{className:\"my-auto manage-products-table-title\"},\"Products\"))),/*#__PURE__*/React.createElement(Col,{lg:7},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mr-auto\"},/*#__PURE__*/React.createElement(\"p\",{className:\"mr-5 my-auto manage-products-table-title\"},\"Synonyms\")))),categorySelected.children.length>0&&categorySelected.children.map(function(product,index){return/*#__PURE__*/React.createElement(ProductDetails,{product:product,synonyms:product.synonyms,indexProduct:index,allProducts:allProducts,setAllProducts:setAllProducts});}))),/*#__PURE__*/React.createElement(Col,{lg:2})),/*#__PURE__*/React.createElement(Row,{className:\"mt-5 mr-0\"},/*#__PURE__*/React.createElement(Col,{lg:10,className:\"\"},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-pages-inactive-btn\"},\"Back\"),/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-pages-active-btn\",onClick:function onClick(){return prepareEntitiesAndSave();}},btnLoading?/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",variant:\"light\"}):\"Save\"))),/*#__PURE__*/React.createElement(Col,{lg:2}))));};var mapStateToProps=function mapStateToProps(state){return{socialMediaPageSelected:state.socialMediaR.socialMediaPageSelected,categories:state.productsR.categories,categorySelected:state.productsR.categorySelected};};export default withRouter(connect(mapStateToProps,{addProductInCategory:addProductInCategory,updateCategoryName:updateCategoryName})(UpdateProducts));","map":{"version":3,"sources":["/usr/work/smart_front_oussema/src/app/Home/ManageProducts/UpdateProducts.js"],"names":["React","useState","useEffect","connect","addProductInCategory","updateCategoryName","ProductDetails","Col","Row","Image","Spinner","withRouter","Swal","FaInfoCircle","MdModeEdit","INSTA_ICON","require","FB_ICON","UpdateProducts","props","history","socialMediaPageSelected","categorySelected","showPopover","setShowPopover","categoryName","setCategoryName","categoryDone","setCategoryDone","newProduct","setNewProduct","btnLoading","setBtnLoading","allProducts","setAllProducts","handlePopover","delay","setTimeout","renderPopover","goToUpdateCategoryName","e","key","then","catch","fire","position","icon","title","showConfirmButton","timer","prepareEntitiesAndSave","entity","name","values","console","log","push","height","window","innerHeight","fontSize","fontFamily","backgroundColor","picture_url","maxWidth","platform","zIndex","marginTop","cursor","target","value","borderRadius","children","length","borderBottom","map","product","index","synonyms","mapStateToProps","state","socialMediaR","categories","productsR"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { addProductInCategory, updateCategoryName } from '../../../redux/actions/myProductsActions';\r\n\r\nimport ProductDetails from './ProductDetails';\r\n\r\nimport {\r\n    Col,\r\n    Row,\r\n    Image,\r\n    Spinner\r\n} from 'react-bootstrap';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport Swal from 'sweetalert2/dist/sweetalert2.js'\r\n\r\nimport { FaInfoCircle } from 'react-icons/fa';\r\nimport { MdModeEdit } from 'react-icons/md';\r\n\r\nconst INSTA_ICON = require('../../../assets/images/home/insta-icon.png');\r\nconst FB_ICON = require('../../../assets/images/home/fb-icon.png');\r\n\r\nexport const UpdateProducts = (props) => {\r\n    \r\n    let { \r\n        history,\r\n        socialMediaPageSelected,\r\n        categorySelected,\r\n        addProductInCategory,\r\n        updateCategoryName,\r\n    } = props;\r\n\r\n    const [showPopover, setShowPopover]  = useState(false);\r\n    const [categoryName,setCategoryName] = useState('');\r\n    const [categoryDone,setCategoryDone] = useState(true);\r\n    const [newProduct,setNewProduct] = useState('');\r\n    const [btnLoading,setBtnLoading] = useState(false);\r\n    const [allProducts, setAllProducts] = useState([]);\r\n\r\n    const handlePopover = (delay) => {\r\n        setTimeout( () => {\r\n          setShowPopover(!showPopover);\r\n        },delay)\r\n    };\r\n    \r\n\r\n    const renderPopover = () => (\r\n        <div className=\"d-flex manage-products-popover\">\r\n          <p className=\"m-auto\">\r\n            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s\r\n          </p>\r\n        </div>\r\n    );\r\n\r\n    const goToUpdateCategoryName = (e) => {\r\n        if(e.key === 'Enter') {\r\n            updateCategoryName(categorySelected,categoryName,socialMediaPageSelected)\r\n            .then(() => {\r\n                setCategoryDone(true)\r\n            })\r\n            .catch(() => {\r\n                Swal.fire({\r\n                    position: 'center',\r\n                    icon: 'error',\r\n                    title: 'Error while updating category name',\r\n                    showConfirmButton: false,\r\n                    timer: 2000\r\n                })\r\n            })\r\n        }\r\n    };\r\n\r\n    const prepareEntitiesAndSave = () => {\r\n        setBtnLoading(true);\r\n\r\n        setTimeout(() => \r\n            setBtnLoading(false)\r\n        ,1500);\r\n\r\n        let entity = {\r\n                name: categoryName,\r\n                values: allProducts,\r\n        };\r\n\r\n        console.log(\"U will send\", entity);\r\n    };\r\n\r\n    useEffect(() => {\r\n       if(!socialMediaPageSelected) {\r\n           history.push('manage-products');\r\n       } else {\r\n           setCategoryName(categorySelected.name);\r\n       };\r\n    }, []);\r\n\r\n    return (\r\n    <div style={{height: window.innerHeight * 1.2}} className=\"d-flex flex-column\">\r\n           \r\n        <Row className=\"mt-5 mr-auto\">\r\n        <p className=\"my-agents-table-label\" style={{ fontSize: '30px', fontFamily: 'Poppins SemiBold' }}>Update category</p> )\r\n        <FaInfoCircle color={\"#4080FF\"} size={'15'} onMouseEnter={() => handlePopover('20')} onMouseLeave={() => handlePopover('300')} />\r\n        { showPopover && renderPopover() }\r\n        </Row>\r\n\r\n        {/* SELECTED PAGE */}\r\n        {socialMediaPageSelected &&\r\n        <Row className=\"mr-auto d-flex mb-3\">\r\n            <Row className=\"wizard-selected-page-container m-auto\" style={{backgroundColor: 'transparent'}}>\r\n                <div className=\"d-flex flex-column mr-3\">\r\n                    <Image src={socialMediaPageSelected.picture_url} className=\"m-auto\" style={{ maxWidth: '40px' }} />\r\n                    <Image src={socialMediaPageSelected.platform === \"instagram\" ? INSTA_ICON : FB_ICON} className=\"ml-auto\" style={{zIndex: 1, marginTop: '-10px'}}/>\r\n                </div>\r\n                <p className=\"m-auto wizard-pages-page-title\">{socialMediaPageSelected.name}</p> \r\n            </Row>\r\n        </Row>\r\n        }\r\n        \r\n        {/* Category Name */}\r\n        <Row className=\"d-flex\">   \r\n            {categoryName && categoryDone\r\n            ?\r\n            (\r\n            <Col lg={5} className=\"p-0\">\r\n                <div className=\"d-flex\">\r\n                    <p className=\"my-auto wizard-pages-page-title\">{categoryName}</p>\r\n                    <MdModeEdit className=\"my-auto ml-3\" color={'#4B4F56'} size={'20'} onClick={() => setCategoryDone(false)} style={{ cursor: 'pointer' }} />\r\n                </div>\r\n            </Col>\r\n            )\r\n            :\r\n            (\r\n            <Col lg={2} className=\"add-new-product-input-container\">\r\n                <input \r\n                    type=\"text\" className=\"add-new-product-input w-100\" placeholder=\"Type category name\"  \r\n                    value={categoryName} onChange={(e) => setCategoryName(e.target.value)} onKeyDown={(e) => goToUpdateCategoryName(e)}\r\n                />\r\n            </Col>\r\n            )\r\n            }\r\n            <Col lg={10} />\r\n        </Row>\r\n        \r\n        {/* ADD PRODUCTS */}\r\n        <Row className=\"d-flex mt-3\">   \r\n            <Col lg={3}>\r\n                <Row className=\"justify-content-between\">\r\n                    <Col lg={6} className=\"add-new-product-input-container\">\r\n                        <input \r\n                            type=\"text\" \r\n                            className=\"add-new-product-input w-100\" \r\n                            disabled={categoryDone ? false : true} value={newProduct} \r\n                            onChange={(e) => setNewProduct(e.target.value)} \r\n                            onKeyDown={(e) => { if(e.key === 'Enter') setNewProduct(e.target.value) }}\r\n                        />\r\n                    </Col>\r\n\r\n                    <Col lg={5}>\r\n                        <Row \r\n                            className={categoryDone ? \"manage-products-add-btn d-flex\" : \"manage-products-add-disabled-btn d-flex\"} \r\n                            // OLD => onClick={ () => categoryDone ? createProducts() : null }\r\n                            onClick={ () => {addProductInCategory(categorySelected,socialMediaPageSelected,newProduct); setNewProduct(\"\");}} \r\n                        >\r\n                            {/* <MdAddCircleOutline className=\"my-auto mr-1\" color={iconColor} size={'20'} /> */}\r\n                            <p className=\"m-auto\">Add products</p>\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n            </Col>\r\n\r\n            <Col lg={7} />\r\n        </Row>\r\n        \r\n        {categorySelected &&\r\n        <>\r\n        <Row className=\"mt-5 mr-0\">\r\n            <Col lg={10} className=\"p-3\" style={{backgroundColor: 'white', borderRadius: '0.3rem'}}> \r\n                {\r\n                categorySelected.children.length > 0\r\n                &&\r\n                <>\r\n                {/* TITLES */}\r\n                <Row className=\"p-3\" style={{borderBottom: '1px solid #EBEDF0'}}>\r\n                    <Col lg={5} className=\"d-flex\">\r\n                        <div className=\"mr-auto d-flex\">\r\n                            <p className=\"my-auto manage-products-table-title\">Products</p>\r\n                        </div>\r\n                    </Col>\r\n\r\n                    <Col lg={7}>\r\n                        <div className=\"d-flex mr-auto\">\r\n                            <p className=\"mr-5 my-auto manage-products-table-title\">Synonyms</p>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/* LINE */}\r\n                {categorySelected.children.length > 0 && \r\n                categorySelected.children.map((product,index) => \r\n                    <ProductDetails  \r\n                        product={product} \r\n                        synonyms={product.synonyms} \r\n                        indexProduct={index} \r\n                        allProducts={allProducts} setAllProducts={setAllProducts} \r\n                    />\r\n                )}\r\n                </>\r\n                }\r\n            </Col>\r\n\r\n            <Col lg={2} />\r\n        </Row>\r\n\r\n        {/* Buttons */}\r\n        <Row className=\"mt-5 mr-0\">\r\n            <Col lg={10} className=\"\"> \r\n                <Row className=\"justify-content-between\">\r\n                    <div className=\"wizard-pages-inactive-btn\">\r\n                        Back    \r\n                    </div>\r\n\r\n                    <div className=\"wizard-pages-active-btn\" onClick={() => prepareEntitiesAndSave() }>\r\n                        { btnLoading ? <Spinner animation=\"border\" variant=\"light\" /> : \"Save\"}\r\n                    </div>\r\n                </Row>\r\n            </Col>\r\n\r\n            <Col lg={2} />\r\n        </Row>\r\n\r\n        </>\r\n        }\r\n    </div>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        socialMediaPageSelected : state.socialMediaR.socialMediaPageSelected,\r\n        categories : state.productsR.categories,\r\n        categorySelected : state.productsR.categorySelected,\r\n    }\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, { addProductInCategory, updateCategoryName })(UpdateProducts));\r\n"]},"metadata":{},"sourceType":"module"}